<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Notes App</title>
    <style>
     * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

.container {
    max-width: 800px;
    margin: 2rem auto;
    padding: 1rem;
}

.hidden {
    display: none;
}

.auth-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-top: 2rem;
}

input, textarea {
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
}

textarea {
    min-height: 150px;
    resize: vertical;
}

button {
    padding: 0.5rem 1rem;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
}

button:hover {
    background-color: #0056b3;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.note-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
}

.note-card {
    background-color: #f8f9fa;
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 4px;
    position: relative;
}

.note-card h3 {
    margin-bottom: 0.5rem;
}

.delete-btn {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background-color: #dc3545;
    padding: 0.25rem 0.5rem;
}

.delete-btn:hover {
    background-color: #c82333;
}

    </style>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="authContainer" class="container">
        <h2>Notes App</h2>
        <div class="auth-form">
            <input type="email" id="emailInput" placeholder="Email">
            <input type="password" id="passwordInput" placeholder="Password">
            <button onclick="login()">Login</button>
            <button onclick="register()">Register</button>
        </div>
    </div>

    <div id="notesContainer" class="container hidden">
        <div class="header">
            <h2>My Notes</h2>
            <button onclick="logout()">Logout</button>
        </div>
        <div class="note-form">
            <input type="text" id="titleInput" placeholder="Note Title">
            <textarea id="contentInput" placeholder="Note Content"></textarea>
            <button onclick="saveNote()">Save Note</button>
        </div>
        <div id="notesList"></div>
    </div>
</body>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
<script>
 // Initialize Firebase
const firebaseConfig = {
    apiKey: "AIzaSyBudtF-qE8XnrkoYDgiC1zptyQnJs9C96s",
    authDomain: "hisdatabase-1cdd8.firebaseapp.com",
    projectId: "hisdatabase-1cdd8",
    storageBucket: "hisdatabase-1cdd8.firebasestorage.app",
    messagingSenderId: "612083839754",
    appId: "1:612083839754:web:b75f5210479183999a40f3",
    measurementId: "G-T3QXBC57WJ"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Authentication Functions
async function register() {
    const email = document.getElementById('emailInput').value;
    const password = document.getElementById('passwordInput').value;

    try {
        await auth.createUserWithEmailAndPassword(email, password);
        showToast('Registration successful!');
    } catch (error) {
        showToast(error.message, 'error');
    }
}

async function login() {
    const email = document.getElementById('emailInput').value;
    const password = document.getElementById('passwordInput').value;

    try {
        await auth.signInWithEmailAndPassword(email, password);
        showToast('Login successful!');
    } catch (error) {
        showToast(error.message, 'error');
    }
}

function logout() {
    auth.signOut();
    showToast('Logged out successfully!');
}

// Note Functions
async function saveNote() {
    const title = document.getElementById('titleInput').value;
    const content = document.getElementById('contentInput').value;

    if (!title || !content) {
        showToast('Please fill in all fields', 'error');
        return;
    }

    try {
        await db.collection('notes').add({
            userId: auth.currentUser.uid,
            title,
            content,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });

        document.getElementById('titleInput').value = '';
        document.getElementById('contentInput').value = '';
        showToast('Note saved successfully!');
        loadNotes();
    } catch (error) {
        showToast(error.message, 'error');
    }
}

async function deleteNote(noteId) {
    try {
        await db.collection('notes').doc(noteId).delete();
        showToast('Note deleted successfully!');
        loadNotes();
    } catch (error) {
        showToast(error.message, 'error');
    }
}

async function loadNotes() {
    const notesList = document.getElementById('notesList');
    notesList.innerHTML = '';

    const snapshot = await db.collection('notes')
        .where('userId', '==', auth.currentUser.uid)
        .orderBy('timestamp', 'desc')
        .get();

    snapshot.forEach(doc => {
        const note = doc.data();
        const noteElement = document.createElement('div');
        noteElement.className = 'note-card';
        noteElement.innerHTML = `
            <h3>${note.title}</h3>
            <p>${note.content}</p>
            <button onclick="deleteNote('${doc.id}')" class="delete-btn">Delete</button>
        `;
        notesList.appendChild(noteElement);
    });
}

// UI Functions
function showToast(message, type = 'success') {
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    toast.textContent = message;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
}

// Auth State Observer
auth.onAuthStateChanged(user => {
    const authContainer = document.getElementById('authContainer');
    const notesContainer = document.getElementById('notesContainer');

    if (user) {
        authContainer.classList.add('hidden');
        notesContainer.classList.remove('hidden');
        loadNotes();
    } else {
        authContainer.classList.remove('hidden');
        notesContainer.classList.add('hidden');
    }
});

</script>
</html>
