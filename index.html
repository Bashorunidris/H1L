<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LASU Mirror Radio - Your Campus Voice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background 0.3s, color 0.3s;
        }

        body.dark {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
        }

        body.light {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }

        .hidden {
            display: none !important;
        }

        /* Landing Page */
        #landingPage {
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .wave-animation {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0.1;
            pointer-events: none;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 3rem;
            position: relative;
            z-index: 10;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #ffd700;
            color: #ffd700;
        }

        .btn-outline:hover {
            background: #ffd700;
            color: #1a1a2e;
        }

        .btn-primary {
            background: #ffd700;
            color: #1a1a2e;
        }

        .btn-primary:hover {
            background: #ffed4e;
            transform: scale(1.05);
        }

        .hero {
            text-align: center;
            padding: 5rem 2rem;
            position: relative;
            z-index: 5;
        }

        .hero h1 {
            font-size: 4rem;
            background: linear-gradient(45deg, #ffd700, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            animation: gradient 3s ease infinite;
        }

        @keyframes gradient {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(45deg); }
        }

        .hero p {
            font-size: 1.5rem;
            margin-bottom: 3rem;
            color: #ccc;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
            color: #ffd700;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 3rem;
            max-width: 450px;
            width: 90%;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #ffd700;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 1rem;
        }

        .form-group input:focus {
            outline: none;
            border-color: #ffd700;
        }

        /* Dashboard */
        .dashboard {
            min-height: 100vh;
            padding: 2rem;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ffd700, #ff6b6b);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .dashboard-nav {
            display: flex;
            gap: 1rem;
        }

        .icon-btn {
            background: rgba(255, 215, 0, 0.1);
            border: none;
            padding: 0.75rem;
            border-radius: 10px;
            cursor: pointer;
            color: #ffd700;
            transition: all 0.3s;
        }

        .icon-btn:hover {
            background: #ffd700;
            color: #1a1a2e;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(255, 215, 0, 0.2);
        }

        .tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            color: #ccc;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #ffd700;
            border-bottom-color: #ffd700;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.2);
        }

        .card-image {
            width: 100%;
            height: 180px;
            background: linear-gradient(45deg, #1a1a2e, #ffd700);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .live-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4444;
            color: #fff;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .card-content {
            padding: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            color: #ffd700;
        }

        .card-meta {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #aaa;
        }

        /* Live Player */
        .live-player {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .player-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .player-main {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .player-controls {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
        }

        .waveform {
            width: 100%;
            height: 100px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 10px;
            margin: 2rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .wave-bar {
            width: 5px;
            background: #ffd700;
            border-radius: 5px;
            animation: wave 1s ease-in-out infinite;
        }

        .wave-bar:nth-child(1) { height: 20px; animation-delay: 0s; }
        .wave-bar:nth-child(2) { height: 40px; animation-delay: 0.1s; }
        .wave-bar:nth-child(3) { height: 60px; animation-delay: 0.2s; }
        .wave-bar:nth-child(4) { height: 40px; animation-delay: 0.3s; }
        .wave-bar:nth-child(5) { height: 20px; animation-delay: 0.4s; }

        @keyframes wave {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .big-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: none;
            background: #ffd700;
            color: #1a1a2e;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .big-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        .chat-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            height: 600px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
            padding: 1rem;
        }

        .message {
            background: rgba(255, 215, 0, 0.1);
            padding: 0.75rem;
            border-radius: 10px;
            margin-bottom: 0.5rem;
        }

        .message-sender {
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 0.25rem;
        }

        .chat-input {
            display: flex;
            gap: 0.5rem;
        }

        .chat-input input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
        }

        /* Admin Studio */
        .studio {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .studio-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .control-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
        }

        .control-card h3 {
            color: #ffd700;
            margin-bottom: 1rem;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .status-live {
            background: #ff4444;
            animation: pulse 2s infinite;
        }

        .status-offline {
            background: #666;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .player-main {
                grid-template-columns: 1fr;
            }

            nav {
                padding: 1rem;
            }

            .features {
                grid-template-columns: 1fr;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: #ffd700;
            border-radius: 5px;
        }

        .admin-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
        }

        .file-input {
            display: none;
        }

        .file-label {
            display: inline-block;
            padding: 0.75rem 2rem;
            background: rgba(255, 215, 0, 0.2);
            border: 2px dashed #ffd700;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-label:hover {
            background: rgba(255, 215, 0, 0.3);
        }
    </style>
</head>
<body class="dark">
    <!-- Landing Page -->
    <div id="landingPage">
        <div class="wave-animation">
            <svg viewBox="0 0 1200 600" xmlns="http://www.w3.org/2000/svg">
                <path d="M0,300 Q300,200 600,300 T1200,300 L1200,600 L0,600 Z" fill="rgba(255, 215, 0, 0.1)">
                    <animate attributeName="d" 
                        dur="10s" 
                        repeatCount="indefinite"
                        values="M0,300 Q300,200 600,300 T1200,300 L1200,600 L0,600 Z;
                                M0,300 Q300,400 600,300 T1200,300 L1200,600 L0,600 Z;
                                M0,300 Q300,200 600,300 T1200,300 L1200,600 L0,600 Z"/>
                </path>
            </svg>
        </div>

        <nav>
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="2"/>
                    <path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/>
                </svg>
                LASU Mirror
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline" onclick="showAuthModal('signin')">Sign In</button>
                <button class="btn btn-primary" onclick="showAuthModal('signup')">Sign Up</button>
            </div>
        </nav>

        <div class="hero">
            <h1>LASU Mirror Radio</h1>
            <p>Your Campus Voice, Amplified</p>
            <p style="font-size: 1.2rem; color: #aaa;">Join live broadcasts ‚Ä¢ Connect with hosts ‚Ä¢ Be part of the conversation</p>
        </div>

        <div class="features">
            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="2"/>
                    <path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/>
                </svg>
                <h3>Live Streaming</h3>
                <p>Real-time audio broadcasts with crystal clear quality</p>
            </div>
            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                <h3>Live Chat</h3>
                <p>Interact with hosts and listeners in real-time</p>
            </div>
            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                <h3>Scheduled Shows</h3>
                <p>Never miss your favorite broadcasts with reminders</p>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal hidden">
        <div class="modal-content">
            <button class="modal-close" onclick="closeAuthModal()">√ó</button>
            <h2 id="authTitle" style="color: #ffd700; margin-bottom: 2rem; text-align: center;">Sign In</h2>
            <form id="authForm" onsubmit="handleAuth(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="authEmail" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="authPassword" required placeholder="Enter your password">
                </div>
                <div id="signupFields" class="hidden">
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="authUsername" placeholder="Choose a username">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                    <span id="authButtonText">Sign In</span>
                </button>
                <p style="text-align: center; margin-top: 1rem; color: #aaa;">
                    <span id="authSwitchText">Don't have an account?</span>
                    <a href="#" onclick="toggleAuthMode(event)" style="color: #ffd700; margin-left: 0.5rem;">
                        <span id="authSwitchLink">Sign Up</span>
                    </a>
                </p>
            </form>
        </div>
    </div>

    <!-- User Dashboard -->
    <div id="userDashboard" class="dashboard hidden">
        <div class="dashboard-header">
            <div class="user-info">
                <div class="avatar" id="userAvatar">U</div>
                <div>
                    <div style="font-weight: bold;" id="userName">User</div>
                    <div style="font-size: 0.9rem; color: #aaa;" id="userEmail">user@email.com</div>
                </div>
            </div>
            <div class="dashboard-nav">
                <button class="icon-btn" onclick="showProfile()" title="Profile">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                </button>
                <button class="icon-btn" onclick="toggleTheme()" title="Toggle Theme">
                    <svg id="themeIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                </button>
                <button class="icon-btn" onclick="logout()" title="Logout">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('scheduled')">üìÖ Scheduled Shows</button>
            <button class="tab" onclick="switchTab('live')">üî¥ Live Now</button>
        </div>

        <div id="scheduledTab" class="cards-grid">
            <!-- Scheduled shows will be loaded here -->
        </div>

        <div id="liveTab" class="cards-grid hidden">
            <!-- Live shows will be loaded here -->
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="dashboard hidden">
        <div class="dashboard-header">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="2"/>
                    <path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/>
                </svg>
                Admin Studio
            </div>
            <div class="dashboard-nav">
                <button class="icon-btn" onclick="toggleTheme()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                    </svg>
                </button>
                <button class="icon-btn" onclick="logout()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="admin-form">
            <h2 style="color: #ffd700; margin-bottom: 1.5rem;">Create New Show</h2>
            <form id="createShowForm" onsubmit="createShow(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label>Show Title</label>
                        <input type="text" id="showTitle" required placeholder="e.g., Morning Buzz">
                    </div>
                    <div class="form-group">
                        <label>Host Name</label>
                        <input type="text" id="showHost" required placeholder="e.g., DJ Flash">
                    </div>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="showDescription" required placeholder="What's the show about?"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Date & Time</label>
                        <input type="datetime-local" id="showDateTime" required>
                    </div>
                    <div class="form-group">
                        <label>Duration (minutes)</label>
                        <input type="number" id="showDuration" required placeholder="60" min="15">
                    </div>
                </div>
                <div class="form-group">
                    <label>Sponsor (Optional)</label>
                    <input type="text" id="showSponsor" placeholder="e.g., LASU SUG">
                </div>
                <div class="form-group">
                    <label>Cover Image</label>
                    <input type="file" id="showImage" class="file-input" accept="image/*">
                    <label for="showImage" class="file-label">üìÅ Choose Image</label>
                    <span id="fileName" style="margin-left: 1rem; color: #aaa;"></span>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Create Show</button>
            </form>
        </div>

        <h2 style="color: #ffd700; margin: 2rem 0 1rem;">Your Shows</h2>
        <div id="adminShowsList" class="cards-grid">
            <!-- Admin shows will be loaded here -->
        </div>
    </div>

    <!-- Live Player Page -->
    <div id="livePlayerPage" class="live-player hidden">
        <button class="btn btn-outline" onclick="backToDashboard()" style="margin-bottom: 2rem;">‚Üê Back</button>
        
        <div class="player-header">
            <h1 id="liveShowTitle" style="color: #ffd700; font-size: 2.5rem;">Live Show</h1>
            <p id="liveShowHost" style="color: #aaa; font-size: 1.2rem;">Hosted by DJ Flash</p>
        </div>

        <div class="player-main">
            <div class="player-controls">
                <div class="waveform" id="waveform">
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                </div>

                <div style="display: flex; justify-content: space-around; margin: 2rem 0;">
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: #ffd700;">üë•</div>
                        <div id="listenerCount" style="font-size: 1.5rem; font-weight: bold;">0</div>
                        <div style="color: #aaa; font-size: 0.9rem;">Listeners</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: #ffd700;">‚è±Ô∏è</div>
                        <div id="streamTime" style="font-size: 1.5rem; font-weight: bold;">00:00</div>
                        <div style="color: #aaa; font-size: 0.9rem;">Duration</div>
                    </div>
                </div>

                <div class="control-buttons">
                    <button class="big-btn" id="playButton" onclick="togglePlay()">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                            <polygon points="5 3 19 12 5 21 5 3"/>
                        </svg>
                    </button>
                    <button class="big-btn" onclick="toggleMute()">
                        <svg id="volumeIcon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="chat-box">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">Live Chat</h3>
                <div class="chat-messages" id="chatMessages">
                    <div class="message">
                        <div class="message-sender">System</div>
                        <div>Welcome to the live chat! Be respectful and enjoy the show.</div>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Type your message..." onkeypress="handleChatKey(event)">
                    <button class="icon-btn" onclick="sendMessage()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"/>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Studio Control Page -->
    <div id="studioPage" class="studio hidden">
        <button class="btn btn-outline" onclick="backToAdmin()" style="margin-bottom: 2rem;">‚Üê Back to Dashboard</button>
        
        <div class="player-header">
            <h1 id="studioShowTitle" style="color: #ffd700; font-size: 2.5rem;">Studio Controls</h1>
            <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-top: 1rem;">
                <span class="status-indicator" id="studioStatus"></span>
                <span id="studioStatusText" style="font-size: 1.2rem;">Ready to Broadcast</span>
            </div>
        </div>

        <div class="studio-controls">
            <div class="control-card">
                <h3>Broadcast</h3>
                <button class="btn btn-primary" id="broadcastButton" onclick="toggleBroadcast()" style="width: 100%;">
                    Start Live
                </button>
            </div>
            <div class="control-card">
                <h3>Microphone</h3>
                <button class="icon-btn" id="micButton" onclick="toggleMic()" style="width: 60px; height: 60px; margin: 0 auto;">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                        <line x1="12" y1="19" x2="12" y2="23"/>
                        <line x1="8" y1="23" x2="16" y2="23"/>
                    </svg>
                </button>
                <div id="micStatus" style="margin-top: 0.5rem; color: #aaa;">Muted</div>
            </div>
            <div class="control-card">
                <h3>Live Audience</h3>
                <div style="font-size: 2.5rem; color: #ffd700; font-weight: bold;" id="studioListenerCount">0</div>
                <div style="color: #aaa;">Listeners</div>
            </div>
            <div class="control-card">
                <h3>Chat Control</h3>
                <label style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer;">
                    <input type="checkbox" id="chatToggle" checked onchange="toggleChat()">
                    <span id="chatStatus">Enabled</span>
                </label>
            </div>
        </div>

        <div class="chat-box" style="margin-top: 2rem; max-width: 800px; margin-left: auto; margin-right: auto;">
            <h3 style="color: #ffd700; margin-bottom: 1rem;">Live Chat Monitor</h3>
            <div class="chat-messages" id="studioChatMessages" style="height: 400px;">
                <div class="message">
                    <div class="message-sender">System</div>
                    <div>Studio chat monitor ready. Messages from listeners will appear here.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="profilePage" class="dashboard hidden">
        <button class="btn btn-outline" onclick="backToDashboard()" style="margin-bottom: 2rem;">‚Üê Back</button>
        
        <div class="admin-form" style="max-width: 600px; margin: 0 auto;">
            <h2 style="color: #ffd700; margin-bottom: 2rem; text-align: center;">Your Profile</h2>
            
            <div style="text-align: center; margin-bottom: 2rem;">
                <div class="avatar" style="width: 100px; height: 100px; font-size: 2rem; margin: 0 auto;" id="profileAvatar">U</div>
            </div>

            <form id="profileForm" onsubmit="updateProfile(event)">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="profileUsername" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="profileEmail" disabled>
                </div>
                <div class="form-group">
                    <label>Bio</label>
                    <textarea id="profileBio" placeholder="Tell us about yourself..."></textarea>
                </div>
                <div class="form-group">
                    <label>Subscription</label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <span id="subscriptionType" style="padding: 0.5rem 1rem; background: rgba(255, 215, 0, 0.2); border-radius: 20px; color: #ffd700;">Basic Plan</span>
                        <button type="button" class="btn btn-primary" onclick="upgradePlan()">Upgrade to Premium</button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Save Changes</button>
            </form>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { 
            getAuth, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            updateProfile as updateAuthProfile
        } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            getDocs, 
            doc, 
            updateDoc,
            query,
            where,
            orderBy,
            onSnapshot,
            serverTimestamp,
            getDoc,
            setDoc
        } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';
        import { 
            getStorage, 
            ref as storageRef, 
            uploadBytes, 
            getDownloadURL 
        } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';

        // Firebase configuration
        const firebaseConfig = {
      apiKey: "AIzaSyDW8V2SjNITrA4LcdmeILh944mTbOKnM0c",
      authDomain: "rewarderhub.firebaseapp.com",
      projectId: "rewarderhub",
      storageBucket: "rewarderhub.appspot.com",
      messagingSenderId: "85965945106",
      appId: "1:85965945106:web:fa0a57d8968926e1041bcb",
      measurementId: "G-F2ERB5NGN0"
    };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        const ADMIN_EMAIL = 'bashorunidris01@gmail.com';

        let currentUser = null;
        let currentShow = null;
        let isPlaying = false;
        let isMuted = false;
        let isBroadcasting = false;
        let micEnabled = false;
        let chatEnabled = true;
        let streamTime = 0;
        let streamInterval = null;

        // Make functions global
        window.showAuthModal = showAuthModal;
        window.closeAuthModal = closeAuthModal;
        window.toggleAuthMode = toggleAuthMode;
        window.handleAuth = handleAuth;
        window.logout = logout;
        window.toggleTheme = toggleTheme;
        window.switchTab = switchTab;
        window.createShow = createShow;
        window.showLivePlayer = showLivePlayer;
        window.showStudio = showStudio;
        window.backToDashboard = backToDashboard;
        window.backToAdmin = backToAdmin;
        window.togglePlay = togglePlay;
        window.toggleMute = toggleMute;
        window.sendMessage = sendMessage;
        window.handleChatKey = handleChatKey;
        window.toggleBroadcast = toggleBroadcast;
        window.toggleMic = toggleMic;
        window.toggleChat = toggleChat;
        window.showProfile = showProfile;
        window.updateProfile = updateProfile;
        window.upgradePlan = upgradePlan;

        // Auth state listener
        onAuthStateChanged(auth, async (user) => {
            currentUser = user;
            if (user) {
                const userDoc = await getDoc(doc(db, 'users', user.uid));
                if (!userDoc.exists()) {
                    await setDoc(doc(db, 'users', user.uid), {
                        email: user.email,
                        username: user.email.split('@')[0],
                        bio: '',
                        subscriptionType: 'basic',
                        createdAt: serverTimestamp()
                    });
                }

                if (user.email === ADMIN_EMAIL) {
                    showAdminDashboard();
                } else {
                    showUserDashboard();
                }
                loadShows();
            } else {
                document.getElementById('landingPage').classList.remove('hidden');
                document.getElementById('userDashboard').classList.add('hidden');
                document.getElementById('adminDashboard').classList.add('hidden');
            }
        });

        function showAuthModal(mode) {
            document.getElementById('authModal').classList.remove('hidden');
            if (mode === 'signup') {
                document.getElementById('authTitle').textContent = 'Sign Up';
                document.getElementById('authButtonText').textContent = 'Sign Up';
                document.getElementById('signupFields').classList.remove('hidden');
                document.getElementById('authSwitchText').textContent = 'Already have an account?';
                document.getElementById('authSwitchLink').textContent = 'Sign In';
            } else {
                document.getElementById('authTitle').textContent = 'Sign In';
                document.getElementById('authButtonText').textContent = 'Sign In';
                document.getElementById('signupFields').classList.add('hidden');
                document.getElementById('authSwitchText').textContent = "Don't have an account?";
                document.getElementById('authSwitchLink').textContent = 'Sign Up';
            }
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.add('hidden');
            document.getElementById('authForm').reset();
        }

        function toggleAuthMode(e) {
            e.preventDefault();
            const title = document.getElementById('authTitle').textContent;
            showAuthModal(title === 'Sign In' ? 'signup' : 'signin');
        }

        async function handleAuth(e) {
            e.preventDefault();
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            const mode = document.getElementById('authTitle').textContent;

            try {
                if (mode === 'Sign Up') {
                    const username = document.getElementById('authUsername').value;
                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                    await updateAuthProfile(userCredential.user, { displayName: username });
                    alert('Account created successfully!');
                } else {
                    await signInWithEmailAndPassword(auth, email, password);
                }
                closeAuthModal();
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        async function logout() {
            await signOut(auth);
            location.reload();
        }

        function toggleTheme() {
            document.body.classList.toggle('dark');
            document.body.classList.toggle('light');
        }

        function showUserDashboard() {
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('userDashboard').classList.remove('hidden');
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('userName').textContent = currentUser.displayName || currentUser.email.split('@')[0];
            document.getElementById('userEmail').textContent = currentUser.email;
            document.getElementById('userAvatar').textContent = currentUser.email[0].toUpperCase();
        }

        function showAdminDashboard() {
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('userDashboard').classList.add('hidden');
            document.getElementById('adminDashboard').classList.remove('hidden');
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tab === 'scheduled') {
                document.getElementById('scheduledTab').classList.remove('hidden');
                document.getElementById('liveTab').classList.add('hidden');
            } else {
                document.getElementById('scheduledTab').classList.add('hidden');
                document.getElementById('liveTab').classList.remove('hidden');
            }
        }

        async function createShow(e) {
            e.preventDefault();
            
            const showData = {
                title: document.getElementById('showTitle').value,
                host: document.getElementById('showHost').value,
                description: document.getElementById('showDescription').value,
                dateTime: new Date(document.getElementById('showDateTime').value),
                duration: parseInt(document.getElementById('showDuration').value),
                sponsor: document.getElementById('showSponsor').value,
                status: 'scheduled',
                createdBy: currentUser.uid,
                createdAt: serverTimestamp(),
                imageUrl: 'https://via.placeholder.com/400x200?text=Radio+Show'
            };

            try {
                await addDoc(collection(db, 'schedules'), showData);
                alert('Show created successfully!');
                document.getElementById('createShowForm').reset();
                loadShows();
            } catch (error) {
                alert('Error creating show: ' + error.message);
            }
        }

        async function loadShows() {
            const schedulesQuery = query(collection(db, 'schedules'), orderBy('dateTime', 'asc'));
            
            onSnapshot(schedulesQuery, (snapshot) => {
                const scheduled = [];
                const live = [];
                
                snapshot.forEach((doc) => {
                    const data = { id: doc.id, ...doc.data() };
                    if (data.status === 'live') {
                        live.push(data);
                    } else {
                        scheduled.push(data);
                    }
                });

                renderShows('scheduledTab', scheduled, false);
                renderShows('liveTab', live, true);
                renderShows('adminShowsList', [...live, ...scheduled], false, true);
            });
        }

        function renderShows(containerId, shows, isLive, isAdmin = false) {
            const container = document.getElementById(containerId);
            if (!container) return;

            if (shows.length === 0) {
                container.innerHTML = `<p style="text-align: center; color: #aaa; grid-column: 1/-1;">No ${isLive ? 'live' : 'scheduled'} shows at the moment.</p>`;
                return;
            }

            container.innerHTML = shows.map(show => `
                <div class="card" onclick="${isAdmin ? `showStudio('${show.id}')` : `showLivePlayer('${show.id}')`}">
                    <div class="card-image">
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#ffd700" stroke-width="2">
                            <circle cx="12" cy="12" r="2"/>
                            <path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49"/>
                        </svg>
                        ${show.status === 'live' ? '<div class="live-badge">üî¥ LIVE</div>' : ''}
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${show.title}</h3>
                        <p style="color: #aaa; margin: 0.5rem 0;">${show.description.substring(0, 100)}...</p>
                        <div class="card-meta">
                            <span>üë§ ${show.host}</span>
                            <span>‚è±Ô∏è ${show.duration}min</span>
                        </div>
                        ${!isLive ? `<div style="margin-top: 1rem; color: #aaa; font-size: 0.9rem;">üìÖ ${new Date(show.dateTime.seconds * 1000).toLocaleString()}</div>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function showLivePlayer(showId) {
            const show = findShowById(showId);
            if (!show) return;

            currentShow = show;
            document.getElementById('userDashboard').classList.add('hidden');
            document.getElementById('livePlayerPage').classList.remove('hidden');
            document.getElementById('liveShowTitle').textContent = show.title;
            document.getElementById('liveShowHost').textContent = `Hosted by ${show.host}`;
            
            startStreamTimer();
            simulateListeners();
        }

        function showStudio(showId) {
            const show = findShowById(showId);
            if (!show) return;

            currentShow = show;
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('studioPage').classList.remove('hidden');
            document.getElementById('studioShowTitle').textContent = show.title;
            updateStudioStatus();
        }

        function findShowById(id) {
            // In real app, fetch from Firebase
            return { id, title: 'Sample Show', host: 'DJ Flash', status: 'live' };
        }

        function backToDashboard() {
            document.getElementById('livePlayerPage').classList.add('hidden');
            document.getElementById('profilePage').classList.add('hidden');
            document.getElementById('userDashboard').classList.remove('hidden');
            stopStreamTimer();
        }

        function backToAdmin() {
            document.getElementById('studioPage').classList.add('hidden');
            document.getElementById('adminDashboard').classList.remove('hidden');
            if (isBroadcasting) {
                toggleBroadcast();
            }
        }

        function togglePlay() {
            isPlaying = !isPlaying;
            const playButton = document.getElementById('playButton');
            playButton.innerHTML = isPlaying ? 
                '<svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>' :
                '<svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>';
        }

        function toggleMute() {
            isMuted = !isMuted;
            const volumeIcon = document.getElementById('volumeIcon');
            volumeIcon.innerHTML = isMuted ?
                '<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/>' :
                '<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>';
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.innerHTML = `
                <div class="message-sender">${currentUser.displayName || 'You'}</div>
                <div>${message}</div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            input.value = '';

            // Also send to studio if broadcasting
            const studioChat = document.getElementById('studioChatMessages');
            if (studioChat) {
                const studioMsg = messageDiv.cloneNode(true);
                studioChat.appendChild(studioMsg);
                studioChat.scrollTop = studioChat.scrollHeight;
            }
        }

        function handleChatKey(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        }

        async function toggleBroadcast() {
            isBroadcasting = !isBroadcasting;
            const button = document.getElementById('broadcastButton');
            const status = document.getElementById('studioStatus');
            const statusText = document.getElementById('studioStatusText');

            if (isBroadcasting) {
                button.textContent = 'End Broadcast';
                button.style.background = '#ff4444';
                status.classList.remove('status-offline');
                status.classList.add('status-live');
                statusText.textContent = 'üî¥ LIVE';
                
                // Update show status in database
                if (currentShow) {
                    await updateDoc(doc(db, 'schedules', currentShow.id), {
                        status: 'live'
                    });
                }
            } else {
                button.textContent = 'Start Live';
                button.style.background = '#ffd700';
                status.classList.remove('status-live');
                status.classList.add('status-offline');
                statusText.textContent = 'Ready to Broadcast';
                
                if (currentShow) {
                    await updateDoc(doc(db, 'schedules', currentShow.id), {
                        status: 'ended'
                    });
                }
            }
        }

        function toggleMic() {
            micEnabled = !micEnabled;
            document.getElementById('micStatus').textContent = micEnabled ? 'Active' : 'Muted';
            document.getElementById('micButton').style.background = micEnabled ? 
                'rgba(255, 215, 0, 0.3)' : 'rgba(255, 215, 0, 0.1)';
        }

        function toggleChat() {
            chatEnabled = document.getElementById('chatToggle').checked;
            document.getElementById('chatStatus').textContent = chatEnabled ? 'Enabled' : 'Disabled';
        }

        function updateStudioStatus() {
            const status = document.getElementById('studioStatus');
            status.classList.add('status-offline');
        }

        function startStreamTimer() {
            streamTime = 0;
            streamInterval = setInterval(() => {
                streamTime++;
                const minutes = Math.floor(streamTime / 60);
                const seconds = streamTime % 60;
                document.getElementById('streamTime').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function stopStreamTimer() {
            if (streamInterval) {
                clearInterval(streamInterval);
                streamInterval = null;
            }
        }

        function simulateListeners() {
            setInterval(() => {
                const count = Math.floor(Math.random() * 50) + 10;
                document.getElementById('listenerCount').textContent = count;
                if (document.getElementById('studioListenerCount')) {
                    document.getElementById('studioListenerCount').textContent = count;
                }
            }, 5000);
        }

        async function showProfile() {
            document.getElementById('userDashboard').classList.add('hidden');
            document.getElementById('profilePage').classList.remove('hidden');
            
            const userDoc = await getDoc(doc(db, 'users', currentUser.uid));
            const userData = userDoc.data();
            
            document.getElementById('profileUsername').value = userData.username || '';
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profileBio').value = userData.bio || '';
            document.getElementById('profileAvatar').textContent = currentUser.email[0].toUpperCase();
            document.getElementById('subscriptionType').textContent = 
                userData.subscriptionType === 'premium' ? 'Premium Plan üëë' : 'Basic Plan';
        }

        async function updateProfile(e) {
            e.preventDefault();
            const username = document.getElementById('profileUsername').value;
            const bio = document.getElementById('profileBio').value;

            try {
                await updateDoc(doc(db, 'users', currentUser.uid), {
                    username,
                    bio
                });
                await updateAuthProfile(currentUser, { displayName: username });
                alert('Profile updated successfully!');
            } catch (error) {
                alert('Error updating profile: ' + error.message);
            }
        }

        function upgradePlan() {
            alert('Premium subscription coming soon! Features include:\n\n‚úì Priority call-in access\n‚úì Early access to recorded sessions\n‚úì Behind-the-scenes content\n‚úì Ad-free experience\n\nStay tuned!');
        }

        // File input handler
        document.addEventListener('DOMContentLoaded', () => {
            const fileInput = document.getElementById('showImage');
            if (fileInput) {
                fileInput.addEventListener('change', (e) => {
                    const fileName = e.target.files[0]?.name;
                    if (fileName) {
                        document.getElementById('fileName').textContent = fileName;
                    }
                });
            }
        });
    </script>
</body>
                </html>
