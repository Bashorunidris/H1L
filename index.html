<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rewarder - Monetized Talent Competition</title>
    <style>
    :root {
        --primary-color: #6c5ce7;
        --primary-dark: #5549c0;
        --secondary-color: #fd79a8;
        --text-color: #2d3436;
        --light-text: #636e72;
        --background-color:  #1a1a2e;
        --white: #ffffff;
        --error-color: #e74c3c;
        --success-color: #2ecc71;
        --border-color: #dfe6e9;
        --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    }
    
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        line-height: 1.6;
    }
    
    .container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
         background-color: #1a1a2e;
    }
    
    .split-screen {
        display: flex;
        background-color: #1a1a2e;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: var(--box-shadow);
        width: 100%;
        max-width: 1200px;
        min-height: 600px;
    }
    
    /* Left side styling */
    .left {
        flex: 1;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: var(--white);
        padding: 60px 40px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        position: relative;
        overflow: hidden;
    }
    
    .left::before {
        content: '';
        position: absolute;
        top: -50px;
        right: -50px;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
    }
    
    .left::after {
        content: '';
        position: absolute;
        bottom: -80px;
        left: -80px;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
    }
    
    .logo h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 10px;
        letter-spacing: 1px;
    }
    
    .tagline {
        margin-top: 60px;
        z-index: 1;
    }
    
    .tagline h2 {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 15px;
    }
    
    .tagline p {
        font-size: 1.1rem;
        opacity: 0.9;
    }
    
    .features {
        margin-top: 60px;
        z-index: 1;
    }
    
    .feature {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
    }
    
    .feature i {
        font-size: 1.2rem;
        margin-right: 15px;
        background: rgba(255, 255, 255, 0.2);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .feature span {
        font-size: 1rem;
    }
    
    /* Right side styling */
    .right {
        flex: 1;
        padding: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .auth-container {
        width: 100%;
        max-width: 1200px;
        transition: all 0.3s ease;
        background-color: #1a1a2e;
    }
    
    .auth-container.hidden {
        display: none;
    }
    
    .auth-container h2 {
        font-size: 1.8rem;
        font-weight: 600;
        margin-bottom: 10px;
        color: var(--text-color);
        
    }
    
    .auth-container > p {
        color: var(--light-text);
        margin-bottom: 30px;
    }
    
    .social-login {
        margin-bottom: 25px;
    }
    
    .social-btn {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    
    .social-btn img {
        width: 20px;
        height: 20px;
        margin-right: 10px;
    }
    
    .social-btn span {
        font-size: 1rem;
        color: var(--text-color);
        font-weight: 500;
    }
    .divider {
        display: flex;
        align-items: center;
        margin: 25px 0;
    }
    
    .divider::before,
    .divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background-color: var(--border-color);
    }
    
    .divider span {
        padding: 0 15px;
        color: var(--light-text);
        font-size: 0.9rem;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        font-size: 0.9rem;
    }
    
    .form-group input,
    .form-group select {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s ease;
    }
    
    .form-group input:focus,
    .form-group select:focus {
        border-color: var(--primary-color);
        outline: none;
    }
    
    .password-input {
        position: relative;
    }
    
    .toggle-password {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        color: var(--light-text);
    }
    
    .password-strength {
        margin-top: 10px;
    }
    
    .strength-meter {
        display: flex;
        gap: 5px;
        margin-bottom: 5px;
    }
    
    .strength-segment {
        height: 4px;
        flex: 1;
        background-color: #ddd;
        border-radius: 2px;
    }
    
    .strength-segment.weak {
        background-color: var(--error-color);
    }
    
    .strength-segment.medium {
        background-color: #f39c12;
    }
    
    .strength-segment.strong {
        background-color: var(--success-color);
    }
    
    .strength-text {
        font-size: 0.8rem;
        color: var(--light-text);
    }
    
    .form-options {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        font-size: 0.9rem;
    }
    
    .remember-me,
    .terms {
        display: flex;
        align-items: center;
    }
    
    .remember-me input,
    .terms input {
        margin-right: 8px;
    }
    
    .forgot-password,
    .terms a {
        color: var(--primary-color);
        text-decoration: none;
    }
    
    .forgot-password:hover,
    .terms a:hover {
        text-decoration: underline;
    }
    
    .auth-btn {
        width: 100%;
        padding: 14px;
        background-color: var(--primary-color);
        color: var(--white);
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .auth-btn:hover {
        background-color: var(--primary-dark);
    }
    
    .auth-switch {
        text-align: center;
        margin-top: 25px;
        font-size: 0.9rem;
    }
    
    .auth-switch a {
        color: var(--primary-color);
        text-decoration: none;
        font-weight: 500;
    }
    
    .auth-switch a:hover {
        text-decoration: underline;
    }
    
    /* Error message styling */
    .error-message {
        color: var(--error-color);
        font-size: 0.85rem;
        margin-top: 5px;
        display: none;
    }
    
    .error-message.visible {
        display: block;
    }
    
    /* Success message styling */
    .success-message {
        color: var(--success-color);
        font-size: 0.85rem;
        margin-top: 5px;
        display: none;
    }
    
    .success-message.visible {
        display: block;
    }
    
    /* Loading indicator */
    .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: var(--white);
        animation: spin 0.8s linear infinite;
        margin-left: 10px;
    }
    
    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }
    
    .auth-btn.loading {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* Toast notification */
    .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 8px;
        color: var(--white);
        font-size: 0.9rem;
        max-width: 300px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        opacity: 0;
        transform: translateY(-20px);
        transition: all 0.3s ease;
    }
    
    .toast.success {
        background-color: var(--success-color);
    }
    
    .toast.error {
        background-color: var(--error-color);
    }
    
    .toast.visible {
        opacity: 1;
        transform: translateY(0);
    }
    
    /* Responsive styles */
    @media (max-width: 992px) {
        .split-screen {
            flex-direction: column;
            max-width: 600px;
        }
        
        .left {
            padding: 40px 30px;
            min-height: 300px;
        }
        
        .tagline {
            margin-top: 30px;
        }
        
        .features {
            margin-top: 30px;
        }
        
        .right {
            padding: 30px;
        }
    }
    
    @media (max-width: 768px) {
        .container {
            padding: 10px;
        }
        
        .split-screen {
            border-radius: 15px;
        }
        
        .left {
            padding: 30px 20px;
            min-height: 250px;
        }
        
        .logo h1 {
            font-size: 2rem;
        }
        
        .tagline h2 {
            font-size: 1.5rem;
        }
        
        .tagline p {
            font-size: 1rem;
        }
        
        .feature i {
            width: 35px;
            height: 35px;
            font-size: 1rem;
        }
        
        .feature span {
            font-size: 0.9rem;
        }
        
        .auth-container h2 {
            font-size: 1.5rem;
        }
    }
    
    @media (max-width: 480px) {
        .split-screen {
            border-radius: 10px;
        }
        
        .left {
            padding: 25px 15px;
            min-height: 200px;
        }
        
        .logo h1 {
            font-size: 1.8rem;
        }
        
        .tagline {
            margin-top: 20px;
        }
        
        .tagline h2 {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }
        
        .tagline p {
            font-size: 0.9rem;
        }
        
        .features {
            margin-top: 20px;
        }
        
        .feature {
            margin-bottom: 15px;
        }
        
        .feature i {
            width: 30px;
            height: 30px;
            font-size: 0.9rem;
            margin-right: 10px;
        }
        
        .feature span {
            font-size: 0.85rem;
        }
        
        .right {
            padding: 25px 15px;
        }
        
        .auth-container h2 {
            font-size: 1.4rem;
        }
        
        .auth-container > p {
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            font-size: 0.85rem;
        }
        
        .form-group input,
        .form-group select {
            padding: 10px 12px;
            font-size: 0.9rem;
        }
        
        .form-options {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
        
        .auth-btn {
            padding: 12px;
        }
        
        .social-btn span {
            font-size: 0.9rem;
        }
        
        .divider span {
            font-size: 0.8rem;
        }
    }
    
    /* iOS specific adjustments */
    @supports (-webkit-touch-callout: none) {
        input, select {
            font-size: 16px !important; /* Prevents zoom on focus in iOS */
        }
        
        .form-group input,
        .form-group select {
            -webkit-appearance: none; /* Removes default styling */
            border-radius: 8px;
        }
        
        .auth-btn {
            -webkit-appearance: none;
        }
    }
    
    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
        :root {
            --background-color: #1a1a2e;
            --text-color: #e6e6e6;
            --light-text: #a7a7a7;
            --white:#1a1a2e:
            --border-color: #393954;
        }
        
        .social-btn {
            background-color: #2a2a42;
            border-color: #393954;
        }
        
        .social-btn:hover {
            background-color: #33334d;
        }
        
        .strength-segment {
            background-color: #444;
        }
        
        .form-group input,
        .form-group select {
            background-color: #2a2a42;
            color: var(--text-color);
        }
        
        .form-group input::placeholder,
        .form-group select::placeholder {
            color: #777;
        }
    }
    
    /* Animations */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .auth-container {
        animation: fadeIn 0.5s ease forwards;
    }
    
    /* Accessibility improvements */
    .auth-btn:focus,
    .social-btn:focus,
    input:focus,
    select:focus {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
    }

    /* Dashboard Styles - Fixed for vertical overflow issues */
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow-x: hidden;
    position: relative;
}

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    line-height: 1.6;
}

.dashboard-page {
    display: none;
    flex-direction: column;
    height: 100vh; /* Use viewport height instead of min-height */
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
    position: fixed; /* Fix the position to prevent page movement */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--background-color);
}

.dashboard-page.active {
    display: flex;
}


/* Dashboard Navigation Container */
.dashboard-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 20px;
    background-color: var(--bg-light);
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
    position: sticky;
    top: 0;
    z-index: 100;
    width: 100%;
    transition: all 0.3s ease;
}

/* User info section */
.user-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.profile-circle {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    background-color: var(--primary-light);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
}

.user-profile-image {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.username {
    font-weight: 600;
    color: var(--text-dark);
    font-size: 0.95rem;
}

/* Navigation buttons container */
.dashboard-nav > div:not(.user-info):not(.hamburger-menu) {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Trophy button with improved shining animation */
.trophy-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: var(--secondary-color);
    color: var(--white);
    padding: 8px 16px;
    border-radius: var(--border-radius);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px var(--shadow-color-secondary);
    position: relative;
    overflow: hidden;
}

/* Trophy icon container */
.trophy-btn i {
    font-size: 1rem;
    position: relative;
    display: inline-block;
    z-index: 2;
    color: var(--white);
}

/* Shining effect - outer glow */
.trophy-btn i::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 215, 0, 0.8) 0%, transparent 70%);
    animation: trophy-glow 3s infinite;
    z-index: -1;
    pointer-events: none;
}

/* Shining effect - sparkle */
.trophy-btn::before {
    content: 'âœ¨';
    position: absolute;
    font-size: 0.8rem;
    top: 0;
    right: 30%;
    opacity: 0;
    z-index: 3;
    animation: trophy-sparkle 4s infinite;
    pointer-events: none;
}

.trophy-btn::after {
    content: 'âœ¨';
    position: absolute;
    font-size: 0.6rem;
    bottom: 5%;
    left: 30%;
    opacity: 0;
    z-index: 3;
    animation: trophy-sparkle 4s infinite 1s;
    pointer-events: none;
}

/* Shine sweep effect */
.trophy-btn .shine-sweep {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.4) 50%,
        transparent 100%
    );
    z-index: 1;
    transform: translateX(-100%);
    animation: shine-sweep 3s infinite;
    pointer-events: none;
}

/* Add this div to your HTML right after the icon */
/* <div class="shine-sweep"></div> */

@keyframes trophy-glow {
    0%, 100% {
        opacity: 0;
        transform: scale(0.5);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.2);
    }
}

@keyframes trophy-sparkle {
    0%, 100% {
        opacity: 0;
        transform: translateY(0) scale(0.8);
    }
    50% {
        opacity: 1;
        transform: translateY(-5px) scale(1);
    }
}

@keyframes shine-sweep {
    0% {
        transform: translateX(-100%);
    }
    100% {
        transform: translateX(100%);
    }
}


/* Wallet button */
.wallet1-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: var(--primary-color);
    color: var(--white);
    padding: 8px 16px;
    border-radius: var(--border-radius);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px var(--shadow-color);
    position: relative;
    overflow: hidden;
}

.wallet1-btn i {
    font-size: 1rem;
    position: relative;
}

/* Coin entering wallet animation */
.walleticon-btn::before {
    content: 'ðŸª™';
    position: absolute;
    font-size: 0.8rem;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    animation: coin-drop 3s infinite;
}

.walleticon::after {
    content: 'ðŸ’°';
    position: absolute;
    font-size: 0.8rem;
    top: -20px;
    left: 30%;
    transform: translateX(-50%);
    opacity: 0;
    animation: coin-drop 3s infinite 1s;
}

@keyframes coin-drop {
    0% {
        top: -20px;
        opacity: 0;
        transform: translateX(-50%) scale(0.5);
    }
    20% {
        opacity: 1;
        transform: translateX(-50%) scale(1);
    }
    80% {
        opacity: 1;
        transform: translateX(-50%) scale(1);
    }
    100% {
        top: 50%;
        opacity: 0;
        transform: translateX(-50%) scale(0.5);
    }
}

.wallet1-btn span {
    font-size: 0.9rem;
    font-weight: 500;
}

/* Hamburger menu */
.hamburger-menu {
    display: none;
    width: 40px;
    height: 40px;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 50%;
    transition: all 0.3s ease;
}

.hamburger-menu i {
    font-size: 1.2rem;
    color: var(--text-dark);
}

.hamburger-menu:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

/* Hover effects */
.trophy-btn:hover, .wallet1-btn:hover {
    transform: translateY(-3px);
}

.trophy-btn:hover {
    box-shadow: 0 6px 15px var(--shadow-color-secondary);
    background-color: var(--secondary-light);
}

.wallet1-btn:hover {
    box-shadow: 0 6px 15px var(--shadow-color);
    background-color: var(--primary-light);
}

/* Active state */
.trophy-btn:active, .wallet1-btn:active {
    transform: translateY(1px);
}

.trophy-btn:active {
    box-shadow: 0 2px 5px var(--shadow-color-secondary);
    background-color: var(--secondary-dark);
}

.wallet1-btn:active {
    box-shadow: 0 2px 5px var(--shadow-color);
    background-color: var(--primary-dark);
}

/* Responsive styles */
@media (max-width: 768px) {
    .dashboard-nav {
        padding: 10px 15px;
    }
    
    .username {
        max-width: 100px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .trophy-btn, .wallet1-btn {
        padding: 6px 12px;
    }
    
    .trophy-btn span, .wallet1-btn span {
        font-size: 0.8rem;
    }
}

@media (max-width: 576px) {
    .hamburger-menu {
        display: flex;
    }
    
    .trophy-btn, .wallet1-btn {
        display: none;
    }
    
    .dashboard-nav.expanded .trophy-btn,
    .dashboard-nav.expanded .wallet1-btn {
        display: flex;
    }
    
    .dashboard-nav.expanded {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .dashboard-nav.expanded .user-info {
        margin-bottom: 15px;
        width: 100%;
        justify-content: space-between;
    }
    
    .dashboard-nav.expanded > div:not(.user-info):not(.hamburger-menu) {
        flex-direction: column;
        width: 100%;
        gap: 10px;
    }
    
    .dashboard-nav.expanded .trophy-btn,
    .dashboard-nav.expanded .wallet1-btn {
        width: 100%;
        justify-content: flex-start;
    }
}

@media (max-width: 400px) {
    .profile-circle {
        width: 35px;
        height: 35px;
    }
    
    .username {
        max-width: 80px;
        font-size: 0.85rem;
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    .dashboard-nav {
        background-color: var(--text-dark);
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.2);
    }
    
    .username {
        color: var(--text-light);
    }
    
    .hamburger-menu i {
        color: var(--text-light);
    }
    
    .hamburger-menu:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
    .trophy-btn i::before,
    .trophy-btn i::after,
    .wallet1-btn::before,
    .wallet1-btn::after {
        animation: none !important;
    }
    
    .trophy-btn:hover,
    .wallet1-btn:hover {
        transform: none;
    }
}

/* JavaScript helper for mobile menu toggle */
.dashboard-nav.expanded {
    height: auto;
    padding-bottom: 15px;
}

/* Accessibility focus styles */
.trophy-btn:focus-visible,
.wallet1-btn:focus-visible,
.hamburger-menu:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* RTL language support */
[dir="rtl"] .user-info,
[dir="rtl"] .dashboard-nav > div:not(.user-info):not(.hamburger-menu) {
    flex-direction: row-reverse;
}

/* Animation for new notifications */
@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

.trophy-btn.has-notification,
.wallet1-btn.has-notification {
    position: relative;
}

.trophy-btn.has-notification::before,
.wallet1-btn.has-notification::before {
    content: '';
    position: absolute;
    top: -3px;
    right: -3px;
    width: 10px;
    height: 10px;
    background-color: #ff3838;
    border-radius: 50%;
    animation: pulse 1.5s infinite;
}

/* Tablet optimization */
@media (min-width: 768px) and (max-width: 1024px) {
    .dashboard-nav {
        padding: 12px 25px;
    }
}

/* Support for ultra-wide screens */
@media (min-width: 1400px) {
    .dashboard-nav {
        max-width: 1400px;
        margin: 0 auto;
        border-radius: 0 0 10px 10px;
    }
}

/* Fix for iOS Safari */
@supports (-webkit-touch-callout: none) {
    .dashboard-nav {
        -webkit-transform: translateZ(0);
    }
}

/* Fix for sticky hover on mobile */
@media (hover: none) {
    .trophy-btn:hover,
    .wallet1-btn:hover,
    .hamburger-menu:hover {
        transform: none;
        box-shadow: 0 4px 10px var(--shadow-color);
    }
    
    .trophy-btn:hover {
        background-color: var(--secondary-color);
    }
    
    .wallet1-btn:hover {
        background-color: var(--primary-color);
    }
}


/* Main Dashboard Container */
.dashboard-container {
    flex: 1;
    padding: 15px;
    width: 100%;
    overflow-y: auto; /* Allow vertical scrolling within container */
    -webkit-overflow-scrolling: touch;
      background-color: rgba(0, 0, 0, 0.05);
}
/* Media Banner Styles */
.media-banner-container {
    width: 100%;
    height: 70px;
    overflow: hidden;
    position: relative;
    background: #000;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.media-banner-track {
    display: flex;
    height: 100%;
    animation: autoScroll 20s linear infinite;
    gap: 10px;
}

.media-item {
    flex-shrink: 0;
    width: 480px;
    height: 70px;
    position: relative;
    border-radius: 6px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.media-item:hover {
    transform: scale(1.05);
    z-index: 10;
}

/* Video Styles */
.video-item video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 6px;
}

/* Image Styles */
.image-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 6px;
}

/* Media Overlay */
.media-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    padding: 8px 12px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.media-item:hover .media-overlay {
    opacity: 1;
}

.media-title {
    color: white;
    font-size: 12px;
    font-weight: 500;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}

/* Auto Scroll Animation */
@keyframes autoScroll {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-50%);
    }
}

/* Pause animation on hover */
.media-banner-container:hover .media-banner-track {
    animation-play-state: paused;
}

/* Responsive Design */
@media (max-width: 768px) {
    .media-item {
        width: 300px;
    }
}

@media (max-width: 480px) {
    .media-item {
        width: 250px;
    }
    
    .media-banner-container {
        height: 60px;
    }
    
    .media-item {
        height: 60px;
    }
}

/* Loading placeholder */
.media-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
    z-index: -1;
}

@keyframes loading {
    0% {
        background-position: 200% 0;
    }
    100% {
        background-position: -200% 0;
    }
}

/* Play/Pause indicator for videos */
.video-item::after {
    content: 'â–¶';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 16px;
    opacity: 0.7;
    pointer-events: none;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

/* Action Buttons - Single Row */
.action-buttons-row {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin-top: 15px;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
    padding-bottom: 5px;
    flex-shrink: 0; /* Prevent shrinking */
}

.action-buttons-row::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

.action-btn {
    width:50Px;
    height: 100px;
    background-color: var(--white);
    border-radius: 12px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
    min-width: 70px;
    flex: 1;
}

.action-btn:active {
    transform: scale(0.95);
}

.action-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
}

/* Spinning animation for spin icon */
.spin-icon {
    position: relative;
    overflow: hidden;
}

.spin-icon i {
    animation: spin 5s linear infinite;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

.spin-icon::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 50%;
    border: 2px dashed var(--success-color);
    animation: spin-reverse 10s linear infinite;
}

@keyframes spin-reverse {
    0% {
        transform: rotate(360deg);
    }
    100% {
        transform: rotate(0deg);
    }
}


.creator-btn .action-icon {
    background-color: rgba(253, 121, 168, 0.1);
    color: var(--secondary-color);
}

.spin-btn .action-icon {
    background-color: rgba(46, 204, 113, 0.1);
    color: var(--success-color);
}

.Liveevents-btn .action-icon {
    background-color: rgba(46, 204, 113, 0.1);
    color: var(--success-color);
}


.notification-btn .action-icon {
    background-color: rgba(241, 196, 15, 0.1);
    color: #f1c40f;
}

.action-btn span {
    font-weight: 500;
    font-size: 0.8rem;
    color: #333;
    text-align: center;
    white-space: nowrap;
}

/* Fix for page transition */
.container {
    position: relative;
}

.split-screen.hidden {
    display: none;
}



.action-btn.Game-btn:active {
  transform: translateY(1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}


.action-icon.game-icon {
   width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
}

.action-icon.game-icon i {
  color: #c23737;
  font-size: 20px;
 
}

.action-btn.Game-btn span {
  color: #333;
  font-size: 14px;
  font-weight: 500;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}



@keyframes gamepadWiggle {
  0% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(-15deg);
  }
  50% {
    transform: rotate(15deg);
  }
  75% {
    transform: rotate(-15deg);
  }
  100% {
    transform: rotate(0deg);
  }
}


/* Responsive adjustments */
@media (max-width: 768px) {
  .action-btn.Game-btn {
    padding: 10px 12px;
  }
  
  .action-icon.game-icon {
    width: 35px;
    height: 35px;
  }
  
  .action-icon.game-icon i {
    font-size: 18px;
  }
  
  .action-btn.Game-btn span {
    font-size: 12px;
  }
}

@media (max-width: 480px) {
  .action-btn.Game-btn {
    padding: 8px 10px;
  }
  
  .action-icon.game-icon {
    width: 30px;
    height: 30px;
    margin-bottom: 5px;
  }
  
  .action-icon.game-icon i {
    font-size: 16px;
  }
  
  .action-btn.Game-btn span {
    font-size: 11px;
  }
}





/* Rewarder Button Styles */
.action-btn.rewarder-btn {
    width: 50px;
    height: 100px;
    background-color: var(--white);
    border-radius: 12px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
    min-width: 70px;
    flex: 1;
    position: relative;
    overflow: hidden;

}

.action-btn.rewarder-btn:active {
    transform: scale(0.95);
}


.action-icon.rewarder {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    background-color: rgba(142, 68, 173, 0.1);
    color: #8e44ad;
    position: relative;
    z-index: 1;
}

/* Diamond icon animation */
.action-icon.rewarder i {
    animation: diamond-pulse 3s infinite;
    position: relative;
}

/* Diamond sparkle effect */
.action-icon.rewarder::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 2px dashed #8e44ad;
    animation: spin-reverse 10s linear infinite;
}

/* Diamond glow effect */
.action-icon.rewarder::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(142, 68, 173, 0.4) 0%, transparent 70%);
    animation: glow-pulse 2s infinite;
}

/* Sparkle points around the diamond */
.action-icon.rewarder i::before {
    content: "\f3a5"; /* fa-gem code */
    position: relative;
    z-index: 2;
}

.action-icon.rewarder i::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(
        circle at 30% 30%,
        rgba(255, 255, 255, 0.8) 0%,
        rgba(255, 255, 255, 0) 20%
    ), radial-gradient(
        circle at 70% 20%,
        rgba(255, 255, 255, 0.8) 0%,
        rgba(255, 255, 255, 0) 20%
    ), radial-gradient(
        circle at 90% 60%,
        rgba(255, 255, 255, 0.8) 0%,
        rgba(255, 255, 255, 0) 20%
    ), radial-gradient(
        circle at 40% 80%,
        rgba(255, 255, 255, 0.8) 0%,
        rgba(255, 255, 255, 0) 20%
    );
    animation: sparkle-twinkle 3s infinite;
    z-index: 1;
}

.action-btn.rewarder-btn span {
    font-weight: 500;
    font-size: 0.8rem;
    color: #333;
    text-align: center;
    white-space: nowrap;
    position: relative;
    z-index: 1;
}

/* Fix for FontAwesome diamond icon */
.fas.fa-Diamond::before {
    content: "\f3a5"; /* This is the content code for fa-gem which looks like a diamond */
}

/* Animations */
@keyframes diamond-pulse {
    0% {
        transform: scale(1);
        color: #8e44ad;
    }
    50% {
        transform: scale(1.2);
        color: #9b59b6;
    }
    100% {
        transform: scale(1);
        color: #8e44ad;
    }
}

@keyframes spin-reverse {
    0% {
        transform: rotate(360deg);
    }
    100% {
        transform: rotate(0deg);
    }
}

@keyframes glow-pulse {
    0% {
        opacity: 0.3;
    }
    50% {
        opacity: 0.7;
    }
    100% {
        opacity: 0.3;
    }
}


@keyframes sparkle-twinkle {
    0%, 100% {
        opacity: 0.2;
    }
    50% {
        opacity: 1;
    }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .action-btn.rewarder-btn {
        padding: 10px 12px;
    }
    
    .action-icon.rewarder {
        width: 35px;
        height: 35px;
    }
    
    .action-icon.rewarder i {
        font-size: 18px;
    }
    
    .action-btn.rewarder-btn span {
        font-size: 12px;
    }
}

@media (max-width: 480px) {
    .action-btn.rewarder-btn {
        padding: 8px 10px;
    }
    
    .action-icon.rewarder {
        width: 30px;
        height: 30px;
        margin-bottom: 5px;
    }
    
    .action-icon.rewarder i {
        font-size: 16px;
    }
    
    .action-btn.rewarder-btn span {
        font-size: 11px;
    }
}


/* Wallet icon with subtle bounce animation */
.action-btn.wallet-btn .action-icon i {
    position: relative;
    z-index: 2;
    animation: wallet-bounce 3s ease-in-out infinite;
}

/* Coin animations */
.action-btn.wallet-btn .action-icon::before,
.action-btn.wallet-btn .action-icon::after {
    content: '';
    position: absolute;
    width: 12px;
    height: 12px;
    background-color: #f1c40f;
    border-radius: 50%;
    border: 1px solid #e67e22;
    z-index: 1;
    opacity: 0;
}

/* First coin animation */
.action-btn.wallet-btn .action-icon::before {
    top: -30px;
    left: 10px;
    animation: coin-drop-1 4s infinite;
}

/* Second coin animation */
.action-btn.wallet-btn .action-icon::after {
    top: -30px;
    right: 10px;
    animation: coin-drop-2 4s infinite 1s;
}

/* Wallet opening effect */
.action-btn.wallet-btn::before {
    content: '';
    position: absolute;
    width: 30px;
    height: 3px;
    background-color: rgba(108, 92, 231, 0.3);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border-radius: 3px;
    z-index: 1;
    animation: wallet-open 4s infinite;
}

/* Coin pile inside wallet */
.action-btn.wallet-btn::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 6px;
    background: radial-gradient(circle, #f1c40f 30%, #e67e22 100%);
    border-radius: 50%;
    top: 55%;
    left: 50%;
    transform: translate(-50%, -50%) scaleY(0.3);
    z-index: 1;
    opacity: 0;
    animation: coin-pile-grow 4s infinite;
}

.action-btn.wallet-btn span {
    font-weight: 500;
    font-size: 0.8rem;
    color: var(--text-color);
    text-align: center;
    white-space: nowrap;
    position: relative;
    z-index: 2;
}

/* Animations */
@keyframes wallet-bounce {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-2px);
    }
}

@keyframes coin-drop-1 {
    0%, 100% {
        top: -30px;
        opacity: 0;
    }
    20% {
        opacity: 1;
        top: -20px;
    }
    40% {
        top: 10px;
        opacity: 1;
    }
    45% {
        top: 8px;
        opacity: 1;
    }
    50% {
        top: 10px;
        opacity: 0;
    }
}

@keyframes coin-drop-2 {
    0%, 100% {
        top: -30px;
        opacity: 0;
    }
    20% {
        opacity: 1;
        top: -20px;
    }
    40% {
        top: 10px;
        opacity: 1;
    }
    45% {
        top: 8px;
        opacity: 1;
    }
    50% {
        top: 10px;
        opacity: 0;
    }
}

@keyframes wallet-open {
    0%, 15%, 85%, 100% {
        width: 0;
        opacity: 0;
    }
    20%, 80% {
        width: 30px;
        opacity: 1;
    }
}

@keyframes coin-pile-grow {
    0%, 40%, 100% {
        opacity: 0;
        transform: translate(-50%, -50%) scaleY(0.3) scaleX(0.8);
    }
    50%, 90% {
        opacity: 1;
        transform: translate(-50%, -50%) scaleY(0.3) scaleX(1);
    }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .action-btn.wallet-btn {
        padding: 10px 12px;
    }
    
    .action-btn.wallet-btn .action-icon {
        width: 35px;
        height: 35px;
    }
    
    .action-btn.wallet-btn .action-icon i {
        font-size: 18px;
    }
    
    .action-btn.wallet-btn span {
        font-size: 12px;
    }
}

@media (max-width: 480px) {
    .action-btn.wallet-btn {
        padding: 8px 10px;
    }
    
    .action-btn.wallet-btn .action-icon {
        width: 30px;
        height: 30px;
        margin-bottom: 5px;
    }
    
    .action-btn.wallet-btn .action-icon i {
        font-size: 16px;
    }
    
    .action-btn.wallet-btn span {
        font-size: 11px;
    }
    
    .action-btn.wallet-btn .action-icon::before,
    .action-btn.wallet-btn .action-icon::after {
        width: 10px;
        height: 10px;
    }
}

/* Responsive Styles for Dashboard */
@media (max-width: 360px) {
    .dashboard-nav {
        padding: 8px 10px;
        height: 50px;
    }
    
    .profile-circle {
        width: 32px;
        height: 32px;
    }
    
    .username {
        font-size: 0.85rem;
        max-width: 80px;
    }
    
    
    .hamburger-menu {
        width: 32px;
        height: 32px;
    }
    
    .hamburger-menu i {
        font-size: 1.1rem;
    }
    
    .action-buttons-row {
        gap: 8px;
    }
    
    .action-btn {
        min-width: 60px;
        padding: 8px;
    }
    
    .action-icon {
        width: 35px;
        height: 35px;
        font-size: 1rem;
    }
    
    .action-btn span {
        font-size: 0.75rem;
    }
}

/* iPhone X and newer notch fixes */
@supports (padding: max(0px)) {
    .dashboard-nav {
        padding-left: max(15px, env(safe-area-inset-left));
        padding-right: max(15px, env(safe-area-inset-right));
        padding-top: max(10px, env(safe-area-inset-top));
    }
    
    .dashboard-container {
        padding-left: max(15px, env(safe-area-inset-left));
        padding-right: max(15px, env(safe-area-inset-right));
        padding-bottom: max(15px, env(safe-area-inset-bottom));
    }
}

/* Fix for very small screens */
@media (max-width: 320px) {
    .action-buttons-row {
        justify-content: flex-start;
    }
    
    .action-btn {
        min-width: 55px;
    }
    
    .action-icon {
        width: 30px;
        height: 30px;
        font-size: 0.9rem;
    }
    
    .action-btn span {
        font-size: 0.7rem;
    }
    
}



/* Profile Modal Responsive Styles */

/* Base modal styles */
.profile-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling for iOS */
}

.profile-modal.active {
    display: flex;
    justify-content: center;
    align-items: flex-start;
}

.profile-modal-content {
    background-color: #fff;
    width: 90%;
    max-width: 500px;
    margin: 20px auto;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    overflow: hidden;
    animation: modalFadeIn 0.3s ease;
    padding: 0;
    position: relative;
}

/* Modal header */
.profile-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid #eee;
    background-color: #f8f9fa;
}

.profile-modal-header h2 {
    margin: 0;
    font-size: 1.25rem;
    color: #333;
    font-weight: 600;
}

.close-profile {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
    padding: 0;
    line-height: 1;
}

/* Emoji Avatar Section */
.emoji-avatar-wrapper {
    position: relative;
    cursor: pointer;
    width: 90px;
    height: 90px;
    margin: 20px auto;
}

.current-emoji-avatar {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 45px;
    background-color: #f0f0f0;
    border-radius: 50%;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
}

.current-emoji-avatar:hover, .current-emoji-avatar:active {
    background-color: #e0e0e0;
    transform: scale(1.05);
}

.emoji-selector {
    position: absolute;
    top: 110%;
    left: 50%;
    transform: translateX(-50%);
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
    padding: 12px;
    display: none;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    z-index: 10;
    width: 200px;
    max-width: 90vw;
}

.emoji-selector.active {
    display: grid;
    animation: fadeIn 0.2s ease-in-out;
}

.emoji-option {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    border-radius: 50%;
    transition: all 0.2s ease;
    background-color: #f8f8f8;
    -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
}

.emoji-option:hover, .emoji-option:active {
    background-color: #f0f0f0;
    transform: scale(1.1);
}

/* Form styles */
#profileForm, #changePasswordForm {
    padding: 0 20px 20px;
}

.form-group {
    margin-bottom: 16px;
}

.form-group label {
    display: block;
    margin-bottom: 6px;
    font-weight: 500;
    color: #0c0000;
    font-size: 0.9rem;
}

.form-group input, 
.form-group select, 
.form-group textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 16px; /* Prevent zoom on iOS */
    background-color: #f7f4f4;
    transition: border-color 0.3s;
    box-sizing: border-box;
    -webkit-appearance: none; /* Remove default styling on iOS */
    appearance: none;
    color: #0c0000;
   
}

.form-group input:focus, 
.form-group select:focus, 
.form-group textarea:focus {
    border-color: #6c5ce7;
    outline: none;
    background-color: #fff;
}

.form-group textarea {
    resize: vertical;
    min-height: 80px;
}

/* Password input styling */
.password-input {
    position: relative;
}

.password-input input {
    padding-right: 40px;
}

.toggle-password {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #777;
}

/* Password strength meter */
.password-strength {
    margin-top: 8px;
}

.strength-meter {
    display: flex;
    gap: 4px;
    margin-bottom: 4px;
}

.strength-segment {
    height: 4px;
    flex: 1;
    background-color: #ddd;
    border-radius: 2px;
}

.strength-segment.weak {
    background-color: #ff4757;
}

.strength-segment.medium {
    background-color: #ffa502;
}

.strength-segment.strong {
    background-color: #2ed573;
}

.strength-text {
    font-size: 0.75rem;
    color: #777;
}

/* Action buttons */
.profile-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.primary-btn, .secondary-btn {
    padding: 10px 16px;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.9rem;
    border: none;
    -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
}

.primary-btn {
    background-color: #6c5ce7;
    color: white;
}

.primary-btn:hover, .primary-btn:active {
    background-color: #5649c0;
}

.secondary-btn {
    background-color: #f0f0f0;
    color: #333;
}

.secondary-btn:hover, .secondary-btn:active {
    background-color: #e0e0e0;
}

/* Change password section */
.change-password-section {
    padding: 0 20px 20px;
    border-top: 1px solid #eee;
    margin-top: 10px;
}

.change-password-section h3 {
    margin: 16px 0;
    font-size: 1.1rem;
    color: #333;
}

.hidden {
    display: none;
}

/* Animation keyframes */
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* Media queries for better responsiveness */
@media (max-width: 480px) {
    .profile-modal-content {
        width: 95%;
        margin: 10px auto;
    }
    
    .emoji-avatar-wrapper {
        width: 80px;
        height: 80px;
    }
    
    .current-emoji-avatar {
        font-size: 40px;
    }
    
    .emoji-selector {
        width: 180px;
        padding: 8px;
        gap: 8px;
    }
    
    .emoji-option {
        width: 36px;
        height: 36px;
        font-size: 20px;
    }
    
    .profile-actions {
        flex-direction: column-reverse;
        gap: 8px;
    }
    
    .primary-btn, .secondary-btn {
        width: 100%;
        padding: 12px 16px;
    }
    
    .form-group input, 
    .form-group select, 
    .form-group textarea {
        padding: 14px 12px;
    }
}

/* Fix for iOS input zoom */
@media screen and (-webkit-min-device-pixel-ratio: 0) { 
    select,
    textarea,
    input {
        font-size: 16px;
    }
}

/* Fix for notched iPhones */
@supports (padding: max(0px)) {
    .profile-modal {
        padding-top: max(20px, env(safe-area-inset-top));
        padding-bottom: max(20px, env(safe-area-inset-bottom));
    }
}


/* Sidebar Menu */
.sidebar-menu {
    position: fixed;
    top: 0;
    left: -300px;
    width: 280px;
    height: 100%;
    background-color: #333;
    z-index: 1000;
    transition: left 0.3s ease;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.sidebar-menu.active {
    left: 0;
}

/* Sidebar Header */
.sidebar-header {
    padding: 20px;
    border-bottom: 1px solid var(--sidebar-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: var(--sidebar-bg);
}

.sidebar-user-info {
    display: flex;
    align-items: center;
    gap: 12px;
    color: var(--sidebar-text);
}

.user-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
}

.user-details {
    display: flex;
    flex-direction: column;
}

.user-name {
    font-weight: 600;
    font-size: 16px;
    color: #1a1a2e;
}

.user-email {
    font-size: 12px;
  opacity: 0.8;
  color: #1a1a2e;
}

.close-sidebar {
    background: none;
    border: none;
    color: var(--sidebar-text);
    font-size: 20px;
    cursor: pointer;
    padding: 5px;
}

/* Sidebar Content */
.sidebar-content {
    flex: 1;
    padding: 20px 0;
}

.sidebar-menu-items {
    list-style: none;
    padding: 0;
    margin: 0;
}

.menu-item {
    margin-bottom: 5px;
}

.menu-item a {
    display: flex;
    align-items: center;
    padding: 12px 20px;
   text-decoration: none;
    transition: all 0.2s ease;
    color: #1a1a2e;
}

.menu-item a:hover {
    background-color: var(--sidebar-hover);
}

.menu-item a i {
    margin-right: 12px;
    width: 20px;
    text-align: center;
}

.logout-btn {
   color: #1a1a2e !important;
}

/* Theme Toggle */
.theme-toggle {
    padding: 12px 20px;
}

.theme-switch-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: var(--sidebar-text);
}

.theme-switch-wrapper span {
    display: flex;
    align-items: center;
}

.theme-switch-wrapper span i {
    margin-right: 12px;
    width: 20px;
    text-align: center;
}

.theme-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 24px;
}

.theme-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--toggle-bg);
    transition: .4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: var(--toggle-ball);
    transition: .4s;
}

input:checked + .slider {
    background-color: var(--toggle-active);
}

input:checked + .slider:before {
    transform: translateX(26px);
}

.slider.round {
    border-radius: 34px;
}

.slider.round:before {
    border-radius: 50%;
}

/* Sidebar Footer */
.sidebar-footer {
    padding: 15px 20px;
    border-top: 1px solid var(--sidebar-border);
    text-align: center;
}

.app-version {
    font-size: 12px;
    color: var(--sidebar-text);
    opacity: 0.7;
}

/* Overlay */
.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #ffffff;
    z-index: 999;
    display: none;
}

.sidebar-overlay.active {
    display: block;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #ffffff;
    z-index: 1001;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.modal.active {
    display: flex;
    justify-content: center;
    align-items: flex-start;
}

.modal-content {
   width: 90%;
    max-width: 600px;
    margin: 20px auto;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    overflow: hidden;
    animation: modalFadeIn 0.3s ease;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--modal-border);
    color: #1a1a2e;
}

.modal-header h2 {
    margin: 0;
    font-size: 1.25rem;
    color: var(--modal-text);
    font-weight: 600;
}

.close-modal {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--modal-text);
    padding: 0;
    line-height: 1;
}

.modal-body {
    padding: 20px;
    color: #1a1a2e;
    max-height: 70vh;
    overflow-y: auto;
}

.terms-content h3, .privacy-content h3 {
    margin-top: 20px;
    margin-bottom: 10px;
    font-size: 1.1rem;
    color: var(--modal-text);
}

.terms-content p, .privacy-content p {
    margin-bottom: 15px;
    line-height: 1.5;
    font-size: 0.95rem;
}

/* Animation keyframes */
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Media queries for better responsiveness */
@media (max-width: 480px) {
    .sidebar-menu {
        width: 260px;
    }
    
    .hamburger-menu {
        top: 15px;
        left: 15px;
        width: 36px;
        height: 36px;
    }
    
    .modal-content {
        width: 95%;
        margin: 10px auto;
    }
    
    .user-avatar {
        width: 40px;
        height: 40px;
        font-size: 20px;
    }
}

/* Fix for notched iPhones */
@supports (padding: max(0px)) {
    .sidebar-menu {
        padding-top: max(0px, env(safe-area-inset-top));
        padding-bottom: max(0px, env(safe-area-inset-bottom));
    }
    
    .modal {
        padding-top: max(20px, env(safe-area-inset-top));
        padding-bottom: max(20px, env(safe-area-inset-bottom));
    }
}





 /* Live Events Page Specific Styles - All classes prefixed with liveevent */
.liveevent-page * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

.liveevent-page {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    background: #1a1a2e;
    color: #ffffff;
    line-height: 1.6;
    overflow-x: hidden;
    min-height: 100vh;
}
/* Additional CSS for smooth show/hide transitions */
.liveevent-page {
    transition: opacity 0.3s ease, transform 0.3s ease;
    opacity: 0;
    transform: translateY(-20px);
}

.liveevent-page-open {
    opacity: 1 !important;
    transform: translateY(0) !important;
}

/* Optional: Close button styling if you want to add one */
.liveevent-close-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    background: hsl(261, 84%, 60%);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 1000;
    transition: all 0.3s ease;
}

.liveevent-close-btn:hover {
   transform: scale(1.1);
    background: hsl(261, 84%, 60%);
    
}

.liveevent-container {
    min-height: 100vh;
    padding: 0;
}

/* Header */
.liveevent-header {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    padding: 20px;
    text-align: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    position: sticky;
    top: 0;
    z-index: 100;
}

.liveevent-header h1 {
    font-size: 1.8rem;
    font-weight: 700;
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin: 0;
}

.liveevent-header i {
    color: #10b981;
    animation: liveevent-pulse 2s infinite;
}

@keyframes liveevent-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

/* Tab Navigation */
.liveevent-tab-navigation {
    display: flex;
    background: #16213e;
    border-bottom: 2px solid #10b981;
    position: sticky;
    top: 80px;
    z-index: 99;
}

.liveevent-tab-btn {
    flex: 1;
    padding: 15px 20px;
    background: transparent;
    border: none;
    color: #ffffff;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    position: relative;
}

.liveevent-tab-btn:hover {
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
}

.liveevent-tab-btn.liveevent-active {
    background: #10b981;
    color: #ffffff;
}

.liveevent-tab-btn.liveevent-active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 2px;
    background: #3b82f6;
}

/* Tab Content */
.liveevent-tab-content {
    display: none;
    padding: 20px;
    animation: liveevent-fadeIn 0.3s ease;
}

.liveevent-tab-content.liveevent-active {
    display: block;
}

@keyframes liveevent-fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Sports Icons */
.liveevent-sports-icons, 
.liveevent-talent-icons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: 15px;
    margin-bottom: 25px;
    padding: 0 10px;
}

.liveevent-sport-icon, 
.liveevent-talent-icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px 10px;
    background: linear-gradient(135deg, #16213e 0%, #1a1a2e 100%);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    position: relative;
    overflow: hidden;
}

.liveevent-sport-icon:hover, 
.liveevent-talent-icon:hover {
    transform: translateY(-3px);
    border-color: #10b981;
    box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
}

.liveevent-sport-icon.liveevent-active, 
.liveevent-talent-icon.liveevent-active {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    border-color: #3b82f6;
}

.liveevent-sport-icon i, 
.liveevent-talent-icon i {
    font-size: 1.5rem;
    margin-bottom: 8px;
    color: #10b981;
    transition: all 0.3s ease;
}

.liveevent-sport-icon:hover i, 
.liveevent-talent-icon:hover i {
    transform: scale(1.2);
    color: #ffffff;
}

.liveevent-sport-icon.liveevent-active i, 
.liveevent-talent-icon.liveevent-active i {
    color: #ffffff;
}

.liveevent-sport-icon span, 
.liveevent-talent-icon span {
    font-size: 0.75rem;
    font-weight: 600;
    text-align: center;
    color: #ffffff;
    line-height: 1.2;
}

/* Filters */
.liveevent-filters-container {
    margin-bottom: 25px;
    padding: 0 10px;
}

.liveevent-filter-group {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
}

.liveevent-filter-btn {
    padding: 8px 16px;
    background: #16213e;
    border: 2px solid #10b981;
    border-radius: 20px;
    color: #ffffff;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.liveevent-filter-btn:hover {
    background: #10b981;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.liveevent-filter-btn.liveevent-active {
    background: #10b981;
    border-color: #3b82f6;
}

/* Banner Ad */
.liveevent-banner-ad {
    margin: 25px 0;
    display: flex;
    justify-content: center;
    padding: 0 10px;
}

.liveevent-ad-placeholder {
    width: 100%;
    max-width: 480px;
    height: 70px;
    background: linear-gradient(135deg, #16213e 0%, #1a1a2e 100%);
    border: 2px dashed #10b981;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    color: #10b981;
    font-size: 0.9rem;
    font-weight: 500;
}

.liveevent-ad-placeholder i {
    font-size: 1.2rem;
}

/* Search Section */
.liveevent-search-section {
    margin-bottom: 25px;
    padding: 0 10px;
}

.liveevent-search-container {
    background: #16213e;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.liveevent-search-input-wrapper {
    position: relative;
    margin-bottom: 15px;
}

.liveevent-search-input-wrapper i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #10b981;
    font-size: 1.1rem;
}

.liveevent-search-input {
    width: 100%;
    padding: 12px 15px 12px 45px;
    background: #1a1a2e;
    border: 2px solid #10b981;
    border-radius: 25px;
    color: #ffffff;
    font-size: 1rem;
    outline: none;
    transition: all 0.3s ease;
}

.liveevent-search-input:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.liveevent-search-input::placeholder {
    color: #9ca3af;
}

.liveevent-search-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
}

.liveevent-search-filter-btn {
    padding: 6px 14px;
    background: #1a1a2e;
    border: 1px solid #10b981;
    border-radius: 15px;
    color: #ffffff;
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.liveevent-search-filter-btn:hover {
    background: #10b981;
    transform: translateY(-1px);
}

.liveevent-search-filter-btn.liveevent-active {
    background: #10b981;
    border-color: #3b82f6;
}

/* Cards Container */
.liveevent-cards-container {
    min-height: 400px;
    padding: 0 10px;
    margin-bottom: 30px;
}

.liveevent-loading-message {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: #10b981;
}

.liveevent-loading-message i {
    font-size: 2rem;
    margin-bottom: 15px;
}

.liveevent-loading-message p {
    font-size: 1.1rem;
    font-weight: 500;
    margin: 0;
}

/* Cards Grid */
.liveevent-cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    padding: 20px 0;
}

/* No Results */
.liveevent-no-results {
    text-align: center;
    padding: 60px 20px;
    color: #9ca3af;
}

.liveevent-no-results i {
    font-size: 3rem;
    margin-bottom: 20px;
    color: #6b7280;
}

.liveevent-no-results h3 {
    font-size: 1.5rem;
    margin-bottom: 10px;
    color: #ffffff;
}

.liveevent-no-results p {
    font-size: 1rem;
    margin: 0;
}

/* Responsive Design */
@media (max-width: 768px) {
    .liveevent-header {
        padding: 15px;
        position: relative;
        top: auto;
    }
    
    .liveevent-header h1 {
        font-size: 1.5rem;
    }
    
    .liveevent-tab-navigation {
        position: relative;
        top: auto;
    }
    
    .liveevent-tab-btn {
        padding: 12px 15px;
        font-size: 0.9rem;
    }
    
    .liveevent-tab-btn span {
        display: none;
    }
    
    .liveevent-tab-content {
        padding: 15px;
    }
    
    .liveevent-sports-icons, 
    .liveevent-talent-icons {
        grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
        gap: 10px;
    }
    
    .liveevent-sport-icon, 
    .liveevent-talent-icon {
        padding: 12px 8px;
    }
    
    .liveevent-sport-icon i, 
    .liveevent-talent-icon i {
        font-size: 1.3rem;
    }
    
    .liveevent-sport-icon span, 
    .liveevent-talent-icon span {
        font-size: 0.7rem;
    }
    
    .liveevent-filter-btn {
        padding: 6px 12px;
        font-size: 0.8rem;
    }
    
    .liveevent-search-container {
        padding: 15px;
    }
    
    .liveevent-search-input {
        padding: 10px 12px 10px 40px;
        font-size: 0.9rem;
    }
    
    .liveevent-cards-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
}

@media (max-width: 480px) {
    .liveevent-header h1 {
        font-size: 1.3rem;
        flex-direction: column;
        gap: 5px;
    }
    
    .liveevent-tab-btn {
        padding: 10px 8px;
        font-size: 0.8rem;
    }
    
    .liveevent-sports-icons, 
    .liveevent-talent-icons {
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
    }
    
    .liveevent-sport-icon, 
    .liveevent-talent-icon {
        padding: 10px 5px;
    }
    
    .liveevent-sport-icon i, 
    .liveevent-talent-icon i {
        font-size: 1.1rem;
        margin-bottom: 5px;
    }
    
    .liveevent-sport-icon span, 
    .liveevent-talent-icon span {
        font-size: 0.65rem;
    }
    
    .liveevent-filter-group {
        gap: 5px;
    }
    
    .liveevent-filter-btn {
        padding: 5px 10px;
        font-size: 0.75rem;
    }
    
    .liveevent-search-container {
        padding: 12px;
    }
    
    .liveevent-search-input {
        padding: 8px 10px 8px 35px;
        font-size: 0.85rem;
    }
    
    .liveevent-search-input-wrapper i {
        left: 12px;
        font-size: 1rem;
    }
    
    .liveevent-search-filter-btn {
        padding: 5px 10px;
        font-size: 0.75rem;
    }
    
    .liveevent-ad-placeholder {
        height: 60px;
        font-size: 0.8rem;
    }
    
    .liveevent-loading-message {
        padding: 40px 15px;
    }
    
    .liveevent-loading-message i {
        font-size: 1.5rem;
    }
    
    .liveevent-loading-message p {
        font-size: 1rem;
    }
    
    .liveevent-no-results {
        padding: 40px 15px;
    }
    
    .liveevent-no-results i {
        font-size: 2rem;
    }
    
    .liveevent-no-results h3 {
        font-size: 1.2rem;
    }
    
    .liveevent-no-results p {
        font-size: 0.9rem;
    }
}

/* iOS Specific Styles */
@supports (-webkit-touch-callout: none) {
    .liveevent-search-input {
        -webkit-appearance: none;
        border-radius: 25px;
    }
    
    .liveevent-tab-btn,
    .liveevent-filter-btn,
    .liveevent-search-filter-btn {
        -webkit-tap-highlight-color: transparent;
    }
}

/* Android Specific Styles */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
    .liveevent-search-input:focus {
        outline: none;
        -webkit-appearance: none;
    }
}

/* Scrollbar Styling */
.liveevent-cards-container::-webkit-scrollbar {
    width: 6px;
}

.liveevent-cards-container::-webkit-scrollbar-track {
    background: #16213e;
    border-radius: 3px;
}

.liveevent-cards-container::-webkit-scrollbar-thumb {
    background: #10b981;
    border-radius: 3px;
}

.liveevent-cards-container::-webkit-scrollbar-thumb:hover {
    background: #059669;
}

/* Touch Gestures for Mobile */
.liveevent-sport-icon,
.liveevent-talent-icon,
.liveevent-filter-btn,
.liveevent-search-filter-btn,
.liveevent-tab-btn {
    -webkit-tap-highlight-color: rgba(16, 185, 129, 0.2);
    tap-highlight-color: rgba(16, 185, 129, 0.2);
}

/* Active States for Touch */
.liveevent-sport-icon:active,
.liveevent-talent-icon:active {
    transform: translateY(-1px) scale(0.98);
}

.liveevent-filter-btn:active,
.liveevent-search-filter-btn:active {
    transform: scale(0.95);
}

.liveevent-tab-btn:active {
    background: rgba(16, 185, 129, 0.2);
}

/* Accessibility */
.liveevent-sport-icon:focus,
.liveevent-talent-icon:focus,
.liveevent-filter-btn:focus,
.liveevent-search-filter-btn:focus,
.liveevent-tab-btn:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
}

.liveevent-search-input:focus {
    outline: none;
}

/* Animation for smooth transitions */
.liveevent-cards-container {
    transition: all 0.3s ease;
}

.liveevent-cards-grid {
    animation: liveevent-slideUp 0.4s ease;
}

@keyframes liveevent-slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Loading Animation */
@keyframes liveevent-spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

.liveevent-loading-message i {
    animation: liveevent-spin 1s linear infinite;
}

/* Hover Effects for Desktop */
@media (hover: hover) {
    .liveevent-sport-icon:hover,
    .liveevent-talent-icon:hover {
        transform: translateY(-3px);
    }
    
    .liveevent-filter-btn:hover,
    .liveevent-search-filter-btn:hover {
        transform: translateY(-1px);
    }
}

/* High DPI Displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .liveevent-ad-placeholder {
        border-width: 1px;
    }
    
    .liveevent-sport-icon,
    .liveevent-talent-icon {
        border-width: 1px;
    }
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
    .liveevent-page {
        background: #1a1a2e;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    .liveevent-page * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* New Events Page Specific Styles - All classes prefixed with newevent */
.newevent-page * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

.newevent-page {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    background: #1a1a2e;
    color: #ffffff;
    line-height: 1.6;
    overflow-x: hidden;
    min-height: 100vh;
}

.newevent-container {
    min-height: 100vh;
    padding: 0;
}

/* Header */
.newevent-header {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    padding: 20px;
    text-align: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    position: sticky;
    top: 0;
    z-index: 100;
}

.newevent-header h1 {
    font-size: 1.8rem;
    font-weight: 700;
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin: 0;
}

.newevent-header i {
    color: #10b981;
    animation: newevent-pulse 2s infinite;
}

@keyframes newevent-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

/* Close Button Styles */
.newevent-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #6613eba4;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 101;
    color: #ffffff;
    font-size: 1.1rem;
}

.newevent-close-btn:hover {
   color: #ffffff;
   transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
}

.newevent-close-btn:active {
    transform: scale(0.95);
}

/* Alternative close button with text */
.newevent-close-top {
    position: relative;
    top: 0;
    right: 0;
    width: auto;
    height: auto;
    border-radius: 25px;
    padding: 8px 16px;
    margin: 15px 15px 0 auto;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    font-weight: 500;
}

.newevent-close-top span {
    color: inherit;
}

/* Make header relative for absolute positioning */
.newevent-header {
    position: relative;
}

/* Responsive adjustments */
@media (max-width: 480px) {
    .newevent-close-btn {
        width: 35px;
        height: 35px;
        top: 10px;
        right: 10px;
        font-size: 1rem;
    }
    
    .newevent-close-top {
        margin: 10px 10px 0 auto;
        padding: 6px 12px;
        font-size: 0.8rem;
    }
}

/* Tab Navigation */
.newevent-tab-navigation {
    display: flex;
    background: #16213e;
    border-bottom: 2px solid #10b981;
    position: sticky;
    top: 80px;
    z-index: 99;
}

.newevent-tab-btn {
    flex: 1;
    padding: 15px 20px;
    background: transparent;
    border: none;
    color: #ffffff;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    position: relative;
}

.newevent-tab-btn:hover {
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
}

.newevent-tab-btn.newevent-active {
    background: #10b981;
    color: #ffffff;
}

.newevent-tab-btn.newevent-active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 2px;
    background: #3b82f6;
}

/* Tab Content */
.newevent-tab-content {
    display: none;
    padding: 20px;
    animation: newevent-fadeIn 0.3s ease;
}

.newevent-tab-content.newevent-active {
    display: block;
}

@keyframes newevent-fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Sports Icons */
.newevent-sports-icons, .newevent-talent-icons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: 15px;
    margin-bottom: 25px;
    padding: 0 10px;
}

.newevent-sport-icon, .newevent-talent-icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px 10px;
    background: linear-gradient(135deg, #16213e 0%, #1a1a2e 100%);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    position: relative;
    overflow: hidden;
}

.newevent-sport-icon:hover, .newevent-talent-icon:hover {
    transform: translateY(-3px);
    border-color: #10b981;
    box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
}

.newevent-sport-icon.newevent-active, .newevent-talent-icon.newevent-active {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    border-color: #3b82f6;
}

.newevent-sport-icon i, .newevent-talent-icon i {
    font-size: 1.5rem;
    margin-bottom: 8px;
    color: #10b981;
    transition: all 0.3s ease;
}

.newevent-sport-icon:hover i, .newevent-talent-icon:hover i {
    transform: scale(1.2);
    color: #ffffff;
}

.newevent-sport-icon.newevent-active i, .newevent-talent-icon.newevent-active i {
    color: #ffffff;
}

.newevent-sport-icon span, .newevent-talent-icon span {
    font-size: 0.75rem;
    font-weight: 600;
    text-align: center;
    color: #ffffff;
    line-height: 1.2;
}

/* Filters */
.newevent-filters-container {
    margin-bottom: 25px;
    padding: 0 10px;
}

.newevent-filter-group {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
}

.newevent-filter-btn {
    padding: 8px 16px;
    background: #16213e;
    border: 2px solid #10b981;
    border-radius: 20px;
    color: #ffffff;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.newevent-filter-btn:hover {
    background: #10b981;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.newevent-filter-btn.newevent-active {
    background: #10b981;
    border-color: #3b82f6;
}

/* Banner Ad */
.newevent-banner-ad {
    margin: 25px 0;
    display: flex;
    justify-content: center;
    padding: 0 10px;
}

.newevent-ad-placeholder {
    width: 100%;
    max-width: 480px;
    height: 70px;
    background: linear-gradient(135deg, #16213e 0%, #1a1a2e 100%);
    border: 2px dashed #10b981;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    color: #10b981;
    font-size: 0.9rem;
    font-weight: 500;
}

.newevent-ad-placeholder i {
    font-size: 1.2rem;
}

/* Search Section */
.newevent-search-section {
    margin-bottom: 25px;
    padding: 0 10px;
}

.newevent-search-container {
    background: #16213e;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.newevent-search-input-wrapper {
    position: relative;
    margin-bottom: 15px;
}

.newevent-search-input-wrapper i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #10b981;
    font-size: 1.1rem;
}

.newevent-search-input {
    width: 100%;
    padding: 12px 15px 12px 45px;
    background: #1a1a2e;
    border: 2px solid #10b981;
    border-radius: 25px;
    color: #ffffff;
    font-size: 1rem;
    outline: none;
    transition: all 0.3s ease;
}

.newevent-search-input:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.newevent-search-input::placeholder {
    color: #9ca3af;
}

.newevent-search-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
}

.newevent-search-filter-btn {
    padding: 6px 14px;
    background: #1a1a2e;
    border: 1px solid #10b981;
    border-radius: 15px;
    color: #ffffff;
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.newevent-search-filter-btn:hover {
    background: #10b981;
    transform: translateY(-1px);
}

.newevent-search-filter-btn.newevent-active {
    background: #10b981;
    border-color: #3b82f6;
}

/* Cards Container */
.newevent-cards-container {
    min-height: 400px;
    padding: 0 10px;
    margin-bottom: 30px;
}

.newevent-loading-message {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: #10b981;
}

.newevent-loading-message i {
    font-size: 2rem;
    margin-bottom: 15px;
}

.newevent-loading-message p {
    font-size: 1.1rem;
    font-weight: 500;
    margin: 0;
}

/* Cards Grid */
.newevent-cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    padding: 20px 0;
}

/* No Results */
.newevent-no-results {
    text-align: center;
    padding: 60px 20px;
    color: #9ca3af;
}

.newevent-no-results i {
    font-size: 3rem;
    margin-bottom: 20px;
    color: #6b7280;
}

.newevent-no-results h3 {
    font-size: 1.5rem;
    margin-bottom: 10px;
    color: #ffffff;
}

.newevent-no-results p {
    font-size: 1rem;
    margin: 0;
}

/* Responsive Design */
@media (max-width: 768px) {
    .newevent-header {
        padding: 15px;
        position: relative;
        top: auto;
    }
    
    .newevent-header h1 {
        font-size: 1.5rem;
    }
    
    .newevent-tab-navigation {
        position: relative;
        top: auto;
    }
    
    .newevent-tab-btn {
        padding: 12px 15px;
        font-size: 0.9rem;
    }
    
    .newevent-tab-btn span {
        display: none;
    }
    
    .newevent-tab-content {
        padding: 15px;
    }
    
    .newevent-sports-icons, 
    .newevent-talent-icons {
        grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
        gap: 10px;
    }
    
    .newevent-sport-icon, 
    .newevent-talent-icon {
        padding: 12px 8px;
    }
    
    .newevent-sport-icon i, 
    .newevent-talent-icon i {
        font-size: 1.3rem;
    }
    
    .newevent-sport-icon span, 
    .newevent-talent-icon span {
        font-size: 0.7rem;
    }
    
    .newevent-filter-btn {
        padding: 6px 12px;
        font-size: 0.8rem;
    }
    
    .newevent-search-container {
        padding: 15px;
    }
    
    .newevent-search-input {
        padding: 10px 12px 10px 40px;
        font-size: 0.9rem;
    }
    
    .newevent-cards-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
}

@media (max-width: 480px) {
    .newevent-header h1 {
        font-size: 1.3rem;
        flex-direction: column;
        gap: 5px;
    }
    
    .newevent-tab-btn {
        padding: 10px 8px;
        font-size: 0.8rem;
    }
    
    .newevent-sports-icons, 
    .newevent-talent-icons {
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
    }
    
    .newevent-sport-icon, 
    .newevent-talent-icon {
        padding: 10px 5px;
    }
    
    .newevent-sport-icon i, 
    .newevent-talent-icon i {
        font-size: 1.1rem;
        margin-bottom: 5px;
    }
    
    .newevent-sport-icon span, 
    .newevent-talent-icon span {
        font-size: 0.65rem;
    }
    
    .newevent-filter-group {
        gap: 5px;
    }
    
    .newevent-filter-btn {
        padding: 5px 10px;
        font-size: 0.75rem;
    }
    
    .newevent-search-container {
        padding: 12px;
    }
    
    .newevent-search-input {
        padding: 8px 10px 8px 35px;
        font-size: 0.85rem;
    }
        .newevent-search-input {
        padding: 8px 10px 8px 35px;
        font-size: 0.85rem;
    }
    
    .newevent-search-input-wrapper i {
        left: 12px;
        font-size: 1rem;
    }
    
    .newevent-search-filter-btn {
        padding: 5px 10px;
        font-size: 0.75rem;
    }
    
    .newevent-ad-placeholder {
        height: 60px;
        font-size: 0.8rem;
    }
    
    .newevent-loading-message {
        padding: 40px 15px;
    }
    
    .newevent-loading-message i {
        font-size: 1.5rem;
    }
    
    .newevent-loading-message p {
        font-size: 1rem;
    }
    
    .newevent-no-results {
        padding: 40px 15px;
    }
    
    .newevent-no-results i {
        font-size: 2rem;
    }
    
    .newevent-no-results h3 {
        font-size: 1.2rem;
    }
    
    .newevent-no-results p {
        font-size: 0.9rem;
    }
}

/* iOS Specific Styles */
@supports (-webkit-touch-callout: none) {
    .newevent-search-input {
        -webkit-appearance: none;
        border-radius: 25px;
    }
    
    .newevent-tab-btn,
    .newevent-filter-btn,
    .newevent-search-filter-btn {
        -webkit-tap-highlight-color: transparent;
    }
}

/* Android Specific Styles */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
    .newevent-search-input:focus {
        outline: none;
        -webkit-appearance: none;
    }
}

/* Scrollbar Styling */
.newevent-cards-container::-webkit-scrollbar {
    width: 6px;
}

.newevent-cards-container::-webkit-scrollbar-track {
    background: #16213e;
    border-radius: 3px;
}

.newevent-cards-container::-webkit-scrollbar-thumb {
    background: #10b981;
    border-radius: 3px;
}

.newevent-cards-container::-webkit-scrollbar-thumb:hover {
    background: #059669;
}

/* Touch Gestures for Mobile */
.newevent-sport-icon,
.newevent-talent-icon,
.newevent-filter-btn,
.newevent-search-filter-btn,
.newevent-tab-btn {
    -webkit-tap-highlight-color: rgba(16, 185, 129, 0.2);
    tap-highlight-color: rgba(16, 185, 129, 0.2);
}

/* Active States for Touch */
.newevent-sport-icon:active,
.newevent-talent-icon:active {
    transform: translateY(-1px) scale(0.98);
}

.newevent-filter-btn:active,
.newevent-search-filter-btn:active {
    transform: scale(0.95);
}

.newevent-tab-btn:active {
    background: rgba(16, 185, 129, 0.2);
}

/* Accessibility */
.newevent-sport-icon:focus,
.newevent-talent-icon:focus,
.newevent-filter-btn:focus,
.newevent-search-filter-btn:focus,
.newevent-tab-btn:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
}

.newevent-search-input:focus {
    outline: none;
}

/* Animation for smooth transitions */
.newevent-cards-container {
    transition: all 0.3s ease;
}

.newevent-cards-grid {
    animation: newevent-slideUp 0.4s ease;
}

@keyframes newevent-slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Loading Animation */
@keyframes newevent-spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

.newevent-loading-message i {
    animation: newevent-spin 1s linear infinite;
}

/* Hover Effects for Desktop */
@media (hover: hover) {
    .newevent-sport-icon:hover,
    .newevent-talent-icon:hover {
        transform: translateY(-3px);
    }
    
    .newevent-filter-btn:hover,
    .newevent-search-filter-btn:hover {
        transform: translateY(-1px);
    }
}

/* High DPI Displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .newevent-ad-placeholder {
        border-width: 1px;
    }
    
    .newevent-sport-icon,
    .newevent-talent-icon {
        border-width: 1px;
    }
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
    .newevent-page {
        background: #1a1a2e;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    .newevent-page * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}


:root {
    --primary-color: #6c5ce7;
    --primary-light: #a29bfe;
    --primary-dark: #5641e5;
    --secondary-color: #00b894;
    --secondary-light: #55efc4;
    --secondary-dark: #00a785;
    --danger-color: #e74c3c;
    --warning-color: #f39c12;
    --success-color: #2ecc71;
    --info-color: #3498db;
    --text-color: #f0ecec;
    --text-light: #fcf9f9;
    --text-lighter: #f7eeee;
    --bg-color: #1a1a2e;
    --bg-light:#1a1a2e;
    --bg-dark: #0e0d0d;
    --border-color: #f8f7f7;
    --border-radius: 10px;
    --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
}

/* Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    color: var(--text-color);
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Modal Base Styles */
.wallet-modal,
.feature-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    overflow: hidden;
}

.wallet-modal.active,
.feature-modal.active {
    display: flex;
}

.wallet-container,
.feature-modal-content {
    background-color: var(--bg-color);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    width: 90%;
    max-width: 480px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    z-index: 1001;
    animation: modalFadeIn 0.3s ease;
    display: flex;
    flex-direction: column;
}

.wallet-header,
.feature-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
    position: flex;
    top: 0;
    background-color: var(--bg-color);
    z-index: 10;
}

.wallet-header h2,
.feature-modal-header h2 {
    margin: 0;
    font-size: 1.25rem;
    color: var(--text-color);
    font-weight: 600;
}

.close-wallet,
.close-feature-modal {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--text-light);
    padding: 0;
    line-height: 1;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.wallet-screen,
.feature-modal-body {
    padding: 20px;
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 999;
    display: none;
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
}

.modal-overlay.active {
    display: block;
}

/* PIN Setup/Entry Styles */
.pin-setup,
.pin-entry {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 10px 0;
}

.pin-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background-color: var(--primary-light);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    margin-bottom: 20px;
}

.pin-setup h3,
.pin-entry h3 {
    margin: 0 0 10px;
    font-size: 1.2rem;
    color: var(--text-color);
}

.pin-setup p,
.pin-entry p {
    margin: 0 0 20px;
    color: var(--text-light);
    font-size: 0.95rem;
    max-width: 280px;
}

.pin-input-container,
.otp-input-container {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
    width: 100%;
    max-width: 280px;
}

.pin-digit,
.pin-confirm-digit,
.pin-login-digit,
.withdraw-pin-digit,
.current-pin-digit,
.new-pin-digit,
.confirm-new-pin-digit,
.transfer-pin-digit,
.otp-digit {
    width: 45px;
    height: 45px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    text-align: center;
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--text-color);
    background-color: var(--bg-light);
    transition: var(--transition);
    -webkit-appearance: none;
    -moz-appearance: textfield;
}

.pin-digit:focus,
.pin-confirm-digit:focus,
.pin-login-digit:focus,
.withdraw-pin-digit:focus,
.current-pin-digit:focus,
.new-pin-digit:focus,
.confirm-new-pin-digit:focus,
.transfer-pin-digit:focus,
.otp-digit:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.2);
}

.otp-input-container {
    gap: 8px;
}

.otp-digit {
    width: 40px;
    height: 40px;
}

.primary-btn {
    background-color: var(--primary-color);
    color: white;
}

.primary-btn:hover, .primary-btn:active {
    background-color: var(--primary-dark);
}

.secondary-btn {
    background-color: var(--bg-dark);
    color: var(--text-color);
}

.secondary-btn:hover, .secondary-btn:active {
    background-color: var(--border-color);
}

.text-btn {
    background: none;
    color: var(--primary-color);
    padding: 8px 16px;
}

.text-btn:hover, .text-btn:active {
    text-decoration: underline;
}

/* Wallet Dashboard Styles */
.wallet-info {
    margin-bottom: 20px;
}


.copy-btn {
    background: none;
    border: none;
    color: var(--primary-color);
    cursor: pointer;
    padding: 5px;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.balance-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.balance-card {
    background-color: var(--bg-light);
    border-radius: var(--border-radius);
    padding: 15px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.balance-card.talent-coin {
    background-color: var(--primary-light);
    color: white;
}

.balance-card.commission {
    background-color: var(--secondary-light);
    color: white;
}

.balance-icon {
    font-size: 1.5rem;
    margin-bottom: 10px;
}

.balance-details h3 {
    margin: 0 0 8px;
    font-size: 0.9rem;
    font-weight: 500;
    opacity: 0.9;
}

.balance-amount {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 5px;
}

.balance-equivalent {
    font-size: 0.85rem;
    opacity: 0.8;
}

.wallet-actions {
    margin-bottom: 25px;
}

.action-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 15px;
}

.wallet-action-btn {
    background-color: var(--bg-light);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
   transition: var(--transition);
    -webkit-tap-highlight-color: transparent;
}

.wallet-action-btn:hover, .wallet-action-btn:active {
    background-color: var(--bg-dark);
    transform: translateY(-2px);
}

.wallet-action-btn .action-icon {
    font-size: 1.5rem;
    color: var(--primary-color);
    margin-bottom: 8px;
}

.wallet-action-btn span {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-color);
    text-align: center;
}

.wallet-action-btn {
    position: relative;
    overflow: visible;
}

.ribbon-wrapper {
    width: 85px;
    height: 88px;
    overflow: hidden;
    position: absolute;
    top: -3px;
    right: -3px;
    z-index: 99;
}

.ribbon {
    font-size: 10px;
    font-weight: bold;
    color: #FFF;
    text-align: center;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    position: relative;
    padding: 5px 0;
    left: -5px;
    top: 15px;
    width: 120px;
    background-color: #ff6b6b;
    box-shadow: 0px 0px 3px rgba(0,0,0,0.3);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% {
        background-color: #ff6b6b;
    }
    50% {
        background-color: #ff8f8f;
    }
    100% {
        background-color: #ff6b6b;
    }
}


/* Blinking effect */
@keyframes blink {
    0%, 80%, 100% {
        opacity: 1;
    }
    40% {
        opacity: 0.5;
    }
}



.wallet-action-card:hover:after {
  transform: scaleX(1);
}

.wallet-action-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.wallet-action-header h3 {
  margin: 0;
  font-size: 1.25rem;
  color: #333;
  font-weight: 600;
}

.wallet-action-header i {
  font-size: 1.8rem;
  color: #ffc107;
  background: rgba(255, 193, 7, 0.1);
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.wallet-action-content {
  color: #666;
}

.wallet-action-content p {
  margin: 0 0 12px;
  font-size: 0.95rem;
}


/* Responsive adjustments */
@media (max-width: 768px) {
  .wallet-action-card {
    padding: 15px;
  }
  
  .wallet-action-header h3 {
    font-size: 1.1rem;
  }
  
  .wallet-action-header i {
    font-size: 1.5rem;
    width: 38px;
    height: 38px;
  }
  
  .wallet-action-content p {
    font-size: 0.9rem;
  }
  
  .bonus-list li {
    font-size: 0.8rem;
  }
}

@media (max-width: 576px) {
  .wallet-action-header h3 {
    font-size: 1rem;
  }
  
  .wallet-action-header i {
    font-size: 1.3rem;
    width: 32px;
    height: 32px;
  }
}


  
/* Media Queries for Responsive Design */
@media (max-width: 768px) {
    .wallet-modal,
    .feature-modal {
        align-items: flex-end;
    }
    
    .wallet-container,
    .feature-modal-content {
     width: 100%;
        max-width: 100%;
        height: 90vh;
        max-height: 90vh;
        border-radius: var(--border-radius) var(--border-radius) 0 0;
        animation: modalSlideUp 0.3s ease;
    }
    
    .wallet-header,
    .feature-modal-header {
        padding: 16px;
    }
    
    .wallet-screen,
    .feature-modal-body {
        padding: 16px;
    }
    
    .pin-icon {
        width: 60px;
        height: 60px;
        font-size: 24px;
    }
    
    .pin-setup h3,
    .pin-entry h3 {
        font-size: 1.1rem;
    }
    
    .pin-setup p,
    .pin-entry p {
        font-size: 0.9rem;
    }
    
    
    .account-row {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .account-row .label {
        margin-bottom: 4px;
    }
    
    .option-buttons {
        flex-direction: row;
    }
}

@media (max-width: 480px) {
    .pin-digit,
    .pin-confirm-digit,
    .pin-login-digit,
    .withdraw-pin-digit,
    .current-pin-digit,
    .new-pin-digit,
    .confirm-new-pin-digit,
    .transfer-pin-digit {
        width: 40px;
        height: 40px;
        font-size: 1.1rem;
    }
    
    .otp-digit {
        width: 35px;
        height: 35px;
        font-size: 1rem;
    }
    
    .balance-cards {
        grid-template-columns: 1fr;
        gap: 10px;
    }
    
    .balance-card {
        padding: 12px;
    }
    
    .balance-amount {
        font-size: 1.5rem;
    }
    
    .action-row {
        gap: 10px;
    }
    
    .wallet-action-btn {
        padding: 12px 10px;
    }
    
    .wallet-action-btn .action-icon {
        font-size: 1.3rem;
        margin-bottom: 6px;
    }
    
    .wallet-action-btn span {
        font-size: 0.8rem;
    }
    
    .tab {
        padding: 10px 15px;
        font-size: 0.9rem;
    }
    
    .input-group label {
        font-size: 0.9rem;
    }
    
    .input-group input,
    .input-group select {
        padding: 10px 12px;
        font-size: 0.9rem;
    }
    
    .option-btn {
        padding: 12px 10px;
    }
    
    .option-btn i {
        font-size: 1.3rem;
        margin-bottom: 6px;
    }
    
    .option-btn span {
        font-size: 0.8rem;
    }
}

/* iPhone X, 11, 12, 13 Notch Support */
@supports (padding: max(0px)) {
    .wallet-container,
    .feature-modal-content {
        padding-bottom: max(20px, env(safe-area-inset-bottom));
    }
    
    .wallet-header,
    .feature-modal-header {
        padding-top: max(16px, env(safe-area-inset-top));
        padding-left: max(16px, env(safe-area-inset-left));
        padding-right: max(16px, env(safe-area-inset-right));
    }
    
    .wallet-screen,
    .feature-modal-body {
        padding-left: max(16px, env(safe-area-inset-left));
        padding-right: max(16px, env(safe-area-inset-right));
    }
}

/* Fix for iOS input zoom */
@media screen and (-webkit-min-device-pixel-ratio: 0) { 
    select,
    textarea,
    input {
        font-size: 16px !important;
    }
}

/* Fix for Android Chrome bottom bar */
@media screen and (max-height: 600px) {
    .wallet-container,
    .feature-modal-content {
        max-height: 85vh;
    }
}

/* iPad specific adjustments */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
    .wallet-container,
    .feature-modal-content {
        width: 80%;
        max-width: 600px;
        max-height: 80vh;
        border-radius: var(--border-radius);
    }
    
    .wallet-modal,
    .feature-modal {
        align-items: center;
    }
    
    .balance-cards {
        grid-template-columns: 1fr 1fr;
    }
    .action-row {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .wallet-action-btn {
        padding: 20px 15px;
    }
    
    .wallet-action-btn .action-icon {
        font-size: 1.8rem;
        margin-bottom: 10px;
    }
    
    .wallet-action-btn span {
        font-size: 1rem;
    }
    
    .pin-digit,
    .pin-confirm-digit,
    .pin-login-digit,
    .withdraw-pin-digit,
    .current-pin-digit,
    .new-pin-digit,
    .confirm-new-pin-digit,
    .transfer-pin-digit {
        width: 50px;
        height: 50px;
        font-size: 1.3rem;
    }
    
    .otp-digit {
        width: 45px;
        height: 45px;
        font-size: 1.2rem;
    }
    
    .wallet-btn {
        padding: 14px 28px;
        font-size: 1rem;
    }
}

/* Landscape mode adjustments */
@media (orientation: landscape) and (max-height: 500px) {
    .wallet-container,
    .feature-modal-content {
        height: 95vh;
        max-height: 95vh;
    }
    
    .pin-setup,
    .pin-entry {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .pin-icon {
        margin-right: 20px;
        margin-bottom: 0;
    }
    
    .pin-setup h3,
    .pin-entry h3,
    .pin-setup p,
    .pin-entry p {
        text-align: left;
        width: calc(100% - 90px);
    }
    
    .pin-input-container,
    .pin-confirm-container,
    .wallet-btn {
        width: 100%;
    }
    
    .balance-cards {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .action-row {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .transaction-history {
        margin-top: 15px;
    }
    
    .transaction-list {
        max-height: 150px;
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
   
    
    .modal-overlay {
        background-color: rgba(0, 0, 0, 0.7);
    }
    
    .wallet-action-btn {
        background-color: var(--bg-light);
        border-color: var(--border-color);
    }
    
    .wallet-action-btn:hover, .wallet-action-btn:active {
        background-color: var(--bg-dark);
    }
    
    .option-btn {
        background-color: var(--bg-light);
        border-color: var(--border-color);
    }
    
    .option-btn.active {
        background-color: rgba(140, 122, 230, 0.2);
    }
    
    .transaction-icon {
        background-color: var(--bg-dark);
    }
    
    .file-upload-btn {
        background-color: var(--bg-dark);
        color: var(--text-light);
    }
    
    .file-upload-btn:hover, .file-upload-btn:active {
        background-color: var(--border-color);
    }
    
    .pagination-btn {
        color: var(--text-light);
    }
    
    .pagination-btn:hover, .pagination-btn:active {
        background-color: var(--bg-dark);
    }
}

/* Accessibility improvements */
.wallet-btn:focus,
.close-wallet:focus,
.close-feature-modal:focus,
.option-btn:focus,
.tab:focus,
.wallet-action-btn:focus,
.pagination-btn:focus,
.copy-btn:focus {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* Prevent text selection on buttons */
button, 
.option-btn,
.tab,
.wallet-action-btn {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Improve touch targets for mobile */
@media (max-width: 768px) {
    .close-wallet,
    .close-feature-modal,
    .copy-btn {
        min-width: 44px;
        min-height: 44px;
    }
    
    .tab {
        padding: 12px 20px;
    }
    
    .pagination-btn {
        width: 44px;
        height: 44px;
    }
}

/* Animations for interactive elements */
.wallet-btn,
.wallet-action-btn,
.option-btn,
.tab,
.copy-btn {
    position: relative;
    overflow: hidden;
}

.wallet-btn:after,
.wallet-action-btn:after,
.option-btn:after,
.tab:after,
.copy-btn:after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%);
    transform-origin: 50% 50%;
}

@keyframes ripple {
    0% {
        transform: scale(0, 0);
        opacity: 0.5;
    }
    100% {
        transform: scale(100, 100);
        opacity: 0;
    }
}

.wallet-btn:active:after,
.wallet-action-btn:active:after,
.option-btn:active:after,
.tab:active:after,
.copy-btn:active:after {
    animation: ripple 0.4s ease-out;
}

/* Notification styles for success/error messages */
.notification {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 20px;
    border-radius: 8px;
    color: white;
    font-weight: 500;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 2000;
    display: flex;
    align-items: center;
    max-width: 90%;
    animation: notificationFadeIn 0.3s ease, notificationFadeOut 0.3s ease 2.7s forwards;
}

.notification.success {
    background-color: var(--success-color);
}

.notification.error {
    background-color: var(--danger-color);
}

.notification.warning {
    background-color: var(--warning-color);
}

.notification i {
    margin-right: 10px;
    font-size: 1.2rem;
}

@keyframes notificationFadeIn {
    from {
        opacity: 0;
        transform: translate(-50%, 20px);
    }
    to {
        opacity: 1;
        transform: translate(-50%, 0);
    }
}

@keyframes notificationFadeOut {
    from {
        opacity: 1;
        transform: translate(-50%, 0);
    }
    to {
        opacity: 0;
        transform: translate(-50%, 20px);
    }
}

/* Print styles */
@media print {
    .wallet-modal,
    .feature-modal,
    .modal-overlay {
        display: none !important;
    }
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    .wallet-container,
    .feature-modal-content {
        animation: none !important;
    }
    
    .notification {
        animation: none !important;
        opacity: 1;
        transform: translateX(-50%);
    }
}






/* Buy Coins Modal Styles - Cleaned Version */
.buy-coins-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 2000;
  display: none;
  animation: fadeIn 0.3s ease-in-out;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

.buyCoins-modal-content {
  position: relative;
  width: 90%;
  max-width: 800px;
  min-height: 90vh;
  margin: 2rem auto;
  background-color: #fff;
  border-radius: 8px;
  overflow: visible;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  animation: slideInUp 0.3s ease-out;
}

.buyCoins-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem 2rem;
  background-color: #1a1a2e;
  color: white;
  flex-shrink: 0;
}

.buyCoins-modal-header h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
}

.close-buycoins {
  background: none;
  border: none;
  color: white;
  font-size: 2rem;
  cursor: pointer;
  transition: color 0.2s;
  padding: 0;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  touch-action: manipulation;
}

.close-buycoins:hover {
  color: #e74c3c;
}

.close-buycoins:focus {
  outline: 2px solid #473ce7;
  outline-offset: 2px;
}

/* Modal Tabs */
.buyCoins-modal-tabs {
  display: flex;
  background-color: #2c3e50;
  border-bottom: 1px solid #34495e;
  flex-shrink: 0;
}

.buyCoins-tab-btn {
  flex: 1;
  padding: 1rem 1.5rem;
  background-color: transparent;
  color: #bdc3c7;
  border: none;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 500;
  transition: all 0.3s;
  min-height: 48px;
  touch-action: manipulation;
}

.buyCoins-tab-btn.active {
  background-color: #3f3ce7;
  color: white;
}

.buyCoins-tab-btn:hover {
  background-color: #34495e;
  color: white;
}

.buyCoins-tab-btn:focus {
  outline: 2px solid #473ce7;
  outline-offset: -2px;
}

/* Tab Content */
.buyCoins-tab-content {
  display: none;
  padding: 2rem;
  width: 100%;
}

.buyCoins-tab-content.active {
  display: block;
}

/* Coin Purchase Form */
.coin-purchase-form h3 {
  margin: 0 0 1rem 0;
  color: #2c3e50;
  font-size: 1.3rem;
}

.coin-rate-info {
  background-color: #e8f4fd;
  color: #2980b9;
  padding: 0.8rem 1rem;
  border-radius: 6px;
  margin-bottom: 1.5rem;
  font-weight: 500;
  border-left: 4px solid #3498db;
}

/* Coin Packages */
.coin-packages {
  display: grid;
  gap: 1rem;
  margin-bottom: 2rem;
}

.buyCoins-package-option {
  display: flex;
  align-items: center;
  padding: 1rem 1.2rem;
  border: 2px solid #ecf0f1;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  background-color: #fff;
  min-height: 60px;
  touch-action: manipulation;
}

.buyCoins-package-option:hover {
  border-color: #3498db;
  box-shadow: 0 2px 8px rgba(52, 152, 219, 0.1);
}

.buyCoins-package-option input[type="radio"] {
  margin-right: 1rem;
  transform: scale(1.2);
  accent-color: #3498db;
}

.buyCoins-package-option:has(input:checked) {
  border-color: #3498db;
  background-color: #f8fcff;
  box-shadow: 0 4px 12px rgba(52, 152, 219, 0.15);
}

.buyCoins-package-option label {
  flex: 1;
  cursor: pointer;
  font-size: 1rem;
  color: #2c3e50;
  margin: 0;
}

.buyCoins-price {
  font-weight: bold;
  color: #27ae60;
  font-size: 1.1rem;
  margin-right: 0.5rem;
}

.buyCoins-bonus-tag {
  background-color: #e74c3c;
  color: white;
  padding: 0.3rem 0.6rem;
  border-radius: 12px;
  font-size: 0.8rem;
  font-weight: bold;
  position: absolute;
  right: 1rem;
  top: -8px;
}

.instruction-note {
  background-color: #d1ecf1;
  color: #0c5460;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1.5rem;
  border-left: 4px solid #17a2b8;
}

/* Payment Confirmation Form */
.payment-confirmation-form h3 {
  margin: 0 0 1rem 0;
  color: #2c3e50;
  font-size: 1.3rem;
}

/* Summary Section */
.buyCoins-summary-section {
  background-color: #f8f9fa;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  border: 1px solid #e9ecef;
}

.buyCoins-summary-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.8rem;
  font-size: 1rem;
}

.buyCoins-summary-row:last-child {
  margin-bottom: 0;
  font-weight: bold;
  font-size: 1.1rem;
  color: #2c3e50;
  border-top: 1px solid #dee2e6;
  padding-top: 0.8rem;
}

/* Payment Instructions */
.payment-instructions {
  margin-top: 2rem;
  padding: 1.5rem;
  background-color: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: 8px;
}

.payment-instructions h3 {
  color: #856404;
  margin: 0 0 1rem 0;
}

.account-details {
  background-color: white;
  padding: 1.5rem;
  border-radius: 6px;
  margin-bottom: 1.5rem;
  border: 1px solid #f1c40f;
}

.buyCoins-detail-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  padding-bottom: 0.8rem;
  border-bottom: 1px solid #ecf0f1;
}

.buyCoins-detail-row:last-child {
  margin-bottom: 0;
  border-bottom: none;
  padding-bottom: 0;
}

.buyCoins-detail-label {
  font-weight: 600;
  color: #2c3e50;
}

.buyCoins-detail-value {
  font-weight: bold;
  color: #27ae60;
  font-size: 1.1rem;
}

.buyCoins-copy-btn {
  background-color: #3498db;
  color: white;
  border: none;
  padding: 0.4rem 0.8rem;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  margin-left: 0.5rem;
  transition: background-color 0.2s;
  min-height: 36px;
  touch-action: manipulation;
}

/* Form Styles */
.buyCoins-form-group {
  margin-bottom: 1.5rem;
}

.buyCoins-form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: #2c3e50;
}

.buyCoins-form-group input {
  width: 100%;
  padding: 0.8rem 1rem;
  border: 2px solid #ecf0f1;
  border-radius: 6px;
  font-size: 16px;
  transition: border-color 0.3s;
  box-sizing: border-box;
}

.buyCoins-form-group input:focus {
  outline: none;
  border-color: #3498db;
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
}

.buyCoins-confirmation-info {
  color: #7f8c8d;
  margin-bottom: 2rem;
  line-height: 1.5;
}

.buyCoins-verification-notice {
  background-color: #e8f5e8;
  color: #155724;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1.5rem;
  border-left: 4px solid #28a745;
}

/* Confirmation Success */
.confirmation-success {
  text-align: center;
  padding: 2rem;
}

.success-icon {
  font-size: 4rem;
  color: #28a745;
  margin-bottom: 1rem;
}

.confirmation-success h3 {
  color: #28a745;
  margin-bottom: 1rem;
  font-size: 1.5rem;
}

.confirmation-success p {
  color: #6c757d;
  margin-bottom: 1.5rem;
  line-height: 1.5;
}

.pending-info {
  background-color: #fff3cd;
  color: #856404;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 2rem;
  border: 1px solid #ffeaa7;
}

.pending-info span {
  font-weight: bold;
  color: #2c3e50;
}

/* Buttons */
.btn {
  padding: 0.8rem 2rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.3s;
  text-decoration: none;
  display: inline-block;
  text-align: center;
  min-height: 48px;
  touch-action: manipulation;
}

.btn-success {
  background-color: #28a745;
  color: white;
}

.btn-primary {
  background-color: #3498db;
  color: white;
}

.btn-secondary {
  background-color: #6c757d;
  color: white;
}

.tab-nav-btn {
  background-color: #f39c12;
  color: white;
  padding: 0.8rem 1.5rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  transition: background-color 0.3s;
  min-height: 48px;
  touch-action: manipulation;
}

/* Utility Classes */
.hidden {
  display: none !important;
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .buy-coins-modal {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .buyCoins-modal-content {
    width: 100%;
    min-height: 100vh;
    margin: 0;
    border-radius: 0;
    height: auto;
  }
  
  .buyCoins-tab-content {
    padding: 1rem;
    overflow: visible;
  }
  
  .buyCoins-modal-header {
    padding: 1rem 1.5rem;
  }
  
  .buyCoins-modal-header h2 {
    font-size: 1.3rem;
  }
  
  .buyCoins-package-option {
    padding: 0.8rem 1rem;
    flex-wrap: wrap;
  }
  
  .buyCoins-bonus-tag {
    position: static;
    margin-top: 0.5rem;
    align-self: flex-start;
  }
  
  .buyCoins-detail-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .buyCoins-copy-btn {
    margin-left: 0;
    margin-top: 0.5rem;
  }
}

@media (max-width: 480px) {
  .buyCoins-modal-tabs {
    flex-direction: column;
  }
  
  .buyCoins-tab-btn {
    padding: 0.8rem 1rem;
    font-size: 0.9rem;
  }
  
  .buyCoins-tab-content {
    padding: 1rem;
    padding-bottom: 3rem;
  }
  
  .coin-packages {
    gap: 0.8rem;
    margin-bottom: 3rem;
  }
  
  .buyCoins-summary-section {
    margin-bottom: 3rem;
  }
  
   .btn {
    margin-bottom: 2rem;
    width: 100%;
  }
}

/* iOS specific fixes */
@supports (-webkit-appearance: none) {
  .buy-coins-modal {
    height: 100vh;
    height: -webkit-fill-available;
  }
  
  @media (max-width: 768px) {
    .buyCoins-modal-content {
      min-height: 100vh;
      min-height: -webkit-fill-available;
    }
  }
}

/* Android Chrome specific fixes */
@media screen and (max-width: 768px) {
  .buy-coins-modal {
    overflow-y: scroll !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain;
  }
  
  .buyCoins-modal-content {
    max-height: none !important;
    height: auto !important;
    overflow: visible !important;
  }
  
  .buyCoins-tab-content {
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
  }
}

/* Prevent zoom on double tap */
.buy-coins-modal * {
  touch-action: manipulation;
}

/* Ensure proper touch scrolling */
.buy-coins-modal {
  scroll-behavior: smooth;
}

/* Fix for very small screens */
@media (max-height: 500px) {
  .buyCoins-modal-content {
    margin: 0.5rem auto;
    min-height: calc(100vh - 1rem);
  }
}

/* Focus and Accessibility */
.buyCoins-package-option:focus-within {
  border-color: #3498db;
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
}

.btn:focus {
  outline: 2px solid #2c3e50;
  outline-offset: 2px;
}

.tab-nav-btn:focus {
  outline: 2px solid #2c3e50;
  outline-offset: 2px;
}

/* Loading States */
.btn.loading {
  opacity: 0.7;
  cursor: not-allowed;
  position: relative;
}

.btn.loading::after {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  margin: auto;
  border: 2px solid transparent;
  border-top-color: currentColor;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

@keyframes spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Error States */
.buyCoins-form-group.error input {
  border-color: #e74c3c;
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
}

.buyCoins-form-group .error-message {
  color: #e74c3c;
  font-size: 0.85rem;
  margin-top: 0.5rem;
  display: block;
}

/* Success States */
.buyCoins-form-group.success input {
  border-color: #28a745;
  box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
}

/* Copy Button Animation */
.buyCoins-copy-btn.copied {
  background-color: #28a745;
  animation: pulse 0.3s ease-in-out;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Enhanced Package Selection Animation */
.buyCoins-package-option {
  transform: translateY(0);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.buyCoins-package-option:hover {
  transform: translateY(-2px);
}

.buyCoins-package-option:has(input:checked) {
  transform: translateY(-2px);
  animation: selectPackage 0.4s ease-out;
}

@keyframes selectPackage {
  0% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-4px) scale(1.02);
  }
  100% {
    transform: translateY(-2px) scale(1);
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .buy-coins-modal,
  .buyCoins-modal-content,
  .buyCoins-package-option,
  .btn {
    animation: none;
    transition: none;
  }
  
  .buyCoins-package-option:hover,
  .buyCoins-package-option:has(input:checked) {
    transform: none;
  }
}
 

/* Withdraw Modal - Universal Mobile Responsive Styles */
.withdraw-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #ffffff;
  z-index: 2000;
  display: none;
  animation: fadeIn 0.3s ease-in-out;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  /* Prevent body scroll on mobile */
  overscroll-behavior: contain;
}

.withdraw-modal-content {
  position: relative;
  width: 100%;
  max-width: 100%;
  min-height: 100vh;
  margin: 0;
  background-color: #1a1a2e;
  border-radius: 0;
  overflow: visible;
  display: flex;
  flex-direction: column;
  box-shadow: none;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  animation: slideInUp 0.3s ease-out;
}

/* PIN Verification Screen */
.pin-verification-content {
    padding: 20px 16px;
    text-align: center;
    background-color: #1a1a2e;
    max-width: 100%;
    box-sizing: border-box;
}

.pin-icon {
    font-size: 2.5rem;
    color: #4a6cf7;
    margin-bottom: 15px;
}

.pin-verification-content h3 {
    font-size: 1.2rem;
    margin-bottom: 8px;
    color: #ffffff;
    line-height: 1.4;
}

.pin-verification-content p {
    color: #ece7e7;
    margin-bottom: 20px;
    font-size: 0.9rem;
    line-height: 1.5;
    max-width: 300px;
    margin-left: auto;
    margin-right: auto;
}

.pin-input-container {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    max-width: 280px;
    margin-left: auto;
    margin-right: auto;
}

.pin-digit {
    width: 45px;
    height: 50px;
    font-size: 1.3rem;
    text-align: center;
    border: 1.5px solid #ddd;
    border-radius: 8px;
    background-color: #1a1a2e;
    color: #ffffff;
    transition: all 0.2s ease;
    box-sizing: border-box;
    flex-shrink: 0;
}

.pin-digit:focus {
    border-color: #4a6cf7;
    box-shadow: 0 0 0 2px rgba(74, 108, 247, 0.2);
    outline: none;
}

.error-message {
    color: #dc3545;
    font-size: 0.85rem;
    margin-bottom: 15px;
    min-height: 18px;
    line-height: 1.4;
}

/* Tablet styles */
@media (max-width: 768px) {
    .pin-verification-content {
        padding: 16px 12px;
    }
    
    .pin-icon {
        font-size: 2.2rem;
        margin-bottom: 12px;
    }
    
    .pin-verification-content h3 {
        font-size: 1.1rem;
    }
    
    .pin-verification-content p {
        font-size: 0.85rem;
        margin-bottom: 18px;
    }
    
    .pin-digit {
        width: 42px;
        height: 48px;
        font-size: 1.2rem;
    }
    
    .pin-input-container {
        gap: 8px;
        margin-bottom: 18px;
    }
}

/* Mobile styles */
@media (max-width: 480px) {
    .pin-verification-content {
        padding: 12px 8px;
    }
    
    .pin-icon {
        font-size: 2rem;
        margin-bottom: 10px;
    }
    
    .pin-verification-content h3 {
        font-size: 1rem;
        margin-bottom: 6px;
    }
    
    .pin-verification-content p {
        font-size: 0.8rem;
        margin-bottom: 16px;
        padding: 0 10px;
    }
    
    .pin-digit {
        width: 38px;
        height: 44px;
        font-size: 1.1rem;
    }
    
    .pin-input-container {
        gap: 6px;
        margin-bottom: 16px;
        max-width: 200px;
    }
    
    .error-message {
        font-size: 0.8rem;
        margin-bottom: 12px;
        padding: 0 10px;
    }
}

/* Extra small mobile styles */
@media (max-width: 320px) {
    .pin-verification-content {
        padding: 10px 6px;
    }
    
    .pin-digit {
        width: 35px;
        height: 40px;
        font-size: 1rem;
    }
    
    .pin-input-container {
        gap: 4px;
        max-width: 180px;
    }
    
    .pin-verification-content h3 {
        font-size: 0.95rem;
    }
    
    .pin-verification-content p {
        font-size: 0.75rem;
    }
}

/* Landscape orientation adjustments */
@media (max-height: 500px) and (orientation: landscape) {
    .pin-verification-content {
        padding: 8px 16px;
    }
    
    .pin-icon {
        font-size: 1.8rem;
        margin-bottom: 8px;
    }
    
    .pin-verification-content h3 {
        margin-bottom: 4px;
    }
    
    .pin-verification-content p {
        margin-bottom: 12px;
    }
    
    .pin-input-container {
        margin-bottom: 12px;
    }
    
    .error-message {
        margin-bottom: 8px;
    }
}




/* Withdrawal Modal Base Styles */
.withdrawmodal-screen
 {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
  max-width: 100%;
  min-height: 100vh;
  margin: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
}


.withdrawmodal-screen.active 
.modal-screen.active
{
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Withdrawal Form Screen */
#withdrawFormScreen {
    background-color: #fff;
    border-radius: 12px;
    padding: 20px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    animation: slideIn 0.3s ease-out;
}

/* Modal Header */
.withdraw-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    border-bottom: 1px solid #e5e7eb;
    background-color: #f8fafc;
    border-radius: 12px 12px 0 0;
}

.withdraw-modal-header h2 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
    color: #1f2937;
}

.close-withdraw-modal {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #111111;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s ease;
}

.close-withdraw-modal:hover {
   color: 
rgb(81, 67, 55)rgb(81, 61, 55)rgb(81, 58, 55)rgb(184, 50, 32);
}
/* Form Content */
.withdraw-form-content {
    padding: 24px;
    width:100%;
}


.balance-info {
    background-color: #1a1a2e;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 16px;
    border: 1px solid #eaeaea;
}

.balance-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
    font-size: 0.9rem;
}

.balance-item:last-child {
    margin-bottom: 0;
}

.balance-label {
    font-weight: 500;
    color: #faf9f9;
}

.balance-value {
    font-weight: 600;
    color: #f7f5f5;
}
 


.amount-preview {
    background-color: #1a1a2e;
    border-radius: 8px;
    padding: 10px 12px;
    margin-bottom: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #d1e0ff;
    font-size: 0.9rem;
}

#nairaAmount {
    font-weight: 700;
    font-size: 1rem;
    color: #4a6cf7;
}

/* Form Groups */
.withdraw-form-group {
    margin-bottom: 20px;
}

.withdraw-form-group label {
    display: block;
    margin-bottom: 6px;
    font-weight: 500;
    color: #374151;
    font-size: 0.9rem;
}

.withdraw-form-group input,
.withdraw-form-group select {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 1rem;
    transition: border-color 0.2s ease;
    box-sizing: border-box;
}

.withdraw-form-group input:focus,
.withdraw-form-group select:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.input-note {
    display: block;
    margin-top: 4px;
    font-size: 0.8rem;
    color: #6b7280;
}




/* Account Verification */
.withdraw-form-group:has(#accountName) {
    position: relative;
}

#verifyAccountBtn {
    position: absolute;
    right: 8px;
    top: -60px;
    padding: 6px 12px;
    font-size: 0.8rem;
}

/* Fee Summary */
.withdraw-fee-summary {
    background-color: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 24px;
    color:#333;
}

.withdraw-summary-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    font-size: 0.9rem;
}

.withdraw-summary-row:last-child {
    margin-bottom: 0;
}

.withdraw-summary-row.total {
    border-top: 1px solid #e5e7eb;
    padding-top: 8px;
    margin-top: 8px;
    font-weight: 600;
    color: #1f2937;
}

/* Buttons */
.btn {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    text-decoration: none;
    display: inline-block;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-primary {
    background-color: #3b82f6;
    color: white;
}

.btn-primary:hover:not(:disabled) {
    background-color: #2563eb;
}

.btn-secondary {
    background-color: #6b7280;
    color: white;
}

.btn-secondary:hover:not(:disabled) {
    background-color: #4b5563;
}

.btn-success {
    background-color: #10b981;
    color: white;
    width: 100%;
}

.btn-success:hover:not(:disabled) {
    background-color: #059669;
}

.btn-sm {
    padding: 6px 12px;
    font-size: 0.8rem;
}

/* Processing Screen */
.withdrawprocessing-content {
    background-color: #fff;
    border-radius: 12px;
    padding: 40px;
    text-align: center;
    max-width: 400px;
    width: 100%;
}

.loader {
    border: 4px solid #f3f4f6;
    border-top: 4px solid #3b82f6;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
    margin: 0 auto 20px;
}

.withdrawprocessing-content h3 {
    margin: 0 0 12px 0;
    color: #1f2937;
    font-size: 1.3rem;
}

.withdrawprocessing-content p {
    margin: 0;
    color: #6b7280;
}

/* Success Screen */
.withdrawsuccess-content {
    background-color: #fff;
    border-radius: 12px;
    padding: 40px;
    text-align: center;
    max-width: 500px;
    width: 100%;
}

.success-icon {
    font-size: 4rem;
    color: #10b981;
    margin-bottom: 20px;
}

.withdrawsuccess-content h3 {
    margin: 0 0 12px 0;
    color: #1f2937;
    font-size: 1.5rem;
}

.withdrawsuccess-content > p {
    margin: 0 0 24px 0;
    color: #6b7280;
}

/* Transaction Details */
.withdrawtransaction-details {
    background-color: #f9fafb;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    text-align: left;
}

.withdrawdetail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid #e5e7eb;
}

.withdrawdetail-row:last-child {
    margin-bottom: 0;
    border-bottom: none;
    padding-bottom: 0;
}

.withdrawdetail-label {
    font-weight: 500;
    color: #6b7280;
    font-size: 0.9rem;
}

.withdrawdetail-value {
    font-weight: 600;
    color: #1f2937;
    text-align: right;
    word-break: break-all;
}

.success-note {
    background-color: #ecfdf5;
    color: #065f46;
    padding: 12px;
    border-radius: 6px;
    margin-bottom: 24px;
    font-size: 0.9rem;
}

/* Error Screen */
.withdrawerror-content {
    background-color: #fff;
    border-radius: 12px;
    padding: 40px;
    text-align: center;
    max-width: 400px;
    width: 100%;
}

.withdrawerror-icon {
    font-size: 4rem;
    color: #ef4444;
    margin-bottom: 20px;
}

.withdrawerror-content h3 {
    margin: 0 0 12px 0;
    color: #1f2937;
    font-size: 1.3rem;
}

.withdrawerror-content p {
    margin: 0 0 24px 0;
    color: #6b7280;
}

.withdrawerror-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
}

/* Animations */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 768px) {
    .withdrawmodal-screen {
        padding: 10px;
        align-items: flex-start;
        padding-top: 20px;
    }
    
    #withdrawFormScreen {
        max-height: calc(100vh - 40px);
        margin: 0;
    }
    
    .withdraw-modal-header {
        padding: 16px 20px;
    }
    
    .withdraw-modal-header h2 {
        font-size: 1.3rem;
    }
    
    .withdraw-form-content {
        padding: 20px;
    }
    
    
    .withdraw-form-group {
        margin-bottom: 16px;
    }
    
    .withdraw-form-group input,
    .withdraw-form-group select {
        padding: 10px 14px;
        font-size: 16px; /* Prevents zoom on iOS */
    }
    
    .withdrawdetail-value {
        font-size: 0.85rem;
        max-width: 60%;
    }
    
    .withdrawerror-actions {
        flex-direction: column;
    }
    
    .withdrawerror-actions .btn {
        width: 100%;
    }
    
    .withdrawprocessing-content,
    .withdrawsuccess-content,
    .withdrawerror-content {
        padding: 30px 20px;
    }
}

@media (max-width: 480px) {
    .withdrawmodal-screen {
        padding: 5px;
        padding-top: 10px;
    }
    
    .withdraw-modal-header {
        padding: 12px 16px;
    }
    
    .withdraw-form-content {
        padding: 16px;
    }
    
    
    .withdrawdetail-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
    }
    
    .withdrawdetail-value {
        max-width: 100%;
        text-align: left;
    }
    
    #verifyAccountBtn {
        position: static;
        margin-top: 8px;
        width: 100%;
    }
}

   
 

/* Focus management for accessibility */
.withdrawmodal-screen:focus-within {
    outline: none;
}

.withdraw-form-group input:invalid {
    border-color: #ef4444;
}

.withdraw-form-group input:invalid:focus {
    border-color: #ef4444;
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
}

/* Loading states */
.btn.loading {
    position: relative;
    color: transparent;
}

.btn.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 16px;
    height: 16px;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    color: white;
}

/* Tooltip styles for form validation */
.withdraw-form-group {
    position: relative;
}

.withdraw-form-group .error-tooltip {
    position: absolute;
    top: 100%;
    left: 0;
    background-color: #ef4444;
    color: white;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 0.8rem;
    margin-top: 4px;
    z-index: 10;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.2s ease;
    pointer-events: none;
}

.withdraw-form-group .error-tooltip.show {
    opacity: 1;
    transform: translateY(0);
}

.withdraw-form-group .error-tooltip::before {
    content: '';
    position: absolute;
    top: -4px;
    left: 10px;
    width: 0;
    height: 0;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-bottom: 4px solid #ef4444;
}

/* Success states */
.withdraw-form-group input.success {
    border-color: #10b981;
}

.withdraw-form-group input.success:focus {
    border-color: #10b981;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

/* Custom scrollbar for modal content */
.withdrawmodal-screen::-webkit-scrollbar {
    width: 8px;
}

.withdrawmodal-screen::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.withdrawmodal-screen::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
}

.withdrawmodal-screen::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* Firefox scrollbar */
.withdrawmodal-screen {
    scrollbar-width: thin;
    scrollbar-color: #c1c1c1 #f1f1f1;
}

/* Additional utility classes */
.text-center {
    text-align: center;
}

.text-left {
    text-align: left;
}

.text-right {
    text-align: right;
}

.mb-0 {
    margin-bottom: 0;
}

.mt-0 {
    margin-top: 0;
}

.hidden {
    display: none;
}

.visible {
    display: block;
}

/* Animation for screen transitions */
.withdrawmodal-screen.fade-in {
    animation: fadeIn 0.3s ease-in-out;
}

.withdrawmodal-screen.fade-out {
    animation: fadeOut 0.3s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

/* Pulse animation for important elements */
.pulse {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

/* Shake animation for errors */
.shake {
    animation: shake 0.5s ease-in-out;
}

@keyframes shake {
    0%, 100% {
        transform: translateX(0);
    }
    25% {
        transform: translateX(-5px);
    }
    75% {
        transform: translateX(5px);
    }
}



/* Transaction History Modal - Core Styles with BuyCoins Scrolling */
.transaction-modal,
.transaction-details-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 2000;
  display: none;
  animation: fadeIn 0.3s ease-in-out;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

.Historymodal-content
.withdraw-modal-content  {
  position: relative;
  width: 95%;
  max-width: 1200px;
  min-height: 90vh;
  margin: 2rem auto;
  background-color: #fff;
  border-radius: 12px;
  overflow: visible;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  animation: slideInUp 0.3s ease-out;
}

/* Modal Header */
.Historymodal-header,
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem 2rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 12px 12px 0 0;
  flex-shrink: 0;
}

.Historymodal-header h2,
.modal-header h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
}

.close-History {
  background: none;
  border: none;
  color: white;
  font-size: 2rem;
  cursor: pointer;
  transition: all 0.3s ease;
  padding: 0;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  touch-action: manipulation;
}

.close-History:hover {
  background-color: rgba(255, 255, 255, 0.2);
  transform: rotate(90deg);
}

/* Filters Section */
.Historytransaction-filters {
  padding: 2rem;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-bottom: 1px solid #dee2e6;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  align-items: end;
}

.Historyfilter-group {
  display: flex;
  flex-direction: column;
}

.Historyfilter-group label {
  font-weight: 600;
  color: #495057;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
}

.Historyfilter-group select {
  padding: 0.8rem;
  border: 2px solid #e1e8ed;
  border-radius: 8px;
  font-size: 14px;
  background-color: #fff;
  transition: all 0.3s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.Historyfilter-group select:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.Historyfilter-btn {
  padding: 0.8rem 1.5rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
  touch-action: manipulation;
}

.Historyfilter-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}

/* Transaction Summary */
.transaction-summary {
  padding: 2rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  background-color: #fff;
  border-bottom: 1px solid #dee2e6;
}

.Historysummary-card {
  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
  padding: 1.5rem;
  border-radius: 12px;
  text-align: center;
  border: 1px solid #e9ecef;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
}

.Historysummary-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.Historysummary-card h4 {
  margin: 0 0 1rem 0;
  color: #495057;
  font-size: 1rem;
  font-weight: 600;
}

.Historysummary-card p {
  margin: 0;
  font-size: 1.5rem;
  font-weight: bold;
  color: #28a745;
}

/* Transaction Table Container */
.transaction-table-container {
  flex: 1;
  padding: 2rem;
  overflow-x: auto;
  position: relative;
}

.transaction-table {
  width: 100%;
  border-collapse: collapse;
  background-color: #fff;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.transaction-table thead {
  background: linear-gradient(135deg, #495057 0%, #343a40 100%);
  color: white;
}

.transaction-table th,
.transaction-table td {
  padding: 1rem;
  text-align: left;
  border-bottom: 1px solid #dee2e6;
}

.transaction-table th {
  font-weight: 600;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.transaction-table tbody tr {
  transition: all 0.3s ease;
}

.transaction-table tbody tr:hover {
  background-color: #f8f9fa;
  transform: scale(1.01);
}

.transaction-table tbody tr:last-child td {
  border-bottom: none;
}

/* Transaction Status Badges */
.status-completed {
  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: uppercase;
}

.status-pending {
  background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: uppercase;
}

.status-failed {
  background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: uppercase;
}

/* Transaction Type Badges */
.type-purchase {
  color: #007bff;
  font-weight: 600;
}

.type-withdrawal {
  color: #dc3545;
  font-weight: 600;
}

.type-commission {
  color: #28a745;
  font-weight: 600;
}

.type-earning {
  color: #17a2b8;
  font-weight: 600;
}

/* Empty State */
.empty-state {
  display: none;
  text-align: center;
  padding: 3rem;
  color: #6c757d;
}

.empty-state.show {
  display: block;
}

.empty-state i {
  font-size: 3rem;
  margin-bottom: 1rem;
  color: #adb5bd;
}

.empty-state p {
  font-size: 1.2rem;
  margin-bottom: 0.5rem;
  font-weight: 600;
}

.empty-state span {
  font-size: 0.9rem;
  color: #adb5bd;
}

/* Loading State */
.loading-transactions {
  display: none;
  text-align: center;
  padding: 3rem;
  color: #667eea;
}

.loading-transactions.show {
  display: block;
}

.loading-transactions i {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.loading-transactions p {
  font-size: 1.1rem;
  font-weight: 600;
}

/* Pagination */
.History-pagination {
  padding: 1.5rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #f8f9fa;
  border-top: 1px solid #dee2e6;
}

.pagination-btn {
  padding: 0.8rem 1.5rem;
  background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  touch-action: manipulation;
}

.pagination-btn:disabled {
  background: #e9ecef;
  color: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.pagination-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
}

#pageIndicator {
  font-weight: 600;
  color: #495057;
}

/* Export Section */
.Historyexport-section {
  padding: 1.5rem 2rem;
  background-color: #fff;
  border-top: 1px solid #dee2e6;
  display: flex;
  gap: 1rem;
  justify-content: center;
}

.export-btn {
  padding: 0.8rem 1.5rem;
  background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  box-shadow: 0 2px 8px rgba(23, 162, 184, 0.3);
  touch-action: manipulation;
}

.export-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(23, 162, 184, 0.4);
}

/* Transaction Details Modal */
.transaction-details-modal .Historymodal-content {
  max-width: 600px;
}

.transaction-details-content {
  padding: 2rem;
  flex: 1;
}

.Historymodal-footer {
  padding: 1.5rem 2rem;
  background-color: #f8f9fa;
  border-top: 1px solid #dee2e6;
  display: flex;
  justify-content: flex-end;
  border-radius: 0 0 12px 12px;
}

.btn {
  padding: 0.8rem 1.5rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  touch-action: manipulation;
}

.btn-secondary {
  background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
  color: white;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .transaction-modal,
  .transaction-details-modal {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .Historymodal-content {
    width: 100%;
    min-height: 100vh;
    margin: 0;
    border-radius: 0;
    height: auto;
  }
  
  .Historymodal-header,
  .modal-header {
    padding: 1rem 1.5rem;
    border-radius: 0;
  }
  
  .Historymodal-header h2,
  .modal-header h2 {
    font-size: 1.3rem;
  }
  
  .Historytransaction-filters {
    padding: 1.5rem;
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  
  .transaction-summary {
    padding: 1.5rem;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }
  
  .transaction-table-container {
    padding: 1rem;
    overflow-x: auto;
  }
  
  .transaction-table {
    min-width: 600px;
  
      padding: 0.8rem 0.5rem;
    font-size: 0.9rem;
  }
  
  .History-pagination {
    padding: 1rem 1.5rem;
    flex-direction: column;
    gap: 1rem;
  }
  
  .pagination-btn {
    width: 100%;
    justify-content: center;
  }
  
  .Historyexport-section {
    padding: 1rem 1.5rem;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .export-btn {
    width: 100%;
    justify-content: center;
  }
  
  .transaction-details-content {
    padding: 1.5rem;
  }
  
  .Historymodal-footer {
    padding: 1rem 1.5rem;
  }
}

@media (max-width: 480px) {
  .Historymodal-header,
  .modal-header {
    padding: 1rem;
  }
  
  .Historymodal-header h2,
  .modal-header h2 {
    font-size: 1.2rem;
  }
  
  .close-History {
    width: 40px;
    height: 40px;
    font-size: 1.5rem;
  }
  
  .Historytransaction-filters {
    padding: 1rem;
  }
  
  .transaction-summary {
    padding: 1rem;
    grid-template-columns: 1fr;
  }
  
  .Historysummary-card {
    padding: 1rem;
  }
  
  .Historysummary-card h4 {
    font-size: 0.9rem;
  }
  
  .Historysummary-card p {
    font-size: 1.3rem;
  }
  
  .transaction-table th,
  .transaction-table td {
    padding: 0.6rem 0.3rem;
    font-size: 0.8rem;
  }
  
  .status-completed,
  .status-pending,
  .status-failed {
    padding: 0.2rem 0.5rem;
    font-size: 0.7rem;
  }
}

/* iOS specific fixes */
@supports (-webkit-appearance: none) {
  .transaction-modal,
  .transaction-details-modal {
    height: 100vh;
    height: -webkit-fill-available;
  }
  
  @media (max-width: 768px) {
    .Historymodal-content {
      min-height: 100vh;
      min-height: -webkit-fill-available;
    }
  }
}

/* Android Chrome specific fixes */
@media screen and (max-width: 768px) {
  .transaction-modal,
  .transaction-details-modal {
    overflow-y: scroll !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain;
  }
  
  .Historymodal-content {
    max-height: none !important;
    height: auto !important;
    overflow: visible !important;
  }
  
  .transaction-table-container {
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
  }
}

/* Prevent zoom on double tap */
.transaction-modal *,
.transaction-details-modal * {
  touch-action: manipulation;
}

/* Ensure proper touch scrolling */
.transaction-modal,
.transaction-details-modal {
  scroll-behavior: smooth;
}

/* Fix for very small screens */
@media (max-height: 500px) {
  .Historymodal-content {
    margin: 0.5rem auto;
    min-height: calc(100vh - 1rem);
  }
}

/* Focus and Accessibility */
.Historyfilter-group select:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.Historyfilter-btn:focus,
.pagination-btn:focus,
.export-btn:focus,
.btn:focus {
  outline: 2px solid #495057;
  outline-offset: 2px;
}

/* Loading States */
.Historyfilter-btn.loading,
.pagination-btn.loading,
.export-btn.loading {
  opacity: 0.7;
  cursor: not-allowed;
  position: relative;
}

.Historyfilter-btn.loading::after,
.pagination-btn.loading::after,
.export-btn.loading::after {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  margin: auto;
  border: 2px solid transparent;
  border-top-color: currentColor;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Table Responsive Enhancements */
@media (max-width: 600px) {
  .transaction-table {
    font-size: 0.8rem;
  }
  
  .transaction-table th:nth-child(5),
  .transaction-table td:nth-child(5) {
    display: none;
  }
}

@media (max-width: 400px) {
  .transaction-table th:nth-child(4),
  .transaction-table td:nth-child(4) {
    display: none;
  }
}

/* Enhanced Button Animations */
.Historyfilter-btn,
.pagination-btn,
.export-btn,
.btn {
  transform: translateY(0);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.Historyfilter-btn:active:not(:disabled),
.pagination-btn:active:not(:disabled),
.export-btn:active:not(:disabled),
.btn:active:not(:disabled) {
  transform: translateY(0);
  transition: transform 0.1s;
}

/* Transaction Details Styling */
.transaction-detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 0;
  border-bottom: 1px solid #e9ecef;
}

.transaction-detail-item:last-child {
  border-bottom: none;
}

.transaction-detail-label {
  font-weight: 600;
  color: #495057;
}

.transaction-detail-value {
  font-weight: bold;
  color: #28a745;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .transaction-modal,
  .transaction-details-modal,
  .Historymodal-content,
  .Historyfilter-btn,
  .pagination-btn,
  .export-btn,
  .btn,
  .Historysummary-card,
  .transaction-table tbody tr {
    animation: none;
    transition: none;
  }
  
  .Historyfilter-btn:hover:not(:disabled),
  .pagination-btn:hover:not(:disabled),
  .export-btn:hover:not(:disabled),
  .btn:hover:not(:disabled),
  .Historysummary-card:hover,
  .transaction-table tbody tr:hover {
    transform: none;
    box-shadow: initial;
  }
  
  .close-History:hover {
    transform: none;
  }
  
  .loading-transactions i {
    animation: none;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  .Historymodal-content {
    border: 3px solid #000;
  }
  
  .transaction-table,
  .Historyfilter-group select {
    border-width: 3px;
  }
  
  .Historyfilter-btn,
  .pagination-btn,
  .export-btn,
  .btn {
    border: 2px solid currentColor;
  }
}

/* Print Styles */
@media print {
  .transaction-modal,
  .transaction-details-modal {
    position: static;
    background: white;
  }
  
  .Historymodal-content {
    box-shadow: none;
    border: 1px solid #000;
    max-width: none;
    width: 100%;
  }
  
  .close-History,
  .Historyfilter-btn,
  .pagination-btn,
  .export-btn {
    display: none;
  }
  
  .transaction-table {
    border: 1px solid #000;
  }
  
  .Historytransaction-filters,
  .History-pagination,
  .Historyexport-section {
    display: none;
  }
}

/* Keyboard Navigation Enhancement */
.transaction-modal:focus-within,
.transaction-details-modal:focus-within {
  outline: none;
}

.Historyfilter-group select:focus,
.Historyfilter-btn:focus,
.pagination-btn:focus,
.export-btn:focus {
  z-index: 1;
  position: relative;
}

/* Mobile Keyboard Adjustments */
@media (max-height: 600px) and (max-width: 768px) {
  .Historymodal-content {
    height: 100vh;
  }
  
  .Historytransaction-filters {
    padding: 1rem 1rem 2rem 1rem;
  }
}

/* Very Small Mobile Devices */
@media (max-width: 320px) {
  .Historymodal-header h2,
  .modal-header h2 {
    font-size: 1.1rem;
  }
  
  .close-History {
    width: 36px;
    height: 36px;
    font-size: 1.3rem;
  }
  
  .transaction-table {
    min-width: 500px;
  }
}

/* Landscape Mobile Orientation */
@media (max-height: 500px) and (orientation: landscape) {
  .transaction-summary {
    grid-template-columns: repeat(4, 1fr);
    padding: 1rem;
  }
  
  .Historysummary-card {
    padding: 1rem;
  }
  
  .Historysummary-card h4 {
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
  }
  
  .Historysummary-card p {
    font-size: 1.2rem;
  }
}

/* Scrollbar Styling for Desktop */
@media (min-width: 769px) {
  .transaction-table-container::-webkit-scrollbar {
    height: 8px;
  }
  
  .transaction-table-container::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }
  
  .transaction-table-container::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
  }
  
  .transaction-table-container::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
  }
}



/* Game Portal Styles */
.game-portal-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #f8f9fa;
  z-index: 1000;
  overflow-y: auto;
  display: none;
  animation: fadeIn 0.3s ease-in-out;
}

.game-portal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background-color:  #1a1a2e;
  color: white;
  position: sticky;
  top: 0;
  z-index: 10;
}

.close-portal-btn {
  background: none;
  border: none;
  color: white;
  font-size: 2rem;
  cursor: pointer;
  transition: color 0.2s;
}

.close-portal-btn:hover {
  color: #473ce7;
}

/* Game Categories */
.game-categories {
  display: flex;
  overflow-x: auto;
  padding: 1rem;
  background-color: #1a1a2e;;
  position: sticky;
  top: 60px;
  z-index: 9;
}

.category-btn {
  padding: 0.5rem 1.2rem;
  margin-right: 0.5rem;
  background-color:  #1a1a2e;
  color: white;
  border: none;
  border-radius: 20px;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.2s;
}

.category-btn.active {
  background-color: #3f3ce7;
}

.category-btn:hover {
  background-color:  #3f3ce7;
}

/* Search Bar */
.game-search-container {
  display: flex;
  padding: 1rem 2rem;
  background-color: #ecf0f1;
}

#gameSearch {
  flex: 1;
  padding: 0.8rem 1rem;
  border: 1px solid #ddd;
  border-radius: 4px 0 0 4px;
  font-size: 1rem;
}

.search-btn {
  padding: 0.8rem 1.2rem;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 0 4px 4px 0;
  cursor: pointer;
}

/* Featured Games Carousel */
.featured-games-carousel {
  padding: 1.5rem 2rem;
  background-color:  #1a1a2e;
  color: white;
}

.carousel-container {
  display: flex;
  align-items: center;
  position: relative;
}

.carousel-items {
  display: flex;
  overflow-x: auto;
  scroll-behavior: smooth;
  -ms-overflow-style: none;  /* Hide scrollbar for IE and Edge */
  scrollbar-width: none;  /* Hide scrollbar for Firefox */
  padding: 1rem 0;
}

.carousel-items::-webkit-scrollbar {
  display: none; /* Hide scrollbar for Chrome, Safari and Opera */
}

.carousel-nav {
  background-color:  #1a1a2e;
  color: white;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: absolute;
  z-index: 2;
}

.carousel-nav.prev {
  left: 10px;
}

.carousel-nav.next {
  right: 10px;
}

.featured-game {
  min-width: 280px;
  margin-right: 1.5rem;
  border-radius: 8px;
  overflow: hidden;
  background-color:  #2d2d85;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  transition: transform 0.3s;
}

.featured-game:hover {
  transform: translateY(-5px);
}

.game-thumbnail {
  height: 160px;
  background-size: cover;
  background-position: center;
  position: relative;
}

.game-info {
  padding: 1rem;
}

.game-info h4 {
  margin: 0 0 0.5rem 0;
  color: #ecf0f1;
}

.game-meta {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
  color: #ad1d1d;
}

/* Games Grid */
.games-grid-container {
  padding: 2rem;
  background-color: #1a1a2e;;
  color: #ffffff;
}

.games-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1rem;
}

.game-card {
  border-radius: 8px;
  overflow: hidden;
  background-color: #1a1a2e;;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s, box-shadow 0.3s;
}

.game-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.game-card .game-thumbnail {
  height: 180px;
  position: relative;
}

.game-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transition: opacity 0.3s;
}

.game-card:hover .game-overlay {
  opacity: 1;
}

.play-now-btn {
  padding: 0.8rem 1.5rem;
  background-color: #e74c3c;
  color: white;
  border: none;
  border-radius: 4px;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.2s;
}

.play-now-btn:hover {
  background-color: #c0392b;
}

.game-details {
  padding: 1.2rem;
}

.game-title {
  margin: 0 0 0.5rem 0;
  color: #2c3e50;
}

.game-description {
  color: #7f8c8d;
  font-size: 0.9rem;
  margin: 0.8rem 0;
  line-height: 1.4;
}

.game-stats {
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
  color: #95a5a6;
  margin-top: 1rem;
}

.load-more-btn {
  display: block;
  margin: 2rem auto 0;
  padding: 0.8rem 2rem;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.load-more-btn:hover {
  background-color: #2980b9;
}

/* Recently Played Games */
.recently-played-container {
  padding: 1.5rem 2rem;
  background-color: #ecf0f1;
}

.recently-played-games {
  display: flex;
  overflow-x: auto;
  padding: 1rem 0;
  gap: 1rem;
}

.no-games-message {
  color: #95a5a6;
  font-style: italic;
}


/* Game Modal (continued) */
.game-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 2000;
  animation: fadeIn 0.3s ease-in-out;
}

.game-modal-content {
  position: relative;
  width: 90%;
  max-width: 1200px;
  height: 90%;
  margin: 2% auto;
  background-color: #fff;
  border-radius: 8px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.game-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background-color: #2c3e50;
  color: white;
}

.close-game-modal {
  background: none;
  border: none;
  color: white;
  font-size: 1.8rem;
  cursor: pointer;
  transition: color 0.2s;
}

.close-game-modal:hover {
  color: #e74c3c;
}

.game-modal-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.game-iframe-container {
  flex: 1;
  position: relative;
  background-color: #000;
}

#gameIframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.game-controls {
  display: flex;
  justify-content: flex-end;
  padding: 0.5rem;
  background-color: #34495e;
}

.game-controls button {
  background: none;
  border: none;
  color: white;
  font-size: 1.2rem;
  margin-left: 1rem;
  cursor: pointer;
  transition: color 0.2s;
}

.game-controls button:hover {
  color: #3498db;
}

.game-info-panel {
  padding: 1.5rem;
  max-height: 30%;
  overflow-y: auto;
  display: flex;
  gap: 2rem;
}

.game-description-panel {
  flex: 2;
}

.game-rewards-panel {
  flex: 1;
  background-color: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
}

.reward-tiers {
  margin-top: 1rem;
}

.reward-tier {
  display: flex;
  justify-content: space-between;
  padding: 0.5rem 0;
  border-bottom: 1px solid #eee;
}

.tier-coins {
  font-weight: bold;
  color: #f39c12;
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .games-grid {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  }
  
  .game-info-panel {
    flex-direction: column;
    gap: 1rem;
  }
  
  .featured-game {
    min-width: 220px;
  }
  
  .game-modal-content {
    width: 95%;
    height: 95%;
    margin: 2.5% auto;
  }
}

@media (max-width: 480px) {
  .games-grid {
    grid-template-columns: 1fr;
  }
  
  .game-categories {
    padding: 0.5rem;
  }
  
  .category-btn {
    padding: 0.4rem 0.8rem;
    font-size: 0.9rem;
  }
  
  .game-portal-header h2 {
    font-size: 1.2rem;
  }
}


/* Rewarder Modal Styles */
.rewarder-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    overflow-y: auto;
}

.rewarder-modal.active {
    display: block;
}

.rewarder-modal-content {
    background-color: #fff;
    border-radius: 10px;
    width: 90%;
    max-width: 800px;
    margin: 30px auto;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    animation: modalFadeIn 0.3s ease;
    max-height: 90vh;
    overflow-y: auto;
}
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.rewarder-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid #eee;
    background-color: #f8f9fa;
    border-radius: 10px 10px 0 0;
}

.rewarder-modal-header h2 {
    font-size: 22px;
    margin: 0;
    color: #333;
}

.close-rewarder-modal, .close-rewarder-sub-modal {
    font-size: 24px;
    color: #999;
    cursor: pointer;
    transition: color 0.2s ease;
}

.close-rewarder-modal:hover, .close-rewarder-sub-modal:hover {
    color: #333;
}

.rewarder-modal-body {
    padding: 20px;
}

.rewarder-intro {
    text-align: center;
    color: #666;
    margin-bottom: 20px;
}

/* Bonus Cards Container */
.bonus-cards-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 20px;
}

@media (min-width: 768px) {
    .bonus-cards-container {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* Bonus Card Styles */
.bonus-card {
    background-color: #fff;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease;
    position: relative;
    overflow: hidden;
}

.bonus-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
}

.bonus-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: #f0f7ff;
    margin-bottom: 10px;
    color: #2196f3;
    font-size: 20px;
}

#dailyLoginCard .bonus-icon {
    background-color: #e8f5e9;
    color: #4caf50;
}

#referralCard .bonus-icon {
    background-color: #fff3e0;
    color: #ff9800;
}

#investmentCard .bonus-icon {
    background-color: #e3f2fd;
    color: #2196f3;
}

#journeyCard .bonus-icon {
    background-color: #f3e5f5;
    color: #9c27b0;
}

.bonus-info {
    flex: 1;
}

.bonus-info h3 {
    font-size: 16px;
    margin: 0 0 5px 0;
    color: #333;
}

.bonus-info p {
    font-size: 12px;
    color: #666;
    margin: 0 0 10px 0;
}

.bonus-progress {
    margin-top: 10px;
}

.progress-bar {
    height: 6px;
    background-color: #e0e0e0;
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 5px;
}

.progress-fill {
    height: 100%;
    background-color: #4caf50;
    border-radius: 3px;
    transition: width 0.3s ease;
}

.progress-text {
    font-size: 11px;
    color: #777;
}

.claim-btn {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #4caf50;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 8px 12px;
    margin-top: 10px;
    cursor: pointer;
    font-weight: 500;
    transition: background-color 0.2s ease;
}

.claim-btn:hover {
    background-color: #388e3c;
}

.claim-btn:disabled {
    background-color: #e0e0e0;
    color: #9e9e9e;
    cursor: not-allowed;
}

.coin-amount {
    background-color: rgba(255, 255, 255, 0.2);
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 12px;
    font-weight: bold;
}

/* Advertisement Banner */
.ad-banner {
    width: 100%;
    max-width: 400px;
    height: 60px;
    margin: 20px auto;
    border-radius: 5px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    display: flex;
    justify-content: center;
    align-items: center;
}

.ad-banner img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Rewarder Quests Section */
.rewarder-quests {
    background-color: #fff;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
}

.rewarder-quests h3 {
    font-size: 18px;
    margin: 0 0 15px 0;
    color: #333;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
}

.quest-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.quest-item {
    display: flex;
    align-items: center;
    padding: 15px;
    background-color: #f9f9f9;
    border-radius: 8px;
    transition: transform 0.2s ease;
}

.quest-item:hover {
    transform: translateX(5px);
    background-color: #f5f5f5;
}

.quest-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #e3f2fd;
    color: #2196f3;
    margin-right: 15px;
    flex-shrink: 0;
}

.quest-details {
    flex: 1;
}

.quest-details h4 {
    font-size: 16px;
    margin: 0 0 5px 0;
    color: #333;
}

.quest-details p {
    font-size: 13px;
    color: #666;
    margin: 0 0 10px 0;
}

.quest-progress {
    margin-top: 5px;
}

.quest-reward {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-left: 15px;
}

.quest-btn {
    background-color: #2196f3;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 6px 12px;
    margin-top: 5px;
    cursor: pointer;
    font-weight: 500;
    transition: background-color 0.2s ease;
}

.quest-btn:hover {
    background-color: #1976d2;
}

/* Sub-Modal Styles */
.rewarder-sub-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1100; /* Higher than the main modal */
    overflow-y: auto;
}

.rewarder-sub-modal.active {
    display: block;
}

.rewarder-sub-modal-content {
    background-color: #fff;
    border-radius: 10px;
    width: 90%;
    max-width: 500px;
    margin: 50px auto;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    animation: subModalFadeIn 0.3s ease;
    max-height: 85vh;
    overflow-y: auto;
}

@keyframes subModalFadeIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.rewarder-sub-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid #eee;
    background-color: #f8f9fa;
    border-radius: 10px 10px 0 0;
}

.rewarder-sub-modal-header h2 {
    font-size: 20px;
    margin: 0;
    color: #333;
}

.rewarder-sub-modal-body {
    padding: 20px;
}

/* Referral Sub-Modal Specific Styles */
.referral-info {
    text-align: center;
    margin-bottom: 20px;
}

.referral-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #fff3e0;
    color: #ff9800;
    font-size: 24px;
    margin: 0 auto 15px;
}

.referral-link-container {
    margin: 20px 0;
}

.link-copy-group {
    display: flex;
    margin-top: 5px;
}

.link-copy-group input {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px 0 0 5px;
    font-size: 14px;
}

.copy-btn {
    background-color: #2196f3;
    color: white;
    border: none;
    border-radius: 0 5px 5px 0;
    padding: 0 15px;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.copy-btn:hover {
    background-color: #1976d2;
}

.share-options {
    margin: 20px 0;
}

.social-share-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 10px;
}

.share-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: none;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 18px;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.share-btn:hover {
    transform: scale(1.1);
}

.whatsapp {
    background-color: #25d366;
}

.facebook {
    background-color: #1877f2;
}

.twitter {
    background-color: #1da1f2;
}

.telegram {
    background-color: #0088cc;
}

.referral-stats {
    background-color: #f5f5f5;
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
}

.stat-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.stat-item:last-child {
    margin-bottom: 0;
}

.stat-label {
    color: #666;
}

.stat-value {
    font-weight: bold;
    color: #333;
}

/* Investment Sub-Modal Specific Styles */
.investment-info {
    text-align: center;
    margin-bottom: 20px;
}

.investment-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #e3f2fd;
    color: #2196f3;
    font-size: 24px;
    margin: 0 auto 15px;
}

.investment-plans {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin: 20px 0;
}

.plan-option {
    position: relative;
}

.plan-option input[type="radio"] {
    position: absolute;
    opacity: 0;
}

.plan-option label {
    display: block;
    padding: 15px;
    background-color: #f5f5f5;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.plan-option input[type="radio"]:checked + label {
    background-color: #e3f2fd;
    border: 1px solid #2196f3;
}

.plan-details h4 {
    margin: 0 0 5px 0;
    color: #333;
}

.plan-details p {
    margin: 0;
    color: #666;
    font-size: 14px;
}

.min-amount {
    font-size: 12px;
    color: #999;
    margin-top: 5px !important;
}

.investment-amount {
    margin: 20px 0;
}

.investment-amount label {
    display: block;
    margin-bottom: 5px;
    color: #333;
}

.investment-amount input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
}

.investment-summary {
    background-color: #f5f5f5;
    border-radius: 8px;
    padding: 15px;
    margin: 20px 0;
}

.summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.summary-row:last-child {
    margin-bottom: 0;
}

#confirmInvestmentBtn {
    width: 100%;
    padding: 12px;
    background-color: #4caf50;
    color: white;
    border: none;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

#confirmInvestmentBtn:hover {
    background-color: #388e3c;
}
/* Bonuses Card Specific Styles */
#bonusesCard .bonus-icon {
    background-color: #fce4ec;
    color: #e91e63;
}

/* Bonuses Sub-Modal Styles */
.bonuses-info {
    text-align: center;
    margin-bottom: 20px;
}

.bonuses-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #fce4ec;
    color: #e91e63;
    font-size: 24px;
    margin: 0 auto 15px;
}

.bonuses-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.bonus-item {
    display: flex;
    align-items: center;
    padding: 15px;
    background-color: #f9f9f9;
    border-radius: 8px;
    transition: transform 0.2s ease;
}

.bonus-item:hover {
    transform: translateX(5px);
    background-color: #f5f5f5;
}

.bonus-item-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #fce4ec;
    color: #e91e63;
    margin-right: 15px;
    flex-shrink: 0;
}

.bonus-item-details {
    flex: 1;
}

.bonus-item-details h4 {
    font-size: 16px;
    margin: 0 0 5px 0;
    color: #333;
}

.bonus-item-details p {
    font-size: 13px;
    color: #666;
    margin: 0;
}

.bonus-claim-btn {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #e91e63;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 8px 12px;
    cursor: pointer;
    font-weight: 500;
    transition: background-color 0.2s ease;
}

.bonus-claim-btn:hover {
    background-color: #c2185b;
}

.bonus-claim-btn:disabled {
    background-color: #e0e0e0;
    color: #9e9e9e;
    cursor: not-allowed;
}

/* Adjust grid for 5 cards */
@media (min-width: 768px) {
    .bonus-cards-container {
        grid-template-columns: repeat(5, 1fr);
    }
}

@media (max-width: 767px) {
    .bonus-cards-container {
        grid-template-columns: repeat(2, 1fr);
    }
    
    /* Make the Bonuses card span full width on mobile */
    #bonusesCard {
        grid-column: span 2;
    }
}

/* Utility Classes */
.hidden {
    display: none !important;
}


/* Toast Notification */
.toast {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #059669;
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  font-weight: 500;
  z-index: 10000;
  transform: translateX(100%);
  transition: transform 0.3s ease;
}

.toast.show {
  transform: translateX(0);
}

.toast.error {
  background: #dc2626;
}

.toast.warning {
  background: #f59e0b;
}




   
   
/* Creator Modal Overlay */
.creator-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    backdrop-filter: blur(5px);
}

.creator-modal-overlay.active {
    display: flex;
}

/* Creator Modal Container */
.creator-modal-container {
    background: #1a1a2e;
    border-radius: 20px;
    width: 90%;
    max-width: 500px;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
    animation: creatorModalSlideIn 0.3s ease-out;
    display: flex;
    flex-direction: column;
    border: 1px solid #16213e;
}

@keyframes creatorModalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.8) translateY(-50px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Modal Header */
.creator-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 25px;
    background: rgba(22, 33, 62, 0.3);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid #16213e;
}

.creator-modal-header h2 {
    color: white;
    margin: 0;
    font-size: 1.8rem;
    font-weight: 700;
}

.creator-modal-close-btn {
    background: rgba(22, 33, 62, 0.5);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: white;
    font-size: 1.2rem;
}

.creator-modal-close-btn:hover {
    background: rgba(22, 33, 62, 0.8);
    transform: rotate(90deg);
}

/* Banner Ads */
.creator-banner-ad {
    width: 480px;
    height: 65px;
    margin: 0 auto;
    padding: 10px 15px;
    background: linear-gradient(135deg, #16213e, #0f3460);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    margin-top: 15px;
    margin-bottom: 15px;
}

.creator-banner-ad.top-banner {
    border-bottom: 1px solid #16213e;
    margin-top: 0;
}

.creator-banner-ad.bottom-banner {
    border-top: 1px solid #16213e;
    margin-bottom: 0;
}

.creator-ad-content {
    text-align: center;
}

.creator-ad-label {
    background: #0f3460;
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    display: inline-block;
    margin-bottom: 5px;
}

.creator-ad-content p {
    color: rgba(255, 255, 255, 0.9);
    margin: 0;
    font-size: 0.85rem;
}

/* Scrollable Content Area */
.creator-content-area {
    flex: 1;
    overflow-y: auto;
    padding: 20px 25px;
    background: #1a1a2e;
}

.creator-cards-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

/* Creator Card Buttons with Different Border Colors */
.creator-card-btn {
    background: rgba(22, 33, 62, 0.3);
    border-radius: 15px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 15px;
    backdrop-filter: blur(10px);
    border: 2px solid;
}

/* Entertainment Event - Teal Blue */
.creator-card-btn:nth-child(1) {
    border-color: #008B8B;
}

.creator-card-btn:nth-child(1):hover {
    background: rgba(0, 139, 139, 0.1);
    border-color: #20B2AA;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 139, 139, 0.2);
}

/* Sport Event - Ocean Blue */
.creator-card-btn:nth-child(2) {
    border-color: #1E90FF;
}

.creator-card-btn:nth-child(2):hover {
    background: rgba(30, 144, 255, 0.1);
    border-color: #4169E1;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(30, 144, 255, 0.2);
}

/* Award Ceremony - Deep Sky Blue */
.creator-card-btn:nth-child(3) {
    border-color: #00BFFF;
}

.creator-card-btn:nth-child(3):hover {
    background: rgba(0, 191, 255, 0.1);
    border-color: #87CEEB;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 191, 255, 0.2);
}

.creator-card-icon {
    width: 50px;
    height: 50px;
    background: rgba(22, 33, 62, 0.5);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: white;
    flex-shrink: 0;
}

.creator-card-content {
    flex: 1;
}

.creator-card-content h3 {
    color: white;
    margin: 0 0 5px 0;
    font-size: 1.1rem;
    font-weight: 600;
}

.creator-card-content p {
    color: rgba(255, 255, 255, 0.8);
    margin: 0;
    font-size: 0.9rem;
    line-height: 1.4;
}

.creator-card-arrow {
    color: rgba(255, 255, 255, 0.6);
    font-size: 1rem;
    transition: all 0.3s ease;
}

.creator-card-btn:hover .creator-card-arrow {
    color: white;
    transform: translateX(5px);
}

/* Add More Placeholder */
.creator-add-more {
    background: rgba(22, 33, 62, 0.2);
    border: 2px dashed rgba(255, 255, 255, 0.3);
    border-radius: 15px;
    padding: 30px 20px;
    text-align: center;
    color: rgba(255, 255, 255, 0.6);
}

.creator-add-icon {
    width: 50px;
    height: 50px;
    background: rgba(22, 33, 62, 0.3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin: 0 auto 15px;
}

.creator-add-more p {
    margin: 0;
    font-size: 0.9rem;
}

/* Custom Scrollbar */
.creator-content-area::-webkit-scrollbar {
    width: 6px;
}

.creator-content-area::-webkit-scrollbar-track {
    background: rgba(22, 33, 62, 0.3);
    border-radius: 3px;
}

.creator-content-area::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 3px;
}

.creator-content-area::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}

/* Responsive Design */
@media (max-width: 768px) {
    .creator-modal-container {
        width: 95%;
        max-height: 95vh;
    }
    
    .creator-modal-header {
        padding: 15px 20px;
    }
    
    .creator-modal-header h2 {
        font-size: 1.5rem;
    }
    
    .creator-content-area {
        padding: 15px 20px;
    }
    
    .creator-banner-ad {
        width: 100%;
        max-width: 480px;
        padding: 8px 12px;
    }
    
    .creator-card-btn {
        padding: 15px;
        gap: 12px;
    }
    
    .creator-card-icon {
        width: 45px;
        height: 45px;
        font-size: 1.3rem;
    }
}

@media (max-width: 480px) {
    .creator-modal-container {
        width: 100%;
        height: 100%;
        max-height: 100vh;
        border-radius: 0;
    }
    
    .creator-banner-ad {
        width: 100%;
        height: 55px;
        padding: 8px 10px;
    }
    
    .creator-ad-content p {
        font-size: 0.8rem;
    }
    
    .creator-card-btn {
        flex-direction: column;
        text-align: center;
        gap: 10px;
    }
    
    .creator-card-arrow {
        display: none;
    }
}

/* Entertainment Event Page */
.entertainment-event-page {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #1a1a2e;
    z-index: 1000;
    overflow-y: auto;
    display: none;
}

/* Page Header */
.entertainment-page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 25px;
    background: rgba(22, 33, 62, 0.3);
    border-bottom: 1px solid #16213e;
    position: sticky;
    top: 0;
    z-index: 10;
}

.entertainment-page-header h2 {
    color: white;
    margin: 0;
    font-size: 1.8rem;
    font-weight: 700;
}

.close-entertainment-event-page-btn {
    background: rgba(22, 33, 62, 0.5);
    border: none;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: white;
    font-size: 1.3rem;
}

.close-entertainment-event-page-btn:hover {
    background: rgba(22, 33, 62, 0.8);
    transform: rotate(90deg);
}

/* Banner Ad */
.entertainment-banner-ad {
    width: 480px;
    height: 65px;
    margin: 20px auto;
    padding: 10px 15px;
    background: linear-gradient(135deg, #16213e, #0f3460);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    border: 1px solid #008B8B;
}

.entertainment-ad-content {
    text-align: center;
}

.entertainment-ad-label {
    background: #0f3460;
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    display: inline-block;
    margin-bottom: 5px;
}

.entertainment-ad-content p {
    color: rgba(255, 255, 255, 0.9);
    margin: 0;
    font-size: 0.85rem;
}

/* Action Buttons */
.entertainment-action-buttons {
    display: flex;
    gap: 20px;
    padding: 0 25px;
    margin: 20px 0;
    justify-content: center;
}

.entertainment-action-btn {
    background: rgba(22, 33, 62, 0.3);
    border: 2px solid #008B8B;
    border-radius: 15px;
    padding: 15px 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    color: white;
    font-weight: 600;
    min-width: 120px;
    justify-content: center;
}

.entertainment-action-btn:hover {
    background: rgba(0, 139, 139, 0.1);
    border-color: #20B2AA;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 139, 139, 0.2);
}

.entertainment-btn-icon {
    font-size: 1.2rem;
}

/* Tabs */
.entertainment-tabs {
    padding: 0 25px;
}

.entertainment-tabs-header {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    border-bottom: 1px solid #16213e;
    padding-bottom: 10px;
}

.entertainment-tab-btn {
    background: rgba(22, 33, 62, 0.3);
    border: 1px solid #16213e;
    border-radius: 10px 10px 0 0;
    padding: 12px 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    color: rgba(255, 255, 255, 0.7);
    font-weight: 500;
}

.entertainment-tab-btn:hover {
    background: rgba(22, 33, 62, 0.5);
    color: white;
}

.entertainment-tab-btn.active {
    background: #008B8B;
    color: white;
    border-color: #008B8B;
}

.entertainment-tab-btn i {
    font-size: 1rem;
}

/* Tab Content */
.entertainment-tab-content {
    min-height: 400px;
}

.entertainment-tab-pane {
    display: none;
}

.entertainment-tab-pane.active {
    display: block;
}

.entertainment-cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    padding: 20px 0;
}

/* Empty State */
.entertainment-empty-state {
    grid-column: 1 / -1;
    text-align: center;
    padding: 60px 20px;
    color: rgba(255, 255, 255, 0.6);
}

.entertainment-empty-state i {
    font-size: 4rem;
    margin-bottom: 20px;
    color: rgba(255, 255, 255, 0.3);
}

.entertainment-empty-state p {
    font-size: 1.1rem;
    margin: 0;
    line-height: 1.5;
}

/* Responsive Design */
@media (max-width: 768px) {
    .entertainment-page-header {
        padding: 15px 20px;
    }
    
    .entertainment-page-header h2 {
        font-size: 1.5rem;
    }
    
    .entertainment-banner-ad {
        width: 100%;
        max-width: 480px;
        margin: 15px auto;
        padding: 8px 12px;
    }
    
    .entertainment-action-buttons {
        padding: 0 20px;
        gap: 15px;
    }
    
    .entertainment-action-btn {
        padding: 12px 20px;
        min-width: 100px;
    }
    
    .entertainment-tabs {
        padding: 0 20px;
    }
    
    .entertainment-tabs-header {
        flex-direction: column;
        gap: 5px;
    }
    
    .entertainment-tab-btn {
        justify-content: center;
        padding: 10px 15px;
    }
    
    .entertainment-cards-container {
        grid-template-columns: 1fr;
        gap: 15px;
    }
}

@media (max-width: 480px) {
    .entertainment-page-header {
        padding: 12px 15px;
    }
    
    .entertainment-page-header h2 {
        font-size: 1.3rem;
    }
    
    .entertainment-banner-ad {
        height: 55px;
        padding: 8px 10px;
    }
    
    .entertainment-ad-content p {
        font-size: 0.8rem;
    }
    
    .entertainment-action-buttons {
        flex-direction: column;
        padding: 0 15px;
        gap: 10px;
    }
    
    .entertainment-action-btn {
        width: 100%;
    }
    
    .entertainment-tabs {
        padding: 0 15px;
    }
    
    .entertainment-tab-btn span {
        display: none;
    }
    
    .entertainment-empty-state {
        padding: 40px 15px;
    }
    
    .entertainment-empty-state i {
        font-size: 3rem;
    }
    
    .entertainment-empty-state p {
        font-size: 1rem;
    }
}


/* Host Entertainment Popup Overlay */
.host-entertainment-popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1500;
    backdrop-filter: blur(5px);
}

/* Popup Container */
.host-entertainment-popup-container {
    background: #1a1a2e;
    border-radius: 20px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
    border: 1px solid #16213e;
    display: flex;
    flex-direction: column;
}

/* Popup Header */
.host-entertainment-popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 25px;
    background: rgba(22, 33, 62, 0.3);
    border-bottom: 1px solid #16213e;
}

.host-entertainment-popup-header h2 {
    color: white;
    margin: 0;
    font-size: 1.6rem;
    font-weight: 700;
}

.close-host-entertainment-popup-btn {
    background: rgba(22, 33, 62, 0.5);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: white;
    font-size: 1.2rem;
}

.close-host-entertainment-popup-btn:hover {
    background: rgba(22, 33, 62, 0.8);
    transform: rotate(90deg);
}

/* Banner Ad */
.host-entertainment-banner-ad {
    width: 480px;
    height: 65px;
    margin: 15px auto;
    padding: 10px 15px;
    background: linear-gradient(135deg, #16213e, #0f3460);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    border: 1px solid #008B8B;
}

.host-entertainment-ad-content {
    text-align: center;
}

.host-entertainment-ad-label {
    background: #0f3460;
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    display: inline-block;
    margin-bottom: 5px;
}

.host-entertainment-ad-content p {
    color: rgba(255, 255, 255, 0.9);
    margin: 0;
    font-size: 0.85rem;
}

/* Form Content */
.host-entertainment-form-content {
    flex: 1;
    overflow-y: auto;
    padding: 20px 25px;
}

/* Form Groups */
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    color: white;
    font-weight: 600;
    margin-bottom: 8px;
    font-size: 0.95rem;
}

/* Form Inputs */
.form-input, .form-select, .form-textarea {
    width: 100%;
    padding: 12px 15px;
    background: rgba(22, 33, 62, 0.3);
    border: 1px solid #16213e;
    border-radius: 10px;
    color: white;
    font-size: 0.95rem;
    transition: all 0.3s ease;
}

.form-input:focus, .form-select:focus, .form-textarea:focus {
    outline: none;
    border-color: #008B8B;
    box-shadow: 0 0 0 2px rgba(0, 139, 139, 0.2);
}

.form-input::placeholder, .form-textarea::placeholder {
    color: rgba(255, 255, 255, 0.5);
}
.form-help {
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.8rem;
    margin-top: 5px;
    display: block;
}

/* Custom Category Input */
.custom-category-input {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}

.custom-category-input .form-input {
    flex: 1;
}

.add-category-btn, .custom-category-toggle {
    background: #008B8B;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    transition: all 0.3s ease;
}

.add-category-btn:hover, .custom-category-toggle:hover {
    background: #20B2AA;
    transform: translateY(-1px);
}

.custom-category-toggle {
    background: rgba(22, 33, 62, 0.5);
    margin-top: 10px;
    width: 100%;
}

/* Fee Options */
.fee-options {
    display: flex;
    gap: 15px;
    align-items: center;
}

.fee-input-wrapper {
    flex: 1;
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
}

.fee-input {
    flex: 1;
}

.currency-label {
    color: #008B8B;
    font-weight: 600;
    font-size: 0.9rem;
}

.naira-equivalent {
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.8rem;
}

.no-fee-btn {
    background: rgba(22, 33, 62, 0.5);
    color: white;
    border: 1px solid #16213e;
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.no-fee-btn:hover {
    background: rgba(22, 33, 62, 0.8);
    border-color: #008B8B;
}

.no-fee-btn.active {
    background: #008B8B;
    border-color: #008B8B;
}

/* Background Options */
.background-options {
    border: 1px solid #16213e;
    border-radius: 10px;
    overflow: hidden;
}

.background-tabs {
    display: flex;
    background: rgba(22, 33, 62, 0.3);
}

.bg-tab {
    flex: 1;
    padding: 10px;
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    transition: all 0.3s ease;
}

.bg-tab.active {
    background: #008B8B;
    color: white;
}

.background-content {
    padding: 15px;
}

.bg-content {
    display: none;
}

.bg-content.active {
    display: block;
}

.file-input {
    display: none;
}

.file-label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 15px;
    background: rgba(22, 33, 62, 0.3);
    border: 2px dashed #16213e;
    border-radius: 8px;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    transition: all 0.3s ease;
}

.file-label:hover {
    border-color: #008B8B;
    color: white;
}

.color-palette {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 10px;
    margin-bottom: 15px;
}

.color-option {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.color-option:hover, .color-option.selected {
    border-color: white;
    transform: scale(1.1);
}

.custom-color-input {
    width: 100%;
    height: 40px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

/* Tags Section */
.tags-section {
    border: 1px solid #16213e;
    border-radius: 10px;
    padding: 15px;
}

.tag-input-section {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.tag-input {
    flex: 1;
}

.add-tag-btn {
    background: #008B8B;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    transition: all 0.3s ease;
}

.add-tag-btn:hover {
    background: #20B2AA;
}

.tags-display {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.hashtags, .startags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.tag-item {
    background: rgba(22, 33, 62, 0.5);
    color: white;
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    gap: 5px;
}

.tag-remove {
    background: none;
    border: none;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    font-size: 0.7rem;
}

.tag-remove:hover {
    color: #ff6b6b;
}

/* Rules Section */
.rules-section {
    border: 1px solid #16213e;
    border-radius: 10px;
    padding: 15px;
}

.rule-input-section {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.rule-textarea {
    flex: 1;
    resize: vertical;
}

.add-rule-btn {
    background: #008B8B;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    transition: all 0.3s ease;
    align-self: flex-start;
}

.add-rule-btn:hover {
    background: #20B2AA;
}

.rules-list {
    margin-bottom: 10px;
}

.rule-item {
    background: rgba(22, 33, 62, 0.3);
    border: 1px solid #16213e;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 10px;
}

.rule-text {
    color: white;
    font-size: 0.9rem;
    line-height: 1.4;
    flex: 1;
}

.rule-number {
    background: #008B8B;
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 600;
    flex-shrink: 0;
}

.rule-remove {
    background: none;
    border: none;
    color: rgba(255, 255, 255, 0.5);
    cursor: pointer;
    font-size: 0.9rem;
    padding: 2px;
}

.rule-remove:hover {
    color: #ff6b6b;
}

/* Payment Summary */
.payment-summary {
    background: rgba(22, 33, 62, 0.3);
    border: 1px solid #16213e;
    border-radius: 15px;
    padding: 20px;
}

.payment-summary h3 {
    color: white;
    margin: 0 0 15px 0;
    font-size: 1.2rem;
    font-weight: 600;
}

.creation-fee-breakdown {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.fee-item {
    display: flex;
    justify-content: space-between;
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.9rem;
}

.fee-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: white;
    font-weight: 600;
    font-size: 1rem;
    padding-top: 10px;
    border-top: 1px solid #16213e;
    margin-top: 10px;
}

.fee-total small {
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.8rem;
    font-weight: normal;
}

/* Submit Button */
.form-actions {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #16213e;
}

.submit-btn {
    width: 100%;
    background: linear-gradient(135deg, #008B8B, #20B2AA);
    color: white;
    border: none;
    padding: 15px;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 139, 139, 0.3);
}

.submit-btn:disabled {
    background: rgba(22, 33, 62, 0.5);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* Custom Scrollbar */
.host-entertainment-form-content::-webkit-scrollbar {
    width: 6px;
}

.host-entertainment-form-content::-webkit-scrollbar-track {
    background: rgba(22, 33, 62, 0.3);
    border-radius: 3px;
}

.host-entertainment-form-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 3px;
}

.host-entertainment-form-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}

/* Responsive Design */
@media (max-width: 768px) {
    .host-entertainment-popup-container {
        width: 95%;
        max-height: 95vh;
    }
    
    .host-entertainment-popup-header {
        padding: 15px 20px;
    }
    
    .host-entertainment-popup-header h2 {
        font-size: 1.4rem;
    }
    
    .host-entertainment-banner-ad {
        width: 100%;
        max-width: 480px;
        margin: 10px auto;
    }
    
    .host-entertainment-form-content {
        padding: 15px 20px;
    }
    
    .fee-options {
        flex-direction: column;
        gap: 10px;
    }
    
    .tag-input-section, .rule-input-section {
        flex-direction: column;
        gap: 8px;
    }
    
    .color-palette {
        grid-template-columns: repeat(4, 1fr);
    }
}

@media (max-width: 480px) {
    .host-entertainment-popup-container {
        width: 100%;
        height: 100%;
        max-height: 100vh;
        border-radius: 0;
    }
    
    .host-entertainment-banner-ad {
        height: 55px;
        padding: 8px 10px;
    }
    
    .host-entertainment-form-content {
        padding: 15px;
    }
    
    .color-palette {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .color-option {
        width: 35px;
        height: 35px;
    }
}

/* Payment Method Selection */
.payment-method-selection {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
}

.payment-option {
    flex: 1;
}

.payment-option input[type="radio"] {
    display: none;
}

.payment-option-label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: white;
    font-weight: 500;
}

.payment-option input[type="radio"]:checked + .payment-option-label,
.payment-option-label.active {
    border-color: #007bff;
    background: #f8f9ff;
    color: #007bff;
}

.payment-option-label:hover {
    border-color: #007bff;
    background: #f8f9ff;
}

.payment-option-label i {
    font-size: 18px;
}

/* Promo Code Section */
.promo-code-section {
    margin-bottom: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #007bff;
}

.promo-code-section .form-input {
    margin-bottom: 8px;
    padding: 12px 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 14px;
    transition: all 0.3s ease;
}

.promo-code-section .form-input:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.promo-code-section .form-input.valid {
    border-color: #28a745;
    background: #f8fff9;
}

.promo-code-section .form-input.invalid {
    border-color: #dc3545;
    background: #fff8f8;
}

.promo-code-section .form-help {
    color: #6c757d;
    font-size: 12px;
    font-style: italic;
}

/* Payment Summary */
.payment-summary {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
}

.payment-summary h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 18px;
}

.creation-fee-breakdown {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.fee-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid #e9ecef;
}

.fee-item:last-child {
    border-bottom: none;
}

.fee-item.total-fee {
    font-weight: 600;
    font-size: 16px;
    color: #007bff;
    border-top: 2px solid #007bff;
    padding-top: 12px;
    margin-top: 8px;
}

.fee-equivalent {
    text-align: center;
    margin-top: 10px;
    color: #6c757d;
    font-size: 14px;
}

/* Responsive Entertainment Card Styles for Android & iOS */
.entertainment-card {
    width: 100%;
    max-width: 350px;
    height: 280px;
    margin: 15px auto;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    position: relative;
    /* Prevent text selection on mobile */
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    /* Improve touch performance */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.entertainment-card:hover,
.entertainment-card:active {
    transform: translateY(-3px);
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2);
}

.entertainment-card-inner {
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 12px;
    /* Improve rendering on mobile */
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    transform: translateZ(0);
}

/* Card Overlay for better text visibility */
.card-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
        135deg,
        rgba(0, 0, 0, 0.1) 0%,
        rgba(0, 0, 0, 0.3) 50%,
        rgba(0, 0, 0, 0.5) 100%
    );
    z-index: 1;
}

/* All content should be above overlay */
.entertainment-card-inner > * {
    position: relative;
    z-index: 2;
}

/* Event Name Overlay */
.event-name-overlay {
    position: absolute;
    top: 12px;
    left: 12px;
    background: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    backdrop-filter: blur(10px);
    max-width: calc(100% - 120px);
    z-index: 3;
}

.event-name-overlay h3 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
}

/* Action Buttons (Top Right) */
.card-action-buttons {
    position: absolute;
    top: 12px;
    right: 12px;
    display: flex;
    gap: 6px;
    z-index: 3;
}

.card-btn {
    width: 36px;
    height: 36px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    backdrop-filter: blur(10px);
    font-size: 14px;
    /* Better touch targets */
    min-width: 44px;
    min-height: 44px;
    /* Prevent double-tap zoom */
    touch-action: manipulation;
}

.card-btn:hover,
.card-btn:active {
    background: rgba(255, 255, 255, 1);
    transform: scale(1.05);
}

.card-btn:active {
    transform: scale(0.95);
}

.edit-btn:hover,
.edit-btn:active {
    color: #007bff;
}

.delete-btn:hover,
.delete-btn:active {
    color: #dc3545;
}

/* Participants Counter */
.participants-counter {
    position: absolute;
    top: 60px;
    right: 12px;
    background: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 6px 10px;
    border-radius: 15px;
    font-size: 12px;
    display: flex;
    align-items: center;
    gap: 5px;
    backdrop-filter: blur(10px);
    z-index: 3;
}

/* Event Info Middle Section */
.event-info-middle {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    gap: 6px;
    z-index: 3;
    max-width: calc(100% - 24px);
}

.event-duration,
.event-type,
.event-fee {
    background: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 6px 10px;
    border-radius: 15px;
    font-size: 12px;
    display: flex;
    align-items: center;
    gap: 6px;
    backdrop-filter: blur(10px);
    white-space: nowrap;
    max-width: fit-content;
}

.event-duration {
    background: rgba(76, 175, 80, 0.9);
}

.event-type {
    background: rgba(33, 150, 243, 0.9);
}

.event-fee {
    background: rgba(255, 193, 7, 0.9);
    color: #333;
}

/* Bottom Action Buttons */
.card-bottom-actions {
    position: absolute;
    bottom: 12px;
    left: 12px;
    right: 12px;
    display: flex;
    gap: 8px;
    z-index: 3;
}

.open-btn,
.launch-btn {
    flex: 1;
    padding: 10px 12px;
    border: none;
    border-radius: 20px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    backdrop-filter: blur(10px);
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    /* Better touch targets */
    min-height: 44px;
    touch-action: manipulation;
}

.open-btn {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
}

.open-btn:hover,
.open-btn:active {
    background: rgba(255, 255, 255, 1);
    transform: translateY(-1px);
}

.launch-btn {
    background: rgba(76, 175, 80, 0.95);
    color: white;
}

.launch-btn:hover,
.launch-btn:active {
    background: rgba(76, 175, 80, 1);
    transform: translateY(-1px);
}

.open-btn:active,
.launch-btn:active {
    transform: scale(0.98);
}

/* Container Responsive Styles */
.entertainment-cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
}

/* Mobile Responsive Styles */
@media screen and (max-width: 768px) {
    .entertainment-card {
        max-width: 100%;
        height: 260px;
        margin: 10px 0;
        border-radius: 12px;
    }
    
    .entertainment-card-inner {
        padding: 10px;
    }
    
    .event-name-overlay {
        top: 10px;
        left: 10px;
        padding: 6px 10px;
        max-width: calc(100% - 100px);
    }
    
    .event-name-overlay h3 {
        font-size: 13px;
    }
    
    .card-action-buttons {
        top: 10px;
        right: 10px;
        gap: 4px;
    }
    
    .card-btn {
        width: 32px;
        height: 32px;
        min-width: 40px;
        min-height: 40px;
        font-size: 12px;
    }
    
    .participants-counter {
        top: 52px;
        right: 10px;
        font-size: 11px;
        padding: 4px 8px;
    }
    
    .event-info-middle {
        left: 10px;
        gap: 5px;
    }
    
    .event-duration,
    .event-type,
    .event-fee {
        font-size: 11px;
        padding: 5px 8px;
    }
    
    .card-bottom-actions {
        bottom: 10px;
        left: 10px;
        right: 10px;
        gap: 6px;
    }
    
    .open-btn,
    .launch-btn {
        padding: 8px 10px;
        font-size: 11px;
        min-height: 40px;
    }
    
    .open-btn span,
    .launch-btn span {
        display: none;
    }
    
    .entertainment-cards-container {
        grid-template-columns: 1fr;
        gap: 15px;
        padding: 15px;
    }
}

/* Small Mobile Devices */
@media screen and (max-width: 480px) {
    .entertainment-card {
        height: 240px;
        margin: 8px 0;
    }
    
    .event-name-overlay h3 {
        font-size: 12px;
    }
    
    .card-btn {
        width: 30px;
        height: 30px;
        min-width: 36px;
        min-height: 36px;
        font-size: 11px;
    }
    
    .participants-counter {
        font-size: 10px;
    }
    
    .event-duration,
    .event-type,
    .event-fee {
        font-size: 10px;
        padding: 4px 6px;
    }
    
    .open-btn,
    .launch-btn {
        padding: 6px 8px;
        font-size: 10px;
        min-height: 36px;
    }
    
    .entertainment-cards-container {
        padding: 10px;
        gap: 10px;
    }
}

/* Large Tablets */
@media screen and (min-width: 769px) and (max-width: 1024px) {
    .entertainment-cards-container {
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 25px;
        padding: 25px;
    }
    
    .entertainment-card {
        max-width: 380px;
        height: 300px;
    }
}

/* Desktop */
@media screen and (min-width: 1025px) {
    .entertainment-cards-container {
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 30px;
        padding: 30px;
    }
    
    .entertainment-card {
        max-width: 400px;
        height: 320px;
    }
    
    .entertainment-card:hover {
        transform: translateY(-8px);
    }
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
    .entertainment-card {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
    }
    
    .card-btn,
    .open-btn,
    .launch-btn {
        -webkit-appearance: none;
        -webkit-tap-highlight-color: transparent;
    }
}

/* Android Chrome specific fixes */
@media screen and (-webkit-min-device-pixel-ratio: 1) {
    .entertainment-card {
        will-change: transform;
    }
    
    .card-btn:active,
    .open-btn:active,
    .launch-btn:active {
        background-color: rgba(0, 0, 0, 0.1);
    }
}

/* High DPI displays */
@media screen and (-webkit-min-device-pixel-ratio: 2),
       screen and (min-resolution: 192dpi) {
    .entertainment-card {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .entertainment-card:hover,
    .entertainment-card:active {
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    .entertainment-card {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
    
    .card-btn {
        background: rgba(255, 255, 255, 0.9);
        color: #333;
    }
    
    .open-btn {
        background: rgba(255, 255, 255, 0.9);
        color: #333;
    }
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
    .entertainment-card,
    .card-btn,
    .open-btn,
    .launch-btn {
        transition: none;
    }
    
    .entertainment-card:hover {
        transform: none;
    }
}

/* Empty State Responsive */
.entertainment-empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #666;
}

.entertainment-empty-state i {
    font-size: 48px;
    color: #ddd;
    margin-bottom: 20px;
}

.entertainment-empty-state p {
    font-size: 16px;
    line-height: 1.5;
    max-width: 300px;
    margin: 0 auto;
}

@media screen and (max-width: 480px) {
    .entertainment-empty-state {
        padding: 30px 15px;
    }
    
    .entertainment-empty-state i {
        font-size: 36px;
    }
    
    .entertainment-empty-state p {
        font-size: 14px;
    }
}


/* Loading States */
.loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    border-radius: 10px;
}

.spinner {
    width: 30px;
    height: 30px;
    border: 3px solid rgba(74, 108, 247, 0.2);
    border-radius: 50%;
    border-top-color: #4a6cf7;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
   

/* Modal Styles */
.sg-spin-wheel-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.7);
}

.sg-spin-wheel-modal .sg-modal-content {
    background-color: #fff;
    margin: 5% auto;
    padding: 20px;
    border-radius: 15px;
    width: 90%;
    max-width: 800px;
    box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
    position: relative;
}

.sg-spin-wheel-modal .sg-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
}

.sg-spin-wheel-modal .sg-modal-header h2 {
    margin: 0;
    color: #333;
    font-size: 1.8rem;
}

.sg-spin-wheel-modal .sg-close-modal {
    color: #aaa;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.3s ease;
}

.sg-spin-wheel-modal .sg-close-modal:hover {
    color: #333;
}

/* Tabs */
.sg-spin-wheel-modal .sg-modal-tabs {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
}

.sg-spin-wheel-modal .sg-tab-btn {
    padding: 12px 20px;
    background-color: transparent;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    font-weight: 600;
    color: #555;
    transition: all 0.3s ease;
}

.sg-spin-wheel-modal .sg-tab-btn:hover {
    color: #333;
}

.sg-spin-wheel-modal .sg-tab-btn.active {
    color: #3498db;
    border-bottom: 3px solid #3498db;
}

/* Tab Content */
.sg-spin-wheel-modal .sg-tab-content {
    display: none;
    padding: 20px;
    background-color: #1a1a2e;
    border-radius: 10px;
}

.sg-spin-wheel-modal .sg-tab-content.active {
    display: block;
}

/* Spin Info */
.sg-spin-wheel-modal .sg-spin-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 10px;
}

.sg-spin-wheel-modal .sg-cost-badge {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.sg-spin-wheel-modal .sg-cost-badge span {
    padding: 8px 15px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.9rem;
    text-align: center;
}

.sg-spin-wheel-modal .sg-cost-badge span:first-child {
    background-color: #e9ecef;
    color: #495057;
}

.sg-spin-wheel-modal .sg-free-spin-badge {
    background-color: #d4edda;
    color: #155724;
}

.sg-spin-wheel-modal .sg-prize-info {
    flex: 1;
    padding-left: 20px;
}

.sg-spin-wheel-modal .sg-prize-info p {
    margin: 5px 0;
    color: #495057;
}

.sg-spin-wheel-modal .sg-prize-info p:first-child {
    font-weight: 600;
    color: #333;
}

/* Wheel Container */
.sg-spin-wheel-modal .sg-wheel-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 30px;
}

/* Wheel Outer Rim */
.sg-spin-wheel-modal .sg-wheel-outer-rim {
    width: 320px;
    height: 320px;
    border-radius: 50%;
    background-color: #333;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    margin-bottom: 30px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
}

/* Wheel rim colors for different types */
.sg-spin-wheel-modal .sg-basic-wheel-rim {
    border: 10px solid #2980b9;
}

.sg-spin-wheel-modal .sg-standard-wheel-rim {
    border: 10px solid #8e44ad;
}

.sg-spin-wheel-modal .sg-premium-wheel-rim {
    border: 10px solid #d35400;
}

/* Wheel Pointer */
.sg-spin-wheel-modal .sg-wheel-pointer {
    position: absolute;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-top: 30px solid #e74c3c;
    z-index: 10;
}

/* Wheel Wrapper */
.sg-spin-wheel-modal .sg-wheel-wrapper {
    width: 280px;
    height: 280px;
    border-radius: 50%;
    overflow: hidden;
    position: relative;
}

/* Wheel */
.sg-spin-wheel-modal .sg-wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    position: relative;
    transition: transform 5s cubic-bezier(0.17, 0.67, 0.83, 0.67);
}

/* Wheel Sections */
.sg-spin-wheel-modal .sg-wheel-section {
    position: absolute;
    top: 0;
    left: 0;
    width: 50%;
    height: 50%;
    transform-origin: bottom right;
    clip-path: polygon(0 0, 100% 0, 100% 100%);
}

/* Basic Wheel Section Styles */
.sg-spin-wheel-modal .sg-wheel-oneB { 
    transform: rotate(0deg); 
    background-color: #3498db; 
}
.sg-spin-wheel-modal .sg-wheel-twoB { 
    transform: rotate(45deg); 
    background-color: #2ecc71; 
}
.sg-spin-wheel-modal .sg-wheel-threeB { 
    transform: rotate(90deg); 
    background-color: #e74c3c; 
}
.sg-spin-wheel-modal .sg-wheel-fourB { 
    transform: rotate(135deg); 
    background-color: #f1c40f; 
}
.sg-spin-wheel-modal .sg-wheel-fiveB { 
    transform: rotate(180deg); 
    background-color: #9b59b6; 
}
.sg-spin-wheel-modal .sg-wheel-sixB { 
    transform: rotate(225deg); 
    background-color: #e67e22; 
}
.sg-spin-wheel-modal .sg-wheel-sevenB { 
    transform: rotate(270deg); 
    background-color: #1abc9c; 
}
.sg-spin-wheel-modal .sg-wheel-eightB { 
    transform: rotate(315deg); 
    background-color: #e84393; 
}

/* Standard Wheel Section Styles */
.sg-spin-wheel-modal .sg-wheel-oneS { 
    transform: rotate(0deg); 
    background-color: #3498db; 
}
.sg-spin-wheel-modal .sg-wheel-twoS { 
    transform: rotate(45deg); 
    background-color: #2ecc71; 
}
.sg-spin-wheel-modal .sg-wheel-threeS { 
    transform: rotate(90deg); 
    background-color: #e74c3c; 
}
.sg-spin-wheel-modal .sg-wheel-fourS { 
    transform: rotate(135deg); 
    background-color: #f1c40f; 
}
.sg-spin-wheel-modal .sg-wheel-fiveS { 
    transform: rotate(180deg); 
    background-color: #9b59b6; 
}
.sg-spin-wheel-modal .sg-wheel-sixS { 
    transform: rotate(225deg); 
    background-color: #e67e22; 
}
.sg-spin-wheel-modal .sg-wheel-sevenS { 
    transform: rotate(270deg); 
    background-color: #1abc9c; 
}
.sg-spin-wheel-modal .sg-wheel-eightS { 
    transform: rotate(315deg); 
    background-color: #e84393; 
}

/* Premium Wheel Section Styles */
.sg-spin-wheel-modal .sg-wheel-oneP { 
    transform: rotate(0deg); 
    background-color: #3498db; 
}
.sg-spin-wheel-modal .sg-wheel-twoP { 
    transform: rotate(45deg); 
    background-color: #2ecc71; 
}
.sg-spin-wheel-modal .sg-wheel-threeP { 
    transform: rotate(90deg); 
    background-color: #e74c3c; 
}
.sg-spin-wheel-modal .sg-wheel-fourP { 
    transform: rotate(135deg); 
    background-color: #f1c40f; 
}
.sg-spin-wheel-modal .sg-wheel-fiveP { 
    transform: rotate(180deg); 
    background-color: #9b59b6; 
}
.sg-spin-wheel-modal .sg-wheel-sixP { 
    transform: rotate(225deg); 
    background-color: #e67e22; 
}
.sg-spin-wheel-modal .sg-wheel-sevenP { 
    transform: rotate(270deg); 
    background-color: #1abc9c; 
}
.sg-spin-wheel-modal .sg-wheel-eightP { 
    transform: rotate(315deg); 
    background-color: #e84393; 
}

/* Prize Text */
.sg-spin-wheel-modal .sg-prize-text {
    position: absolute;
    top: 20px;
    right: 20px;
    transform: rotate(-15deg);
    font-weight: 600;
    font-size: 14px;
    color: white;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    white-space: nowrap;
}

/* Wheel Center */
.sg-spin-wheel-modal .sg-wheel-center {
    position: absolute;
    width: 60px;
    height: 60px;
    background-color: #fff;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    z-index: 5;
}

.sg-spin-wheel-modal .sg-wheel-logo {
    font-size: 20px;
    font-weight: 700;
    color: #333;
}

/* Spin Button */
.sg-spin-wheel-modal .sg-spin-btn {
    padding: 12px 30px;
    background-color: #3498db;
    color: white;
    border: none;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
}

.sg-spin-wheel-modal .sg-spin-btn:hover {
    background-color: #2980b9;
    transform: translateY(-2px);
}

.sg-spin-wheel-modal .sg-spin-btn:active {
    transform: translateY(1px);
}

.sg-spin-wheel-modal .sg-spin-icon {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Recent Spins */
.sg-spin-wheel-modal .sg-recent-spins {
    background-color: #f8f9fa;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.sg-spin-wheel-modal .sg-recent-spins h3 {
    font-size: 1.2rem;
    color: #333;
    margin-bottom: 15px;
    text-align: center;
    position: relative;
}

.sg-spin-wheel-modal .sg-recent-spins h3:after {
    content: '';
    display: block;
    width: 50px;
    height: 3px;
    background-color: #3498db;
    margin: 8px auto 0;
}

/* Basic Spin History Header */
.sg-spin-wheel-modal #sg-basic-spin .sg-recent-spins h3:after {
    background-color: #3498db;
}

/* Standard Spin History Header */
.sg-spin-wheel-modal #sg-standard-spin .sg-recent-spins h3:after {
    background-color: #9b59b6;
}

/* Premium Spin History Header */
.sg-spin-wheel-modal #sg-premium-spin .sg-recent-spins h3:after {
    background-color: #f39c12;
}

.sg-spin-wheel-modal .sg-spin-history {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
}

.sg-spin-wheel-modal .sg-spin-result {
    padding: 8px 15px;
    border-radius: 50px;
    font-size: 0.9rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.sg-spin-wheel-modal .sg-win-result {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.sg-spin-wheel-modal .sg-lose-result {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.sg-spin-wheel-modal .sg-empty-history {
    color: #6c757d;
    font-style: italic;
    text-align: center;
    width: 100%;
    padding: 10px;
}

/* Spinning Animation */
.sg-spin-wheel-modal .sg-wheel.spinning {
    animation: none; /* Remove the default animation */
    transform: rotate(var(--spin-rotation, 1440deg)); /* Use CSS variable for dynamic rotation */
}

/* Disabled button styles */
.sg-spin-wheel-modal .sg-spin-btn.disabled,
.sg-spin-wheel-modal .sg-spin-btn:disabled {
    background-color: #95a5a6;
    cursor: not-allowed;
    box-shadow: none;
}

.sg-spin-wheel-modal .sg-spin-btn.disabled:hover,
.sg-spin-wheel-modal .sg-spin-btn:disabled:hover {
    transform: none;
    background-color: #95a5a6;
}

/* Spinning button animation */
.sg-spin-wheel-modal .sg-spin-btn.spinning .sg-spin-icon {
    animation: sg-rotate 1s linear infinite;
}

@keyframes sg-rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Result Modal */
.sg-spin-result-modal {
    display: none;
    position: fixed;
    z-index: 1100;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.8);
}

.sg-spin-result-modal .sg-modal-content {
    background-color: #fff;
    margin: 10% auto;
    padding: 30px;
    border-radius: 15px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
    text-align: center;
    position: relative;
}

.sg-spin-result-modal .sg-result-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background-color: #f8f9fa;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 auto 20px;
    font-size: 40px;
    color: #f1c40f;
}

.sg-spin-result-modal h2 {
    margin: 0 0 15px;
    color: #333;
    font-size: 1.8rem;
}

.sg-spin-result-modal p {
    margin: 0 0 30px;
    color: #555;
    font-size: 1.2rem;
}

.sg-spin-result-modal .sg-result-actions {
    display: flex;
    justify-content: center;
    gap: 15px;
}

.sg-spin-result-modal .sg-btn {
    padding: 12px 25px;
    border: none;
    border-radius: 50px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.sg-spin-result-modal .sg-btn-primary {
    background-color: #3498db;
    color: white;
    box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
}

.sg-spin-result-modal .sg-btn-primary:hover {
    background-color: #2980b9;
    transform: translateY(-2px);
}

.sg-spin-result-modal .sg-btn-secondary {
    background-color: #f8f9fa;
    color: #333;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.sg-spin-result-modal .sg-btn-secondary:hover {
    background-color: #e9ecef;
    transform: translateY(-2px);
}

/* Confetti animation */
.sg-confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    background-color: #f39c12;
    opacity: 0;
    top: -10px;
    animation: sg-confetti-fall 3s linear forwards;
    z-index: 1200;
}

@keyframes sg-confetti-fall {
    0% {
        opacity: 1;
        top: -10px;
        transform: translateX(0) rotate(0deg);
    }
    100% {
        opacity: 0;
        top: 100vh;
        transform: translateX(100px) rotate(720deg);
    }
}

/* Responsive styles */
@media (max-width: 768px) {
    .sg-spin-wheel-modal .sg-modal-content {
        width: 95%;
        margin: 10% auto;
        padding: 15px;
    }
    
    .sg-spin-wheel-modal .sg-modal-header h2 {
        font-size: 1.5rem;
    }
    
    .sg-spin-wheel-modal .sg-tab-btn {
        padding: 10px 15px;
        font-size: 0.9rem;
    }
    
    .sg-spin-wheel-modal .sg-wheel-outer-rim {
        width: 280px;
        height: 280px;
    }
    
    .sg-spin-wheel-modal .sg-wheel-wrapper {
        width: 240px;
        height: 240px;
    }
    
    .sg-spin-wheel-modal .sg-prize-text {
        font-size: 12px;
    }
    
    .sg-spin-wheel-modal .sg-wheel-center {
        width: 50px;
        height: 50px;
    }
    
    .sg-spin-wheel-modal .sg-spin-info {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .sg-spin-wheel-modal .sg-cost-badge {
        flex-direction: row;
        width: 100%;
        justify-content: space-between;
    }
    
    .sg-spin-wheel-modal .sg-prize-info {
        padding-left: 0;
    }
}

@media (max-width: 480px) {
    .sg-spin-wheel-modal .sg-modal-tabs {
        flex-direction: column;
        gap: 5px;
    }
    
    .sg-spin-wheel-modal .sg-tab-btn {
        width: 100%;
        border-bottom: none;
        border-left: 3px solid transparent;
        text-align: left;
        padding: 10px;
    }
    
    .sg-spin-wheel-modal .sg-tab-btn.active {
        border-bottom: none;
        border-left: 3px solid #3498db;
        background-color: #f8f9fa;
    }
    
    .sg-spin-wheel-modal .sg-wheel-outer-rim {
        width: 240px;
        height: 240px;
    }
    
    .sg-spin-wheel-modal .sg-wheel-wrapper {
        width: 200px;
        height: 200px;
    }
    
    .sg-spin-wheel-modal .sg-prize-text {
        font-size: 10px;
    }
    
    .sg-spin-result-modal .sg-modal-content {
        padding: 20px;
    }
    
    .sg-spin-result-modal .sg-result-actions {
        flex-direction: column;
        gap: 10px;
    }
}



    </style>

<style>
    /* Admin Buy Coin Support Styles */
    .admin-section {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin-bottom: 30px;
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .section-header h2 {
      margin: 0;
      color: #333;
      font-size: 1.5rem;
    }
    
    .pending-indicator {
      background-color: #f8f9fa;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #4CAF50;
    }
    
    .pending-count {
      color: #4CAF50;
      font-weight: bold;
      font-size: 16px;
    }
    
    /* Request List Styles */
    .request-list-container {
      border: 1px solid #e9ecef;
      border-radius: 6px;
      overflow: hidden;
    }
    
    .request-list-header {
      display: flex;
      background-color: #f8f9fa;
      padding: 12px 15px;
      font-weight: 600;
      color: #495057;
      border-bottom: 2px solid #e9ecef;
    }
    
    .header-item {
      flex: 1;
    }
    
    .header-item:last-child {
      flex: 1.5;
      text-align: center;
    }
    
    .request-list {
      max-height: 500px;
      overflow-y: auto;
    }
    
    .request-item {
      display: flex;
      padding: 15px;
      border-bottom: 1px solid #e9ecef;
      transition: background-color 0.3s;
      align-items: center;
    }
    
    .request-item:hover {
      background-color: #f8f9fa;
    }
    
    .request-item:last-child {
      border-bottom: none;
    }
    
    .request-data {
      flex: 1;
      padding: 0 5px;
    }
    
    .request-actions {
      flex: 1.5;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }
    
    .view-btn {
      background-color: #6c757d;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s;
    }
    
    .view-btn:hover {
      background-color: #5a6268;
    }
    
    .action-btn.approve {
      background-color: #4CAF50;
      color: white;
    }
    
    .action-btn.approve:hover {
      background-color: #45a049;
    }
    
    .action-btn.reject {
      background-color: #dc3545;
      color: white;
    }
    
    .action-btn.reject:hover {
      background-color: #c82333;
    }
    
    .action-btn.message {
      background-color: #ffc107;
      color: #212529;
    }
    
    .action-btn.message:hover {
      background-color: #e0a800;
    }
    
    /* Request Detail Popup Styles */
    .request-detail-popup {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
    }
    
    .popup-content {
      background-color: #fefefe;
      margin: 5% auto;
      padding: 0;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      width: 90%;
      max-width: 600px;
      position: relative;
      animation: popupFadeIn 0.3s;
    }
    
    @keyframes popupFadeIn {
      from {opacity: 0; transform: translateY(-20px);}
      to {opacity: 1; transform: translateY(0);}
    }
    
    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: #f8f9fa;
      border-bottom: 1px solid #e9ecef;
      border-radius: 8px 8px 0 0;
    }
    
    .popup-header h3 {
      margin: 0;
      color: #333;
      font-size: 1.2rem;
    }
    
    .popup-controls {
      display: flex;
      gap: 10px;
    }
    
    .popup-control-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      transition: all 0.3s;
      background-color: #e9ecef;
      color: #495057;
    }
    
    .popup-control-btn:hover {
      background-color: #dee2e6;
    }
    
    .request-details {
      padding: 20px;
      border-bottom: 1px solid #e9ecef;
    }
    
    .detail-row {
      display: flex;
      margin-bottom: 12px;
      position: relative;
    }
    
    .detail-label {
      font-weight: 600;
      width: 40%;
      color: #495057;
    }
    
    .detail-value {
      flex: 1;
    }
    
    .balance-note {
      position: absolute;
      left: 0;
      bottom: -18px;
      font-size: 12px;
      color: #6c757d;
      font-style: italic;
    }
    
    .status-indicator {
      display: flex;
      align-items: center;
    }
    
    .status-pending {
      background-color: #ffc107;
      color: #212529;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-accepted {
      background-color: #4CAF50;
      color: white;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-rejected {
      background-color: #dc3545;
      color: white;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    .screenshot-section {
  padding: 20px;
  border-bottom: 1px solid #e9ecef;
}

.screenshot-section h4 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #495057;
}

.screenshots {
  display: flex;
  gap: 15px;
}

.screenshot-container {
  flex: 1;
}

.screenshot {
  background-color: #f8f9fa;
  border: 1px dashed #ced4da;
  border-radius: 6px;
  height: 150px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #6c757d;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s;
}

.screenshot:hover {
  background-color: #e9ecef;
}

.popup-actions {
  padding: 20px;
}

.action-note {
  margin-bottom: 15px;
  color: #495057;
  font-size: 14px;
}

.action-buttons-large {
  display: flex;
  gap: 10px;
}

.action-btn-large {
  flex: 1;
  padding: 10px;
  border: none;
  border-radius: 4px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.action-btn-large.approve {
  background-color: #4CAF50;
  color: white;
}

.action-btn-large.approve:hover {
  background-color: #45a049;
}

.action-btn-large.reject {
  background-color: #dc3545;
  color: white;
}

.action-btn-large.reject:hover {
  background-color: #c82333;
}

.action-btn-large.message {
  background-color: #ffc107;
  color: #212529;
}

.action-btn-large.message:hover {
  background-color: #e0a800;
}

/* Confirmation Dialog Styles */
.confirmation-dialog {
  display: none;
  position: fixed;
  z-index: 1100;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.5);
}

.dialog-content {
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  width: 90%;
  max-width: 400px;
  text-align: center;
  animation: dialogFadeIn 0.3s;
}

@keyframes dialogFadeIn {
  from {opacity: 0; transform: scale(0.9);}
  to {opacity: 1; transform: scale(1);}
}

.dialog-content h3 {
  margin-top: 0;
  color: #333;
}

.dialog-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
}

.dialog-btn {
  padding: 8px 20px;
  border: none;
  border-radius: 4px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.dialog-btn.confirm {
  background-color: #4CAF50;
  color: white;
}

.dialog-btn.confirm:hover {
  background-color: #45a049;
}

.dialog-btn.cancel {
  background-color: #6c757d;
  color: white;
}

.dialog-btn.cancel:hover {
  background-color: #5a6268;
}

/* Success Message Styles */
.success-message {
  display: none;
  position: fixed;
  z-index: 1100;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.5);
}

.message-content {
  background-color: #fefefe;
  margin: 15% auto;
  padding: 30px 20px;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  width: 90%;
  max-width: 400px;
  text-align: center;
  animation: messageFadeIn 0.3s;
}

@keyframes messageFadeIn {
  from {opacity: 0; transform: scale(0.9);}
  to {opacity: 1; transform: scale(1);}
}

.success-icon {
  font-size: 50px;
  color: #4CAF50;
  margin-bottom: 15px;
}

.message-content h3 {
  margin-top: 0;
  color: #333;
}

.message-btn {
  margin-top: 20px;
  padding: 8px 20px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.message-btn:hover {
  background-color: #45a049;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .request-item {
    flex-direction: column;
    align-items: flex-start;
    padding: 15px 10px;
  }
  
  .request-data {
    width: 100%;
    padding: 5px 0;
  }
  
  .request-actions {
    width: 100%;
    justify-content: flex-start;
    margin-top: 10px;
  }
  
  .action-buttons-large {
    flex-direction: column;
  }
  
  .screenshots {
    flex-direction: column;
  }
  
  .popup-content {
    width: 95%;
    margin: 10% auto;
  }
  
  .dialog-content,
  .message-content {
    width: 95%;
  }
}

/* Status Styles */
.status-indicator {
  position: relative;
}

.status-accepted:before {
  content: "âœ“";
  margin-right: 5px;
}

.status-rejected:before {
  content: "Ã—";
  margin-right: 5px;
}

/* Animation for screenshot expansion */
.screenshot.expanded {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  height: 80%;
  max-width: 800px;
  max-height: 600px;
  z-index: 1200;
  background-color: white;
  border: none;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
}

.screenshot.expanded img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Overlay for expanded screenshot */
.screenshot-overlay {
  display: none;
  position: fixed;
  z-index: 1150;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
}

/* Payment Proof Upload Styles */
.payment-proof-section {
  margin-bottom: 30px;
  padding: 20px;
  background-color: #f8f9fa;
  border-radius: 8px;
}

.payment-proof-section h3 {
  margin-top: 0;
  margin-bottom: 10px;
  color: #333;
}

.section-description {
  margin-bottom: 20px;
  color: #666;
}

.upload-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 20px;
}

.upload-item {
  flex: 1;
  min-width: 200px;
}

.upload-label {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background-color: #fff;
  border: 2px dashed #ccc;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.upload-label:hover {
  border-color: #007bff;
  background-color: #f0f7ff;
}

.upload-icon {
  font-size: 24px;
  color: #007bff;
  margin-bottom: 10px;
}

.upload-text {
  font-weight: 500;
  margin-bottom: 5px;
}

.upload-subtext {
  font-size: 12px;
  color: #666;
}

.file-input {
  display: none;
}

.preview-container {
  margin-top: 10px;
  position: relative;
  display: none;
}

.preview-container.has-image {
  display: block;
}

.image-preview {
  width: 100%;
  border-radius: 8px;
  border: 1px solid #ddd;
}

.image-preview.hidden {
  display: none;
}

.remove-btn {
  position: absolute;
  top: -10px;
  right: -10px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background-color: #ff4d4f;
  color: white;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.remove-btn:hover {
  background-color: #ff7875;
}

.upload-instructions {
  background-color: #fff;
  padding: 15px;
  border-radius: 8px;
  border-left: 4px solid #007bff;
}

.upload-instructions h4 {
  margin-top: 0;
  margin-bottom: 10px;
  color: #333;
}

.upload-instructions ul {
  margin: 0;
  padding-left: 20px;
}

.upload-instructions li {
  margin-bottom: 5px;
  color: #555;
}

</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    
    <div class="container">
        
        <div class="split-screen">
            <div class="left">
                <div class="logo">
                    <h1>Rewarder</h1>
                </div>
                <div class="tagline">
                    <h2>Discover Talent. Vote. Win.</h2>
                    <p>Join the platform where talent gets rewarded and voters earn too!</p>
                </div>
                <div class="features">
                    <div class="feature">
                        <i class="fas fa-trophy"></i>
                        <span>Compete in exciting talent categories</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-vote-yea"></i>
                        <span>Vote for your favorites and earn rewards</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-coins"></i>
                        <span>Win cash prizes and recognition</span>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="auth-container" id="loginForm">
                    <h2>Welcome Back</h2>
                    <p>Sign in to continue your journey</p>
                    
                    <div class="social-login">
                        <button class="social-btn google-btn">
                           <img src="https://i.ibb.co/wZqXcy6z/thegogglelogo.png" alt="thegogglelogo" border="0">
                            <span>Continue with Google</span>
                        </button>
                    </div>
                    
                    <div class="divider">
                        <span>or sign in with email</span>
                    </div>
                    
                    <form id="loginFormElement">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" id="loginEmail" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <div class="password-input">
                                <input type="password" id="loginPassword" placeholder="Enter your password" required>
                                <i class="fas fa-eye-slash toggle-password"></i>
                            </div>
                        </div>
                        <div class="form-options">
                            <div class="remember-me">
                                <input type="checkbox" id="remember">
                                <label for="remember">Remember me</label>
                            </div>
                            <a href="#" class="forgot-password">Forgot password?</a>
                        </div>
                        <button type="submit" class="auth-btn">Sign In</button>
                    </form>
                    
                    <div class="auth-switch">
                        <p>Don't have an account? <a href="#" id="showSignup">Sign up</a></p>
                    </div>
                </div>
                
                <div class="auth-container hidden" id="signupForm">
                    <h2>Create Account</h2>
                    <p>Join the talent revolution</p>
                    
                    <div class="social-login">
                        <button class="social-btn google-btn">
                           <img src="https://i.ibb.co/wZqXcy6z/thegogglelogo.png" alt="thegogglelogo" border="0">
                          
                            <span>Continue with Google</span>
                        </button>
                    </div>
                    
                    <div class="divider">
                        <span>or sign up with email</span>
                    </div>
                    
                    <form id="signupFormElement">
                        <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" placeholder="Enter your full name" required>
                        </div>
                        <div class="form-group">
                            <label for="signupEmail">Email</label>
                            <input type="email" id="signupEmail" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label for="signupPassword">Password</label>
                            <div class="password-input">
                                <input type="password" id="signupPassword" placeholder="Create a password" required>
                                <i class="fas fa-eye-slash toggle-password"></i>
                            </div>
                            <div class="password-strength">
                                <div class="strength-meter">
                                    <div class="strength-segment"></div>
                                    <div class="strength-segment"></div>
                                    <div class="strength-segment"></div>
                                    <div class="strength-segment"></div>
                                </div>
                                <span class="strength-text">Password strength</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="userType">I want to join as</label>
                            <select id="userType" required>
                                <option value="" disabled selected>Select your role</option>
                                <option value="contestant">Contestant</option>
                                <option value="voter">Voter</option>
                                <option value="both">Both</option>
                            </select>
                        </div>
                        <div class="form-options">
                            <div class="terms">
                                <input type="checkbox" id="terms" required>
                                <label for="terms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                            </div>
                        </div>
                        <button type="submit" class="auth-btn">Create Account</button>
                    </form>
                    
                    <div class="auth-switch">
                        <p>Already have an account? <a href="#" id="showLogin">Sign in</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

       
   

    <!-- Dashboard Page -->
<div class="dashboard-page" id="dashboardPage">
    <!-- Top Navigation Bar -->
    <div class="dashboard-nav">
        <div class="user-info">
            <div class="profile-circle">
          <!-- User profile circle in header/navbar -->
<div class="user-profile-image emoji-avatar" id="profileCircle">ðŸ¤–</div>

            </div>
            <span class="username" id="usernameDisplay">Username</span>
        </div>
        
        <div class="trophy-btn">
    <i class="fas fa-trophy"></i>
    <div class="shine-sweep"></div>
    
</div>

        <div class="wallet1-btn">
          
         <div class="walleticon-btn">
                    <i class="fas fa-wallet"></i>
                 </div>
               
            </div>
             
        <div class="hamburger-menu">
            <i class="fas fa-bars"></i>
        </div>
    </div>
    
    <!-- Main Dashboard Container -->
    <div class="dashboard-container">
      
    <!-- Media Banner Container -->
    <div class="media-banner-container">
        <div class="media-banner-track">
            <!-- Video Items -->
            <div class="media-item video-item">
                <video muted loop autoplay>
                    <source src="video1.mp4" type="video/mp4">
                </video>
                <div class="media-overlay">
                    <span class="media-title">Video 1</span>
                </div>
            </div>
            
            <!-- Image Items -->
            <div class="media-item image-item">
                <img src="image1.jpg" alt="Image 1">
                <div class="media-overlay">
                    <span class="media-title">Image 1</span>
                </div>
            </div>
            
            <div class="media-item video-item">
                <video muted loop autoplay>
                    <source src="video2.mp4" type="video/mp4">
                </video>
                <div class="media-overlay">
                    <span class="media-title">Video 2</span>
                </div>
            </div>
            
            <div class="media-item image-item">
                <img src="image2.jpg" alt="Image 2">
                <div class="media-overlay">
                    <span class="media-title">Image 2</span>
                </div>
            </div>
            
            <div class="media-item video-item">
                <video muted loop autoplay>
                    <source src="video3.mp4" type="video/mp4">
                </video>
                <div class="media-overlay">
                    <span class="media-title">Video 3</span>
                </div>
            </div>
            
            <div class="media-item image-item">
                <img src="image3.jpg" alt="Image 3">
                <div class="media-overlay">
                    <span class="media-title">Image 3</span>
                </div>
            </div>
            
            <!-- Duplicate items for seamless loop -->
            <div class="media-item video-item">
                <video muted loop autoplay>
                    <source src="video1.mp4" type="video/mp4">
                </video>
                <div class="media-overlay">
                    <span class="media-title">Video 1</span>
                </div>
            </div>
            
            <div class="media-item image-item">
                <img src="image1.jpg" alt="Image 1">
                <div class="media-overlay">
                    <span class="media-title">Image 1</span>
                </div>
            </div>
        </div>
    </div>


        <!-- Action Buttons Container - Single Row -->
        <div class="action-buttons-row">
            
            <div class="action-btn creator-btn">
                <div class="action-icon">
                    <i class="fas fa-video"></i>
                </div>
                <span>Creator</span>
            </div>
            
            <div class="action-btn Liveevents-btn">
                <div class="action-icon Liveevents">
                    <i class="fas fa-broadcast-tower"></i>
                </div>
                <span>Live events</span>
            </div>

             <div class="action-btn newevents-btn">
                <div class="action-icon newevents">
                     <i class="fas fa-futbol"></i>
                     <i class="fas fa-star"></i>
                    
                </div>
                <span>New events</span>
            </div>
            
            
             <div class="action-btn Game-btn">
    <div class="action-icon game-icon">
    <i class="fa-solid fa-gamepad"></i>

    </div>
    <span>Game</span>
</div>

<div class="action-btn spin-btn">
                <div class="action-icon spin-icon">
                    <i class="fas fa-sync-alt"></i>
                </div>
                <span>Spin</span>
            </div>
            <div class="action-btn rewarder-btn">
                <div class="action-icon rewarder">
                    <i class="fas fa-gem"></i>
                </div>
                <span>Rewarder</span>
            </div>
           

        </div>

        
          
        </div>
       
    <div class="liveevent-page">
        <div class="liveevent-container">
            <!-- Header -->
            <header class="liveevent-header">
                <h1><i class="fas fa-broadcast-tower"></i> Live Events</h1>
            </header>
<!-- Add this inside your liveevent-page div, preferably at the top -->
<button class="liveevent-close-btn">
    <i class="fas fa-times"></i>
</button>

            <!-- Tab Navigation -->
            <div class="liveevent-tab-navigation">
                <button class="liveevent-tab-btn liveevent-active" data-tab="sports">
                    <i class="fas fa-futbol"></i>
                    <span>Sport Events</span>
                </button>
                <button class="liveevent-tab-btn" data-tab="talent">
                    <i class="fas fa-star"></i>
                    <span>Talent Show</span>
                </button>
            </div>

            <!-- Sports Events Tab -->
            <div class="liveevent-tab-content liveevent-active" id="liveevent-sports-tab">
                <!-- Sports Icons -->
                <div class="liveevent-sports-icons">
                    <div class="liveevent-sport-icon" data-sport="football">
                        <i class="fas fa-futbol"></i>
                        <span>Football</span>
                    </div>
                    <div class="liveevent-sport-icon" data-sport="basketball">
                        <i class="fas fa-basketball-ball"></i>
                        <span>Basketball</span>
                    </div>
                    <div class="liveevent-sport-icon" data-sport="tennis">
                        <i class="fas fa-table-tennis"></i>
                        <span>Tennis</span>
                    </div>
                    <div class="liveevent-sport-icon" data-sport="race">
                        <i class="fas fa-running"></i>
                        <span>Race</span>
                    </div>
                    <div class="liveevent-sport-icon" data-sport="tabletennis">
                        <i class="fas fa-ping-pong-paddle-ball"></i>
                        <span>Table Tennis</span>
                    </div>
                    <div class="liveevent-sport-icon" data-sport="volleyball">
                        <i class="fas fa-volleyball-ball"></i>
                        <span>Volleyball</span>
                    </div>
                    <div class="liveevent-sport-icon" data-sport="badminton">
                        <i class="fas fa-shuttlecock"></i>
                        <span>Badminton</span>
                    </div>
                </div>

                <!-- Filters -->
                <div class="liveevent-filters-container">
                    <div class="liveevent-filter-group">
                        <button class="liveevent-filter-btn liveevent-active" data-filter="latest">Latest Events</button>
                        <button class="liveevent-filter-btn" data-filter="old">Old</button>
                        <button class="liveevent-filter-btn" data-filter="48hrs">48hrs</button>
                        <button class="liveevent-filter-btn" data-filter="3days">3 Days</button>
                        <button class="liveevent-filter-btn" data-filter="14days">14 Days</button>
                        <button class="liveevent-filter-btn" data-filter="finished">Finished</button>
                        <button class="liveevent-filter-btn" data-filter="about-to-end">About to End</button>
                        <button class="liveevent-filter-btn" data-filter="just-started">Just Started</button>
                    </div>
                </div>

                <!-- Banner Ad -->
                <div class="liveevent-banner-ad">
                    <div class="liveevent-ad-placeholder">
                        <i class="fas fa-ad"></i>
                        <span>Advertisement Banner (480px x 70px)</span>
                    </div>
                </div>

                <!-- Search Section -->
                <div class="liveevent-search-section">
                    <div class="liveevent-search-container">
                        <div class="liveevent-search-input-wrapper">
                            <i class="fas fa-search"></i>
                            <input type="text" class="liveevent-search-input" placeholder="Search teams, leagues, players, events...">
                        </div>
                        <div class="liveevent-search-filters">
                            <button class="liveevent-search-filter-btn liveevent-active" data-search="all">All</button>
                            <button class="liveevent-search-filter-btn" data-search="teams">Teams</button>
                            <button class="liveevent-search-filter-btn" data-search="leagues">Leagues</button>
                            <button class="liveevent-search-filter-btn" data-search="players">Players</button>
                            <button class="liveevent-search-filter-btn" data-search="events">Events</button>
                        </div>
                    </div>
                </div>

                <!-- Cards Container -->
                <div class="liveevent-cards-container" id="liveevent-sports-cards">
                    <div class="liveevent-loading-message">
                        <i class="fas fa-spinner"></i>
                        <p>Loading live events...</p>
                    </div>
                </div>
            </div>

            <!-- Talent Show Tab -->
            <div class="liveevent-tab-content" id="liveevent-talent-tab">
                <!-- Talent Icons -->
                <div class="liveevent-talent-icons">
                    <div class="liveevent-talent-icon" data-talent="singing">
                        <i class="fas fa-microphone"></i>
                        <span>Singing</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="dancing">
                        <i class="fas fa-music"></i>
                        <span>Dancing</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="drawing">
                        <i class="fas fa-paint-brush"></i>
                        <span>Drawing</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="comedy">
                        <i class="fas fa-laugh"></i>
                        <span>Comedy</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="magic">
                        <i class="fas fa-magic"></i>
                        <span>Magic</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="poetry">
                        <i class="fas fa-feather-alt"></i>
                        <span>Poetry</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="acting">
                        <i class="fas fa-theater-masks"></i>
                        <span>Acting</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="music">
                        <i class="fas fa-guitar"></i>
                        <span>Music</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="photography">
                        <i class="fas fa-camera"></i>
                        <span>Photography</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="crafts">
                        <i class="fas fa-hammer"></i>
                        <span>Crafts</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="storytelling">
                        <i class="fas fa-book-open"></i>
                        <span>Storytelling</span>
                    </div>
                    <div class="liveevent-talent-icon" data-talent="other">
                        <i class="fas fa-plus-circle"></i>
                        <span>Other</span>
                    </div>
                </div>

                <!-- Banner Ad -->
                <div class="liveevent-banner-ad">
                    <div class="liveevent-ad-placeholder">
                        <i class="fas fa-ad"></i>
                        <span>Advertisement Banner (480px x 70px)</span>
                    </div>
                </div>

                <!-- Search Section -->
                <div class="liveevent-search-section">
                    <div class="liveevent-search-container">
                        <div class="liveevent-search-input-wrapper">
                            <i class="fas fa-search"></i>
                            <input type="text" class="liveevent-search-input" placeholder="Search talent shows, performers, events...">
                        </div>
                        <div class="liveevent-search-filters">
                            <button class="liveevent-search-filter-btn liveevent-active" data-search="all">All</button>
                       <button class="liveevent-search-filter-btn liveevent-active" data-search="all">All</button>
                            <button class="liveevent-search-filter-btn" data-search="performers">Performers</button>
                            <button class="liveevent-search-filter-btn" data-search="shows">Shows</button>
                            <button class="liveevent-search-filter-btn" data-search="events">Events</button>
                            <button class="liveevent-search-filter-btn" data-search="competitions">Competitions</button>
                        </div>
                    </div>
                </div>

                <!-- Cards Container -->
                <div class="liveevent-cards-container" id="liveevent-talent-cards">
                    <div class="liveevent-loading-message">
                        <i class="fas fa-spinner"></i>
                        <p>Loading talent shows...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>  


    <div class="newevent-page">
    <div class="newevent-container">
        
      <!-- Header -->
        <header class="newevent-header">
         
            <h1><i class="fas fa-broadcast-tower"></i> New Events</h1>
          <button class="newevent-close-btn " type="button" aria-label="Close New Events">
        <i class="fas fa-times"></i>
        
    </button>
          </header>
        
        <!-- Tab Navigation -->
        <div class="newevent-tab-navigation">
            <button class="newevent-tab-btn newevent-active" data-tab="sports">
                <i class="fas fa-futbol"></i>
                <span>Sport Events</span>
            </button>
            <button class="newevent-tab-btn" data-tab="talent">
                <i class="fas fa-star"></i>
                <span>Talent Show</span>
            </button>
        </div>
        
        <!-- Sports Events Tab -->
        <div class="newevent-tab-content newevent-active" id="newevent-sports-tab">
            <!-- Sports Icons -->
            <div class="newevent-sports-icons">
                <div class="newevent-sport-icon" data-sport="football">
                    <i class="fas fa-futbol"></i>
                    <span>Football</span>
                </div>
                <div class="newevent-sport-icon" data-sport="basketball">
                    <i class="fas fa-basketball-ball"></i>
                    <span>Basketball</span>
                </div>
                <div class="newevent-sport-icon" data-sport="tennis">
                    <i class="fas fa-table-tennis"></i>
                    <span>Tennis</span>
                </div>
                <div class="newevent-sport-icon" data-sport="race">
                    <i class="fas fa-running"></i>
                    <span>Race</span>
                </div>
                <div class="newevent-sport-icon" data-sport="tabletennis">
                    <i class="fas fa-ping-pong-paddle-ball"></i>
                    <span>Table Tennis</span>
                </div>
                <div class="newevent-sport-icon" data-sport="volleyball">
                    <i class="fas fa-volleyball-ball"></i>
                    <span>Volleyball</span>
                </div>
                <div class="newevent-sport-icon" data-sport="badminton">
                    <i class="fas fa-shuttlecock"></i>
                    <span>Badminton</span>
                </div>
            </div>
            
            <!-- Filters -->
            <div class="newevent-filters-container">
                <div class="newevent-filter-group">
                    <button class="newevent-filter-btn newevent-active" data-filter="latest">Latest Events</button>
                    <button class="newevent-filter-btn" data-filter="old">Old</button>
                    <button class="newevent-filter-btn" data-filter="48hrs">48hrs</button>
                    <button class="newevent-filter-btn" data-filter="3days">3 Days</button>
                    <button class="newevent-filter-btn" data-filter="14days">14 Days</button>
                    <button class="newevent-filter-btn" data-filter="finished">Finished</button>
                    <button class="newevent-filter-btn" data-filter="about-to-end">About to End</button>
                    <button class="newevent-filter-btn" data-filter="just-started">Just Started</button>
                </div>
            </div>
            
            <!-- Banner Ad -->
            <div class="newevent-banner-ad">
                <div class="newevent-ad-placeholder">
                    <i class="fas fa-ad"></i>
                    <span>Advertisement Banner (480px x 70px)</span>
                </div>
            </div>
            
            <!-- Search Section -->
            <div class="newevent-search-section">
                <div class="newevent-search-container">
                    <div class="newevent-search-input-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" class="newevent-search-input" placeholder="Search teams, leagues, players, events...">
                    </div>
                    <div class="newevent-search-filters">
                        <button class="newevent-search-filter-btn newevent-active" data-search="all">All</button>
                        <button class="newevent-search-filter-btn" data-search="teams">Teams</button>
                        <button class="newevent-search-filter-btn" data-search="leagues">Leagues</button>
                        <button class="newevent-search-filter-btn" data-search="players">Players</button>
                        <button class="newevent-search-filter-btn" data-search="events">Events</button>
                    </div>
                </div>
            </div>
            
            <!-- Cards Container -->
            <div class="newevent-cards-container" id="newevent-sports-cards">
                <div class="newevent-loading-message">
                    <i class="fas fa-spinner"></i>
                    <p>Loading new events...</p>
                </div>
            </div>
        </div>
        
        <!-- Talent Show Tab -->
        <div class="newevent-tab-content" id="newevent-talent-tab">
            <!-- Talent Icons -->
            <div class="newevent-talent-icons">
                <div class="newevent-talent-icon" data-talent="singing">
                    <i class="fas fa-microphone"></i>
                    <span>Singing</span>
                </div>
                <div class="newevent-talent-icon" data-talent="dancing">
                    <i class="fas fa-music"></i>
                    <span>Dancing</span>
                </div>
                <div class="newevent-talent-icon" data-talent="drawing">
                    <i class="fas fa-paint-brush"></i>
                    <span>Drawing</span>
                </div>
                <div class="newevent-talent-icon" data-talent="comedy">
                    <i class="fas fa-laugh"></i>
                    <span>Comedy</span>
                </div>
                <div class="newevent-talent-icon" data-talent="magic">
                    <i class="fas fa-magic"></i>
                    <span>Magic</span>
                </div>
                <div class="newevent-talent-icon" data-talent="poetry">
                    <i class="fas fa-feather-alt"></i>
                    <span>Poetry</span>
                </div>
                <div class="newevent-talent-icon" data-talent="acting">
                    <i class="fas fa-theater-masks"></i>
                    <span>Acting</span>
                </div>
                <div class="newevent-talent-icon" data-talent="music">
                    <i class="fas fa-guitar"></i>
                    <span>Music</span>
                </div>
                <div class="newevent-talent-icon" data-talent="photography">
                    <i class="fas fa-camera"></i>
                    <span>Photography</span>
                </div>
                <div class="newevent-talent-icon" data-talent="crafts">
                    <i class="fas fa-hammer"></i>
                    <span>Crafts</span>
                </div>
                <div class="newevent-talent-icon" data-talent="storytelling">
                    <i class="fas fa-book-open"></i>
                    <span>Storytelling</span>
                </div>
                <div class="newevent-talent-icon" data-talent="other">
                    <i class="fas fa-plus-circle"></i>
                    <span>Other</span>
                </div>
            </div>
            
            <!-- Banner Ad -->
            <div class="newevent-banner-ad">
                <div class="newevent-ad-placeholder">
                    <i class="fas fa-ad"></i>
                    <span>Advertisement Banner (480px x 70px)</span>
                </div>
            </div>
            
            <!-- Search Section -->
            <div class="newevent-search-section">
                <div class="newevent-search-container">
                    <div class="newevent-search-input-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" class="newevent-search-input" placeholder="Search talent shows, performers, events...">
                    </div>
                    <div class="newevent-search-filters">
                        <button class="newevent-search-filter-btn newevent-active" data-search="all">All</button>
                        <button class="newevent-search-filter-btn" data-search="performers">Performers</button>
                        <button class="newevent-search-filter-btn" data-search="shows">Shows</button>
                        <button class="newevent-search-filter-btn" data-search="events">Events</button>
                        <button class="newevent-search-filter-btn" data-search="competitions">Competitions</button>
                    </div>
                </div>
            </div>
            
            <!-- Cards Container -->
            <div class="newevent-cards-container" id="newevent-talent-cards">
                <div class="newevent-loading-message">
                    <i class="fas fa-spinner"></i>
                    <p>Loading talent shows...</p>
                </div>
            </div>
        </div>
    </div>
</div>

    </div>
  
         
        
        
      </div>
    </div>
  </div>
  
</div>


<!-- Profile Modal -->
<div id="profileModal" class="profile-modal">
    <div class="profile-modal-content">
        <div class="profile-modal-header">
            <h2>My Profile</h2>
               
            
             <button class="close-profile">&times;</button>
            
        </div>
        
       
      <!-- Emoji Avatar Section (replaces the profile image section) -->
      <div class="emoji-avatar-wrapper" id="emojiAvatarWrapper">
        <div class="current-emoji-avatar" id="currentEmojiAvatar">ðŸ¤–</div>
        <div class="emoji-selector" id="emojiSelector">
          <div class="emoji-option" data-emoji="ðŸŽ¶">ðŸŽ¶</div>
          <div class="emoji-option" data-emoji="ðŸ¤–">ðŸ¤–</div>
          <div class="emoji-option" data-emoji="ðŸ•¸ï¸">ðŸ•¸ï¸</div>
          <div class="emoji-option" data-emoji="ðŸ›¼">ðŸ›¼</div>
          <div class="emoji-option" data-emoji="ðŸŽ¨">ðŸŽ¨</div>
          <div class="emoji-option" data-emoji="ðŸ¦º">ðŸ¦º</div>
          <div class="emoji-option" data-emoji="â›‘ï¸">â›‘ï¸</div>
        </div>
      </div>
      
            
            <form id="profileForm">
                <div class="form-group">
                    <label for="profileFullName">Full Name</label>
                    <input type="text" id="profileFullName" placeholder="Your full name">
                </div>
                
                <div class="form-group">
                    <label for="profileEmail">Email</label>
                    <input type="email" id="profileEmail" readonly>
                </div>
                
                <div class="form-group">
                    <label for="profileUserType">Account Type</label>
                    <select id="profileUserType">
                        <option value="contestant">Contestant</option>
                        <option value="voter">Voter</option>
                        <option value="both">Both</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="profileBio">Bio</label>
                    <textarea id="profileBio" placeholder="Tell us about yourself" rows="3"></textarea>
                </div>
                  <div class="form-group">
                
                <a href="#" id="logoutBtn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
                </div>

                <div class="profile-actions">
                    <button type="button" id="changePasswordBtn" class="secondary-btn">Change Password</button>
                    
                    <button type="submit" id="saveProfileBtn" class="primary-btn">Save Changes</button>
                </div>
            </form>
            
            <!-- Change Password Section (Hidden by default) -->
            <div id="changePasswordSection" class="change-password-section hidden">
                <h3>Change Password</h3>
                <form id="changePasswordForm">
                    <div class="form-group">
                        <label for="currentPassword">Current Password</label>
                        <div class="password-input">
                            <input type="password" id="currentPassword" placeholder="Enter current password" required>
                            <i class="fas fa-eye-slash toggle-password"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <div class="password-input">
                            <input type="password" id="newPassword" placeholder="Enter new password" required>
                            <i class="fas fa-eye-slash toggle-password"></i>
                        </div>
                        <div class="password-strength">
                            <div class="strength-meter">
                                <div class="strength-segment"></div>
                                <div class="strength-segment"></div>
                                <div class="strength-segment"></div>
                                <div class="strength-segment"></div>
                            </div>
                            <span class="strength-text">Password strength</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <div class="password-input">
                            <input type="password" id="confirmPassword" placeholder="Confirm new password" required>
                            <i class="fas fa-eye-slash toggle-password"></i>
                        </div>
                    </div>
                    
                    <div class="profile-actions">
                        <button type="button" id="cancelPasswordChange" class="secondary-btn">Cancel</button>
                        <button type="submit" class="primary-btn">Update Password</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Sidebar Menu -->
<div class="sidebar-menu" id="sidebarMenu">
    <div class="sidebar-header">
        <div class="sidebar-user-info">
            <div class="user-avatar emoji-avatar" id="sidebarUserAvatar">ðŸ¤–</div>
            <div class="user-details">
                <div class="user-name" id="sidebarUserName">User Name</div>
                <div class="user-email" id="sidebarUserEmail">user@example.com</div>
            </div>
        </div>
        <button class="close-sidebar" id="closeSidebarBtn">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <div class="sidebar-content">
        <ul class="sidebar-menu-items">
            <li class="menu-item">
                <a href="#" id="profileMenuBtn">
                    <i class="fas fa-user"></i>
                    <span>My Profile</span>
                </a>
            </li>
            
          
            
            <li class="menu-item">
                <a href="#" id="termsBtn">
                    <i class="fas fa-file-contract"></i>
                    <span>Terms & Conditions</span>
                </a>
            </li>
            
            <li class="menu-item">
                <a href="#" id="privacyBtn">
                    <i class="fas fa-shield-alt"></i>
                    <span>Privacy Policy</span>
                </a>
            </li>
            
            
        </ul>
    </div>
    
    <div class="sidebar-footer">
        <div class="app-version">Version 1.0.0</div>
    </div>
</div>

<!-- Overlay for closing sidebar when clicking outside -->
<div class="sidebar-overlay" id="sidebarOverlay"></div>

<!-- Terms & Conditions Modal -->
<div class="modal" id="termsModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Terms & Conditions</h2>
            <button class="close-privacy">&times;</button>
        </div>
        <div class="modal-body">
            <div class="terms-content">
                <h3>1. Acceptance of Terms</h3>
                <p>By accessing and using this application, you accept and agree to be bound by the terms and provisions of this agreement.</p>
                
                <h3>2. User Account</h3>
                <p>To use certain features of the application, you must register for an account. You agree to provide accurate information and keep your account secure.</p>
                
                <h3>3. User Conduct</h3>
                <p>You agree not to use the application for any illegal purposes or to conduct activities that may damage, disable, or impair the application's functionality.</p>
                
                <h3>4. Intellectual Property</h3>
                <p>All content, features, and functionality of the application are owned by us and are protected by international copyright, trademark, and other intellectual property laws.</p>
                
                <h3>5. Termination</h3>
                <p>We may terminate or suspend your account and access to the application at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users or us.</p>
                
                <h3>6. Changes to Terms</h3>
                <p>We reserve the right to modify these terms at any time. Your continued use of the application after such changes constitutes your acceptance of the new terms.</p>
            </div>
        </div>
    </div>
</div>

<!-- Privacy Policy Modal -->
<div class="modal" id="privacyModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Privacy Policy</h2>
            <button class="close-privacy">&times;</button>
        </div>
        <div class="modal-body">
            <div class="privacy-content">
                <h3>1. Information We Collect</h3>
                <p>We collect information you provide directly to us when you register for an account, create or modify your profile, and use the features of our application.</p>
                
                <h3>2. How We Use Information</h3>
                <p>We use the information we collect to provide, maintain, and improve our services, to develop new ones, and to protect our application and users.</p>
                
                <h3>3. Information Sharing</h3>
                <p>We do not share your personal information with companies, organizations, or individuals outside of our organization except in the following cases: with your consent, for legal reasons, or to protect rights and safety.</p>
                
                <h3>4. Data Security</h3>
                <p>We work hard to protect our users from unauthorized access to or unauthorized alteration, disclosure, or destruction of information we hold.</p>
                
                <h3>5. Data Retention</h3>
                <p>We retain your information for as long as your account is active or as needed to provide you services.</p>
                
                <h3>6. Changes to This Policy</h3>
                <p>We may change this privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page.</p>
            </div>
        </div>
    </div>
</div>


<!-- Wallet Modal -->
<div class="wallet-modal" id="walletModal">
    <div class="wallet-container">
        <!-- PIN Setup/Entry Screen (shown first if no PIN exists) -->
        <div class="wallet-screen" id="pinScreen">
            <div class="wallet-header">
                <h2>Wallet Access</h2>
                <button class="close-wallet" id="closeWalletBtn">&times;</button>
            </div>
            
            <div class="pin-setup" id="pinSetupSection">
                <div class="pin-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h3>Create Your Wallet PIN</h3>
                <p>Set a 4-digit PIN to secure your wallet and transactions.</p>
                
                <div class="pin-input-container">
                    <input type="password" maxlength="1" class="pin-digit" data-index="0">
                    <input type="password" maxlength="1" class="pin-digit" data-index="1">
                    <input type="password" maxlength="1" class="pin-digit" data-index="2">
                    <input type="password" maxlength="1" class="pin-digit" data-index="3">
                </div>
                
                <div class="pin-confirm-container hidden" id="pinConfirmContainer">
                    <p>Confirm your PIN</p>
                    <div class="pin-input-container">
                        <input type="password" maxlength="1" class="pin-confirm-digit" data-index="0">
                        <input type="password" maxlength="1" class="pin-confirm-digit" data-index="1">
                        <input type="password" maxlength="1" class="pin-confirm-digit" data-index="2">
                        <input type="password" maxlength="1" class="pin-confirm-digit" data-index="3">
                    </div>
                </div>
                
                <button class="wallet-btn primary-btn" id="createPinBtn">Create PIN</button>
            </div>
            
            <div class="pin-entry hidden" id="pinEntrySection">
                <div class="pin-icon">
                    <i class="fas fa-unlock-alt"></i>
                </div>
                <h3>Enter Your Wallet PIN</h3>
                <p>Enter your 4-digit PIN to access your wallet.</p>
                
                <div class="pin-input-container">
                    <input type="password" maxlength="1" class="pin-login-digit" data-index="0">
                    <input type="password" maxlength="1" class="pin-login-digit" data-index="1">
                    <input type="password" maxlength="1" class="pin-login-digit" data-index="2">
                    <input type="password" maxlength="1" class="pin-login-digit" data-index="3">
                </div>
                
                <button class="wallet-btn primary-btn" id="loginPinBtn">Access Wallet</button>
                <button class="wallet-btn text-btn" id="forgotPinBtn">Forgot PIN?</button>
            </div>
        </div>
        
        <!-- Main Wallet Dashboard (shown after PIN verification) -->
        <div class="wallet-screen hidden" id="walletDashboard">
            <div class="wallet-header">
                <h2>My Wallet</h2>
                <button class="close-wallet" id="closeWalletDashboardBtn">&times;</button>
            </div>
            
            <div class="wallet-info">
         
   
  <!-- Add this to your send money form -->
  <div class="recipient-validation" id="recipientValidation" style="display:none;">
    <div class="recipient-info" id="recipientInfo"></div>
  </div>
              
                <div class="balance-cards">
                    <div class="balance-card talent-coin">
                        <div class="balance-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="balance-details">
                            <h3>Talent Coin Balance</h3>
                            <div class="balance-amount" id="talentCoinBalance">0</div>
                            <div class="balance-equivalent">â‰ˆ â‚¦<span id="nairaEquivalent">0</span></div>
                        </div>
                    </div>
                    <div class="balance-card pending-coin">
                        <div class="balance-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="balance-details">
                            <h3>Pending Coin Balance</h3>
                            <div class="balance-amount" id="pendingCoinBalance">0</div>
                            <div class="balance-equivalent">â‰ˆ â‚¦<span id="nairaEquivalent">0</span></div>
                        </div>
                    </div>
                    
                    <div class="balance-card commission">
                        <div class="balance-icon">
                            <i class="fas fa-hand-holding-usd"></i>
                        </div>
                        <div class="balance-details">
                            <h3>Commission Balance</h3>
                            <div class="balance-amount" id="commissionBalance">0</div>
                        </div>
                    </div>
                </div>
            </div>
         <!-- Wallet Tag Setup Modal -->
<div id="walletTagModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Create Wallet Tag</h2>
        <span class="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div class="tag-icon">
          <i class="fas fa-at"></i>
        </div>
        <p>Create a unique tag for your wallet to receive payments easily.</p>
        <div class="tag-input-wrapper">
          <span>@</span>
          <input type="text" id="walletTagInput" placeholder="yourname" maxlength="15">
        </div>
        <div id="tagStatus" class="tag-status"></div>
        <button id="createTagBtn" class="primary-btn" disabled>Create Tag</button>
      </div>
    </div>
  </div>
  
  <!-- Buy Coin Button for Wallet Dashboard -->
<div class="wallet-action-card">
    <div class="wallet-action-header">
      <h3>Buy Talent Coins</h3>
      <i class="fas fa-coins"></i>
    </div>
    <div class="wallet-action-content">
      <p>Need more Talent Coins? Purchase now and get bonus coins!</p>
      <ul class="bonus-list">
        <li>Buy 10 coins, get 1 free</li>
        <li>Buy 1000+ coins, get 30% bonus</li>
      </ul>
    </div>
   
  </div>
  
  
            <div class="wallet-actions">
                <div class="action-row">
                    
<!-- Buy Coins Button -->
 <button class="wallet-action-btn" id="buycoinsBtn">
                    
    <div class="action-icon">
        <i class="fas fa-shopping-chart"></i>
    </div>
    <span>Buy Talent Coin </span>
</button>

                 
                    <button class="wallet-action-btn" id="withdrawBtn">
                        <div class="action-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <span>Withdraw</span>
                    </button>
                </div>
                Â 
                <div class="action-row">
                    <button class="wallet-action-btn" id="transferBtn">
                        <div class="action-icon">
                            <i class="fas fa-paper-plane"></i>
                        </div>
                        <span>Transfer</span>
                        <div class="ribbon-wrapper">
                            <div class="ribbon">Coming Soon</div>
                        </div>
                    </button>
                     
                    <button class="wallet-action-btn" id="historyBtn">
                        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="action-icon">
                        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-paper-plane"></i>
                        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
                        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Transaction history</span>
                        Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
                      <button class="wallet-action-btn" id="changePinBtn">
                            <div class="action-icon">
                                <i class="fas fa-key"></i>
                            </div>
                            <span>Change PIN</span>
                        </button>
                </div>
            </div>
            
           
<!-- Recent Transaction History Preview -->
<div class="transaction-history">
    <h3>Recent Transactions</h3>
    <div class="transaction-list" id="recentTransactionList">
        <!-- Recent transactions will be loaded here -->
        <div class="empty-transactions" id="emptyRecentTransactions">
            <i class="fas fa-history"></i>
            <p>No transactions yet</p>
        </div>
    </div>
    <button class="view-all-btn" id="viewAllTransactionsBtn">View All Transactions</button>
</div>
        </div>
    </div>
</div> 

<!-- Buy Coins Modal -->
<div id="buyCoinsModal" class="buy-coins-modal">
  <div class="buyCoins-modal-content">
    <div class="buyCoins-modal-header">
      <h2>Buy Talent Coins</h2>
         <button class="close-buycoins" id="closebuycoinsmodal">&times;</button>
           
    </div>
    
    <div class="buyCoins-modal-tabs">
      <button class="buyCoins-tab-btn active" data-tab="buyTab">Buy Coins</button>
      <button class="buyCoins-tab-btn" data-tab="confirmTab">Confirm Payment</button>
    </div>
    
    <!-- Tab 1: Buy Coins -->
    <div id="buyTab" class="buyCoins-tab-content active">
      <div class="coin-purchase-form">
        <h3>Select Coin Package</h3>
        <p class="coin-rate-info">1 Talent Coin = 15 Naira</p>
        
        <div class="coin-packages">
          <div class="package-option">
            <input type="radio" id="package1" name="coinPackage" value="1">
            <label for="package1">1 Talent Coin</label>
            <span class="buyCoins-price">â‚¦15</span>
          </div>
          
          <div class="buyCoins-package-option">
            <input type="radio" id="package10" name="coinPackage" value="11">
            <label for="package10">10 + 1 Bonus Talent Coins</label>
            <span class="buyCoins-price">â‚¦150</span>
            <span class="buyCoins-bonus-tag">+1 Bonus</span>
          </div>
          
          <div class="buyCoins-package-option">
            <input type="radio" id="package50" name="coinPackage" value="55">
            <label for="package50">50 + 5 Bonus Talent Coins</label>
            <span class="buyCoins-price">â‚¦750</span>
            <span class="buyCoins-bonus-tag">+5 Bonus</span>
          </div>
          
          <div class="buyCoins-package-option">
            <input type="radio" id="package100" name="coinPackage" value="110">
            <label for="package100">100 + 10 Bonus Talent Coins</label>
            <span class="buyCoins-price">â‚¦1,500</span>
            <span class="buyCoins-bonus-tag">+10 Bonus</span>
          </div>
          
          <div class="buyCoins-package-option">
            <input type="radio" id="package200" name="coinPackage" value="220">
            <label for="package200">200 + 20 Bonus Talent Coins</label>
            <span class="buyCoins-price">â‚¦3,000</span>
            <span class="buyCoins-bonus-tag">+20 Bonus</span>
          </div>
          
          <div class="buyCoins-package-option">
            <input type="radio" id="package1000" name="coinPackage" value="1300">
            <label for="package1000">1000 + 300 Bonus Talent Coins</label>
            <span class="buyCoins-price">â‚¦15,000</span>
            <span class="buyCoins-bonus-tag">+300 Bonus</span>
          </div>
          
          <div class="buyCoins-package-option">
            <input type="radio" id="package2000" name="coinPackage" value="2600">
            <label for="package2000">2000 + 600 Bonus Talent Coins</label>
            <span class="buyCoins-price">â‚¦30,000</span>
            <span class="buyCoins-bonus-tag">+600 Bonus</span>
          </div>
        </div>
        
        <div class="buyCoins-summary-section">
          <div class="buyCoins-summary-row">
            <span>Selected Package:</span>
            <span id="selectedPackage">None</span>
          </div>
          <div class="buyCoins-summary-row">
            <span>Total Coins:</span>
            <span id="totalCoins">0</span>
          </div>
          <div class="buyCoins-summary-row">
            <span>Amount to Pay:</span>
            <span id="amountToPay">â‚¦0</span>
          </div>
        </div>
        
        <button id="payBtn" class="btn btn-success">Pay</button>
      </div>
      
      <!-- Payment Instructions (initially hidden) -->
      <div id="paymentInstructions" class="payment-instructions hidden">
        <h3>Payment Instructions</h3>
        <p>Please transfer the exact amount to the following account:</p>
        
        <div class="account-details">
          <div class="buyCoins-detail-row">
            <span class="buyCoins-detail-label">Account Name:</span>
            <span class="buyCoins-detail-value">Rewarder Quest</span>
          </div>
          <div class="buyCoins-detail-row">
            <span class="buyCoins-detail-label">Account Number (Opay):</span>
            <span class="buyCoins-detail-value">9078139367</span>
            <button class="buyCoins-copy-btn" data-copy="9078139367">Copy</button>
          </div>
          <div class="buyCoins-detail-row">
            <span class="buyCoins-detail-label">Amount:</span>
            <span class="buyCoins-detail-value" id="transferAmount">â‚¦0</span>
          </div>
        </div>
        
        <div class="instruction-note">
          <p>After making the transfer, please proceed to the "Confirm Payment" tab to complete your purchase.</p>
        </div>
        
        <button class="tab-nav-btn" data-tab="confirmTab">Proceed to Confirm Payment</button>
      </div>
    </div>
    
    <!-- Tab 2: Confirm Payment -->
    <div id="confirmTab" class="buyCoins-tab-content">
      <div class="payment-confirmation-form">
        <h3>Confirm Your Payment</h3>
        <p class="buyCoins-confirmation-info">Please fill in the details of your payment to verify your transaction.</p>
        </div>
        <form id="paymentConfirmationForm">
          <div class="buyCoins-form-group">
            <label for="fullName">Full Name</label>
            <input type="text" id="fullName" name="fullName" required>
          </div>
          
          
        

          
          <div class="buyCoins-form-group">
            <label for="email">Email</label>
            <input type="tel" id="email" name="email" required>
          </div>
          
          
          <div class="buyCoins-verification-notice">
            <p>Talent Coins will be credited to your wallet within 1 to 30 minutes after successful verification.</p>
          </div>
         
    
  
          <button type="submit" id="submitConfirmation" class="btn btn-primary">Submit Confirmation</button>
        </form>
      </div>
      
      <!-- Confirmation Success (initially hidden) -->
      <div id="confirmationSuccess" class="confirmation-success hidden">
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h3>Payment Confirmation Submitted!</h3>
        <p>Your payment confirmation has been submitted successfully.</p>
        <div class="pending-info">
          <p>Your purchase of <span id="pendingCoins">0</span> Talent Coins has been added to your pending balance.</p>
          <p>The coins will be credited to your wallet within 1 to 30 minutes after verification.</p>
        </div>
        <button id="closeModalBtn" class="btn btn-secondary">Close</button>
      </div>
    </div>
  </div>

<!-- Withdraw Modal (Add this to your existing HTML) -->
<div id="withdrawModal" class="withdraw-modal">
Â  Â  <div class="withdraw-modal-content">
Â  Â  Â  Â 
Â  Â  Â  Â   <!-- PIN Verification Screen -->
        <div id="pinVerificationScreen" class="modal-screen active">
            <div class="modal-header">
                <h2>Verify PIN</h2>    
                Â <button class="close-withdraw-modal" id="closewithdrawmodal">&times;</button>
Â  Â  Â  Â  Â  Â 
           </div>
            <div class="pin-verification-content">
                <div class="pin-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h3>Enter Your Wallet PIN</h3>
                <p>Please enter your 4-digit wallet PIN to continue</p>
                
                <div class="pin-input-container">
                    <input type="password" class="pin-digit" maxlength="1" inputmode="numeric" pattern="[0-9]*">
                    <input type="password" class="pin-digit" maxlength="1" inputmode="numeric" pattern="[0-9]*">
                    <input type="password" class="pin-digit" maxlength="1" inputmode="numeric" pattern="[0-9]*">
                    <input type="password" class="pin-digit" maxlength="1" inputmode="numeric" pattern="[0-9]*">
                </div>
                
                <div class="error-message" id="pinError"></div>
                
                <button id="verifyPinBtn" class="btn btn-primary">Verify PIN</button>
            </div>
        </div>
        
       <!-- Withdrawal Form Screen -->
Â  Â  Â  Â  <div id="withdrawFormScreen" class="withdrawmodal-screen">
Â  Â  Â  Â  Â  Â  <div class="withdraw-modal-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>Withdraw Funds</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button class="close-withdraw-modal" id="closewithdrawmodal">&times;</button>
Â  Â  Â  Â  Â  Â Â  
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="withdraw-form-content">
Â  Â  Â  Â  Â  Â  Â  <div class="balance-info">
Â  Â  Â Â  
    Â  Â  Â  Â  Â  Â  Â  Â  <div class="balance-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="balance-label">Talent Coin Balance:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="balance-value" id="talentcoinBalance">0 TC</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="balance-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="balance-label">Naira Equivalent:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="balance-value" id="nairaEquivalent">â‚¦0</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <form id="withdrawForm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdraw-form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="withdrawAmount">Amount (Talent Coins)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="withdrawAmount" name="withdrawAmount" min="10" step="1" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="input-note">Minimum withdrawal: 10 Talent Coins</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="amount-preview">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span>You will receive:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
     Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="nairaAmount">â‚¦0</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdraw-form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="bankSelect">Select Bank</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="bankSelect" name="bankSelect" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">-- Select Bank --</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="access">Access Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="firstbank">First Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="gtb">Guaranty Trust Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="zenith">Zenith Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="uba">United Bank for Africa</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="stanbic">Stanbic IBTC Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="fcmb">First City Monument Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="fidelity">Fidelity Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="ecobank">Ecobank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="union">Union Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="sterling">Sterling Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="polaris">Polaris Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="wema">Wema Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="opay">OPay</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="palmpay">PalmPay</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="kuda">Kuda Bank</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="moniepoint">Moniepoint</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdraw-form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="accountNumber">Account Number</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="accountNumber" name="accountNumber" pattern="[0-9]{10}" maxlength="10" inputmode="numeric" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="input-note">Enter a valid 10-digit account number</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdraw-form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="accountName">Account Name</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="accountName" name="accountName" readonly>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="verifyAccountBtn" class="btn btn-secondary btn-sm">Verify Account</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdraw-fee-summary">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdraw-summary-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Withdrawal Amount:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="withdraw-summaryAmount">0 TC</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdraw-summary-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Processing Fee:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="processingFee">0 TC</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdraw-summary-row total">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Total Deduction:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="totalDeduction">0 TC</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" id="submitWithdrawBtn" class="btn btn-success" disabled>Withdraw Funds</button>
Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <!-- Processing Screen -->
Â  Â  Â  Â  <div id="processingScreen" class="withdrawmodal-screen">
Â  Â  Â  Â  Â  Â  <div class="withdrawprocessing-content">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="loader"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <h3>Processing Your Withdrawal</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p>Please wait while we process your request...</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <!-- Success Screen -->
Â  Â  Â  Â  <div id="successScreen" class="withdrawmodal-screen">
Â  Â  Â  Â  Â  Â  <div class="withdrawsuccess-content">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="success-icon">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-check-circle"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <h3>Withdrawal Successful!</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p>Your withdrawal request has been processed successfully.</p>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdrawtransaction-details">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdrawdetail-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="withdrawdetail-label">Amount:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="withdrawdetail-value" id="successAmount">0 TC (â‚¦0)</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdrawdetail-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="withdrawdetail-label">Account:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="withdrawdetail-value" id="successAccount"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdrawdetail-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="withdrawdetail-label">Transaction ID:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="withdrawdetail-value" id="transactionId"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdrawdetail-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="withdrawdetail-label">Date & Time:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="withdrawdetail-value" id="transactionDate"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <p class="success-note">The funds will be credited to your account within 1min to 5 mins.</p>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <button id="closeSuccessBtn" class="btn btn-primary">Done</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <!-- Error Screen -->
Â  Â  Â  Â  <div id="errorScreen" class="withdrawmodal-screen">
Â  Â  Â  Â  Â  Â  <div class="withdrawerror-content">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdrawerror-icon">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-exclamation-circle"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <h3>Withdrawal Failed</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="withdrawerrorMessage">There was an error processing your withdrawal request.</p>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="withdrawerror-actions">Â <button id="tryAgainBtn" class="btn btn-primary">Try Again</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="contactSupportBtn" class="btn btn-secondary">Contact Support</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>
</div>

<!-- Transaction History Modal -->
<div id="transactionHistoryModal" class="transaction-modal">
    <div class="Historymodal-content">
        <div class="Historymodal-header">
            <h2>Transaction History</h2>
                 <button class="close-History" id="closetransactionhistorymodal">&times;</button>
           
        </div>
        
        <div class="Historytransaction-filters">
            <div class="Historyfilter-group">
                <label for="transactionType">Type:</label>
                <select id="transactionType">
                    <option value="all">All Transactions</option>
                    <option value="purchase">Purchases</option>
                    <option value="withdrawal">Withdrawals</option>
                    <option value="commission">Commissions</option>
                    <option value="earning">Earnings</option>
                </select>
            </div>
            
            <div class="Historyfilter-group">
                <label for="dateRange">Period:</label>
                <select id="dateRange">
                    <option value="all">All Time</option>
                    <option value="today">Today</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                    <option value="year">This Year</option>
                </select>
            </div>
            
            <div class="Historyfilter-group">
                <label for="transactionStatus">Status:</label>
                <select id="transactionStatus">
                    <option value="all">All Status</option>
                    <option value="completed">Completed</option>
                    <option value="pending">Pending</option>
                    <option value="failed">Failed</option>
                </select>
            </div>
            
            <button id="applyFilters" class="Historyfilter-btn">Apply Filters</button>
        </div>
        
        <div class="transaction-summary">
            <div class="Historysummary-card">
                <h4>Total Purchases</h4>
                <p id="totalPurchases">0 TC</p>
            </div>
            <div class="Historysummary-card">
                <h4>Total Withdrawals</h4>
                <p id="totalWithdrawals">0 TC</p>
            </div>
            <div class="Historysummary-card">
                <h4>Total Earnings</h4>
                <p id="totalEarnings">0 TC</p>
            </div>
            <div class="Historysummary-card">
                <h4>Total Commissions</h4>
                <p id="totalCommissions">0 TC</p>
            </div>
        </div>
        
        <div class="transaction-table-container">
            <table class="transaction-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody id="transactionTableBody">
                    <!-- Transactions will be loaded here -->
                </tbody>
            </table>
            
            <div class="empty-state" id="emptyTransactions">
                <i class="fas fa-search"></i>
                <p>No transactions found</p>
                <span>Try changing your filters</span>
            </div>
            
            <div class="loading-transactions" id="loadingTransactions">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Loading transactions...</p>
            </div>
        </div>
        
        <div class="History-pagination">
            <button id="prevPage" class="pagination-btn" disabled>
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            <span id="pageIndicator">Page 1 of 1</span>
            <button id="nextPage" class="pagination-btn" disabled>
                Next <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        
        <div class="Historyexport-section">
            <button id="exportCSV" class="export-btn">
                <i class="fas fa-file-csv"></i> Export CSV
            </button>
            <button id="printTransactions" class="export-btn">
                <i class="fas fa-print"></i> Print
            </button>
        </div>
    </div>
</div>

<!-- Transaction Details Modal -->
<div id="transactionDetailsModal" class="transaction-details-modal">
    <div class="Historymodal-content">
        <div class="modal-header">
            <h2>Transaction Details</h2>
                 <button class="close-History" id="closetransactiondetailsmodal">&times;</button>
           
        </div>
        
        <div class="transaction-details-content" id="transactionDetailsContent">
            <!-- Transaction details will be loaded here -->
        </div>
        
        <div class="Historymodal-footer">
            <button id="closeDetailsBtn" class="btn btn-secondary">Close</button>
        </div>
    </div>
</div>



<div class="game-portal-container">
  <!-- Game Portal Header -->
  <div class="game-portal-header">
    <h2>Game Portal</h2>
    <button class="close-portal-btn">&times;</button>
  </div>

  <!-- Game Categories -->
  <div class="game-categories">
    <button class="category-btn active" data-category="all">All Games</button>
    <button class="category-btn" data-category="action">Action</button>
    <button class="category-btn" data-category="puzzle">Puzzle</button>
    <button class="category-btn" data-category="strategy">Strategy</button>
    <button class="category-btn" data-category="arcade">Arcade</button>
    <button class="category-btn" data-category="card">Card Games</button>
  </div>

  <!-- Search Bar -->
  <div class="game-search-container">
    <input type="text" id="gameSearch" placeholder="Search games...">
    <button class="search-btn"><i class="fas fa-search"></i></button>
  </div>

  <!-- Featured Games Carousel -->
  <div class="featured-games-carousel">
    <h3>Featured Games</h3>
    <div class="carousel-container">
      <button class="carousel-nav prev"><i class="fas fa-chevron-left"></i></button>
      <div class="carousel-items">
        <div class="featured-game" data-game-id="game1">
          <div class="game-thumbnail" style="background-image: url('images/games/featured-game1.jpg')"></div>
          <div class="game-info">
            <h4>Space Adventure</h4>
            <div class="game-meta">
              <span class="game-category">Action</span>
              <span class="game-rating"><i class="fas fa-star"></i> 4.8</span>
            </div>
          </div>
        </div>
        <div class="featured-game" data-game-id="game2">
          <div class="game-thumbnail" style="background-image: url('images/games/featured-game2.jpg')"></div>
          <div class="game-info">
            <h4>Puzzle Master</h4>
            <div class="game-meta">
              <span class="game-category">Puzzle</span>
              <span class="game-rating"><i class="fas fa-star"></i> 4.6</span>
            </div>
          </div>
        </div>
        <div class="featured-game" data-game-id="game3">
          <div class="game-thumbnail" style="background-image: url('images/games/featured-game3.jpg')"></div>
          <div class="game-info">
            <h4>Card Kingdom</h4>
            <div class="game-meta">
              <span class="game-category">Card</span>
              <span class="game-rating"><i class="fas fa-star"></i> 4.7</span>
            </div>
          </div>
        </div>
      </div>
      <button class="carousel-nav next"><i class="fas fa-chevron-right"></i></button>
    </div>
  </div>

  <!-- Game Grid -->
  <div class="games-grid-container">
    <h3>All Games</h3>
    <div class="games-grid">
      <!-- Game Card Template -->
      <!-- These will be dynamically populated from your game data -->
      <div class="game-card" data-game-id="game1" data-category="action">
        <div class="game-thumbnail" style="background-image: url('images/games/game1.jpg')">
          <div class="game-overlay">
            <button class="play-now-btn">Play Now</button>
          </div>
        </div>
        <div class="game-details">
          <h4 class="game-title">Space Adventure</h4>
          <div class="game-meta">
            <span class="game-category">Action</span>
            <span class="game-rating"><i class="fas fa-star"></i> 4.8</span>
          </div>
          <p class="game-description">Explore the universe and battle alien forces in this action-packed space adventure.</p>
          <div class="game-stats">
            <span class="plays-count"><i class="fas fa-gamepad"></i> 12.5k plays</span>
            <span class="coin-reward"><i class="fas fa-coins"></i> Win up to 50 coins</span>
          </div>
        </div>
      </div>

      <!-- More game cards will be added dynamically -->
    </div>

    <!-- Load More Games Button -->
    <button class="load-more-btn">Load More Games</button>
  </div>

  <!-- Recently Played Games -->
  <div class="recently-played-container">
    <h3>Recently Played</h3>
    <div class="recently-played-games">
      <!-- Will be populated dynamically based on user history -->
      <p class="no-games-message">You haven't played any games yet.</p>
    </div>
  </div>
</div>

<!-- Game Modal (appears when a game is selected) -->
<div id="gameModal" class="game-modal">
  <div class="game-modal-content">
    <div class="game-modal-header">
      <h2 id="modalGameTitle">Game Title</h2>
      <button class="close-game-modal">&times;</button>
    </div>
    <div class="game-modal-body">
      <div class="game-iframe-container">
        <iframe id="gameIframe" src="" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="game-controls">
        <button class="fullscreen-btn"><i class="fas fa-expand"></i></button>
        <button class="refresh-game-btn"><i class="fas fa-redo"></i></button>
      </div>
      <div class="game-info-panel">
        <div class="game-description-panel">
          <h3>About This Game</h3>
          <p id="modalGameDescription">Game description will appear here.</p>
        </div>
        <div class="game-rewards-panel">
          <h3>Rewards</h3>
          <p>Win up to <span id="modalGameReward">0</span> Talent Coins by achieving high scores!</p>
          <div class="reward-tiers">
            <div class="reward-tier">
              <span class="tier-label">Bronze</span>
              <span class="tier-coins">5 Coins</span>
            </div>
            <div class="reward-tier">
              <span class="tier-label">Silver</span>
              <span class="tier-coins">15 Coins</span>
            </div>
            <div class="reward-tier">
              <span class="tier-label">Gold</span>
              <span class="tier-coins">30 Coins</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Rewarder Modal - Initially hidden -->
<div id="rewarderModal" class="rewarder-modal hidden">
    <div class="rewarder-modal-content">
        <div class="rewarder-modal-header">
            <h2>Rewarder Quest</h2>
            <span class="close-rewarder-modal">&times;</span>
        </div>
        <div class="rewarder-modal-body">
            <p class="rewarder-intro">Complete quests to earn Talent Coins and bonuses</p>
             <!--  Bonuses Card -->
                <div class="bonus-card" id="bonusesCard">
                    <div class="bonus-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <div class="bonus-info">
                        <h3>Bonuses</h3>
                        <p>Special rewards and offers</p>
                        <div class="bonus-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0/5 bonuses</span>
                        </div>
                    </div>
                    <button class="claim-btn" id="bonusesBtn">
                        <span class="btn-text">View</span>
                        <span class="coin-amount">+?</span>
                    </button>
                </div>
            <!-- Bonus Cards Container -->
            <div class="bonus-cards-container">
                <!-- Daily Login Bonus Card -->
                <div class="bonus-card" id="dailyLoginCard">
                    <div class="bonus-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="bonus-info">
                        <h3>Daily Login</h3>
                        <p>Login daily to earn coins</p>
                        <div class="bonus-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0/7 days</span>
                        </div>
                    </div>
                    <button class="claim-btn" id="claimDailyBtn" disabled>
                        <span class="btn-text">Claim</span>
                        <span class="coin-amount">+1</span>
                    </button>
                </div>

                <!-- Referral Bonus Card -->
                <div class="bonus-card" id="referralCard">
                    <div class="bonus-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="bonus-info">
                        <h3>Refer Friends</h3>
                        <p>Earn when friends join</p>
                        <div class="bonus-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0 referrals</span>
                        </div>
                    </div>
                    <button class="claim-btn" id="referBtn">
                        <span class="btn-text">Refer</span>
                        <span class="coin-amount">+5</span>
                    </button>
                </div>

                <!-- Investment Bonus Card -->
                <div class="bonus-card" id="investmentCard">
                    <div class="bonus-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="bonus-info">
                        <h3>Invest</h3>
                        <p>Grow your coins with interest</p>
                        <div class="bonus-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0 coins invested</span>
                        </div>
                    </div>
                    <button class="claim-btn" id="investBtn">
                        <span class="btn-text">Invest</span>
                        <span class="coin-amount">+10%</span>
                    </button>
                </div>

                <!-- Journey Bonus Card -->
                <div class="bonus-card" id="journeyCard">
                    <div class="bonus-icon">
                        <i class="fas fa-route"></i>
                    </div>
                    <div class="bonus-info">
                        <h3>Journey</h3>
                        <p>Complete tasks to earn rewards</p>
                        <div class="bonus-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0/10 tasks</span>
                        </div>
                    </div>
                    <button class="claim-btn" id="journeyBtn">
                        <span class="btn-text">Start</span>
                        <span class="coin-amount">+20</span>
                    </button>
                </div>

               
            </div>

            <!-- Advertisement Banner -->
            <div class="ad-banner">
                <img src="assets/images/ad-banner.jpg" alt="Special Offer" width="400" height="60">
            </div>

            <!-- Rewarder Quests Section -->
            <div class="rewarder-quests">
                <h3>Available Quests</h3>
                
                <div class="quest-list">
                    <!-- Quest Item 1 -->
                    <div class="quest-item">
                        <div class="quest-icon">
                            <i class="fas fa-user-edit"></i>
                        </div>
                        <div class="quest-details">
                            <h4>Complete Your Profile</h4>
                            <p>Add a profile picture and complete your bio</p>
                            <div class="quest-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 30%"></div>
                                </div>
                                <span class="progress-text">30% complete</span>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="coin-amount">+3</span>
                            <button class="quest-btn" data-quest="profile">Start</button>
                        </div>
                    </div>

                    <!-- Quest Item 2 -->
                    <div class="quest-item">
                        <div class="quest-icon">
                            <i class="fas fa-comment"></i>
                        </div>
                        <div class="quest-details">
                            <h4>Post 5 Comments</h4>
                            <p>Engage with the community by posting comments</p>
                            <div class="quest-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 20%"></div>
                                </div>
                                <span class="progress-text">1/5 comments</span>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="coin-amount">+5</span>
                            <button class="quest-btn" data-quest="comments">Continue</button>
                        </div>
                    </div>

                    <!-- Quest Item 3 -->
                    <div class="quest-item">
                        <div class="quest-icon">
                            <i class="fas fa-share-alt"></i>
                        </div>
                        <div class="quest-details">
                            <h4>Share Content</h4>
                            <p>Share 3 posts on social media</p>
                            <div class="quest-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="progress-text">0/3 shares</span>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="coin-amount">+7</span>
                            <button class="quest-btn" data-quest="share">Start</button>
                        </div>
                    </div>

                    <!-- Quest Item 4 -->
                    <div class="quest-item">
                        <div class="quest-icon">
                            <i class="fas fa-upload"></i>
                        </div>
                        <div class="quest-details">
                            <h4>Upload Content</h4>
                            <p>Upload your first original content</p>
                            <div class="quest-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="progress-text">0/1 uploads</span>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="coin-amount">+10</span>
                            <button class="quest-btn" data-quest="upload">Start</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Referral Sub-Modal (Hidden by default) -->
<div id="referralSubModal" class="rewarder-sub-modal hidden">
    <div class="rewarder-sub-modal-content">
        <div class="rewarder-sub-modal-header">
            <h2>Refer Friends & Earn</h2>
            <span class="close-rewarder-sub-modal">&times;</span>
        </div>
        <div class="rewarder-sub-modal-body">
            <div class="referral-info">
                <div class="referral-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>Earn 5 Talent Coins for each friend who joins!</h3>
                <p>Share your unique referral link with friends. When they sign up, you'll both receive 5 Talent Coins.</p>
            </div>
            
            <div class="referral-link-container">
                <label for="referralLink">Your Referral Link:</label>
                <div class="link-copy-group">
                    <input type="text" id="referralLink" readonly>
                    <button id="copyReferralLink" class="copy-btn">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
            
            <div class="share-options">
                <h4>Share via:</h4>
                <div class="social-share-buttons">
                    <button class="share-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </button>
                    <button class="share-btn facebook">
                        <i class="fab fa-facebook-f"></i>
                    </button>
                    <button class="share-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </button>
                    <button class="share-btn telegram">
                        <i class="fab fa-telegram-plane"></i>
                    </button>
                </div>
            </div>
            
            <div class="referral-stats">
                <div class="stat-item">
                    <span class="stat-label">Total Referrals:</span>
                    <span class="stat-value" id="totalReferrals">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Coins Earned:</span>
                    <span class="stat-value" id="referralCoinsEarned">0</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Investment Sub-Modal (Hidden by default) -->
<div id="investmentSubModal" class="rewarder-sub-modal hidden">
    <div class="rewarder-sub-modal-content">
        <div class="rewarder-sub-modal-header">
            <h2>Invest Your Talent Coins</h2>
            <span class="close-rewarder-sub-modal">&times;</span>
        </div>
        <div class="rewarder-sub-modal-body">
            <div class="investment-info">
                <div class="investment-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Grow your coins with interest!</h3>
                <p>Invest your Talent Coins and earn up to 10% interest over time.</p>
            </div>
            
            <div class="investment-plans">
                <div class="plan-option">
                    <input type="radio" id="plan1" name="investmentPlan" value="basic">
                    <label for="plan1">
                        <div class="plan-details">
                            <h4>Basic Plan</h4>
                            <p>5% return after 7 days</p>
                            <p class="min-amount">Min: 10 Coins</p>
                        </div>
                    </label>
                </div>
                
                <div class="plan-option">
                    <input type="radio" id="plan2" name="investmentPlan" value="standard">
                    <label for="plan2">
                        <div class="plan-details">
                            <h4>Standard Plan</h4>
                            <p>7% return after 14 days</p>
                            <p class="min-amount">Min: 50 Coins</p>
                        </div>
                    </label>
                </div>
                
                <div class="plan-option">
                    <input type="radio" id="plan3" name="investmentPlan" value="premium">
                    <label for="plan3">
                        <div class="plan-details">
                            <h4>Premium Plan</h4>
                            <p>10% return after 30 days</p>
                            <p class="min-amount">Min: 100 Coins</p>
                        </div>
                    </label>
                </div>
            </div>
            
            <div class="investment-amount">
                <label for="coinAmount">Amount to Invest:</label>
                <input type="number" id="coinAmount" min="10" placeholder="Enter coin amount">
            </div>
            
            <div class="investment-summary">
                <div class="summary-row">
                    <span>Investment Amount:</span>
                    <span id="investmentAmount">0 Coins</span>
                </div>
                <div class="summary-row">
                    <span>Expected Return:</span>
                    <span id="expectedReturn">0 Coins</span>
                </div>
                <div class="summary-row">
                    <span>Maturity Date:</span>
                    <span id="maturityDate">-</span>
                </div>
            </div>
            
            <button id="confirmInvestmentBtn" class="btn btn-primary">Invest Now</button>
        </div>
    </div>
</div>

        

             
           <!-- Creator Page Modal -->
<div class="creator-modal-overlay" id="creatorModal" onclick="closeCreatorModal(event)">
    <div class="creator-modal-container" onclick="event.stopPropagation()">
        <!-- Modal Header with Close Button -->
        <div class="creator-modal-header">
            <h2>ðŸŽ¬ Creator Hub</h2>
            <button class="creator-modal-close-btn" onclick="closeCreatorModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Top Banner Ad -->
        <div class="creator-banner-ad top-banner">
            <div class="creator-ad-content">
                <span class="creator-ad-label">Sponsored</span>
                <p>Create amazing events and reach thousands of participants!</p>
            </div>
        </div>

        <!-- Scrollable Content Area -->
        <div class="creator-content-area">
            <div class="creator-cards-container">
                <!-- Entertainment Event Card -->
                <div class="creator-card-btn" onclick="openEntertainmentEvent()">
                    <div class="creator-card-icon">
                        <i class="fas fa-theater-masks"></i>
                    </div>
                    <div class="creator-card-content">
                        <h3>Entertainment Event</h3>
                        <p>Create talent shows, performances & entertainment events</p>
                    </div>
                    <div class="creator-card-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>

                <!-- Sport Event Card -->
                <div class="creator-card-btn" onclick="openSportEvent()">
                    <div class="creator-card-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="creator-card-content">
                        <h3>Sport Event</h3>
                        <p>Organize sports competitions & tournaments</p>
                    </div>
                    <div class="creator-card-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>

                <!-- Award Ceremony Card -->
                <div class="creator-card-btn" onclick="openAwardCeremony()">
                    <div class="creator-card-icon">
                        <i class="fas fa-award"></i>
                    </div>
                    <div class="creator-card-content">
                        <h3>Award Ceremony</h3>
                        <p>Host award ceremonies & recognition events</p>
                    </div>
                    <div class="creator-card-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>

                <!-- Placeholder for future buttons -->
                <div class="creator-add-more">
                    <div class="creator-add-icon">
                        <i class="fas fa-plus"></i>
                    </div>
                    <p>More event types coming soon...</p>
                </div>
            </div>
        </div>

        <!-- Bottom Banner Ad -->
        <div class="creator-banner-ad bottom-banner">
            <div class="creator-ad-content">
                <span class="creator-ad-label">Featured</span>
                <p>Boost your events with premium features and wider reach!</p>
            </div>
        </div>
    </div>
</div>
             
                      
       <!-- Entertainment Event Page -->
<div class="entertainment-event-page" id="entertainmentEventPage">
    <!-- Close Button -->
    <div class="entertainment-page-header">
        <h2>Entertainment Event</h2>
        <button class="close-entertainment-event-page-btn" id="closeEntertainmentEventPageBtn">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Banner Ad -->
    <div class="entertainment-banner-ad">
        <div class="entertainment-ad-content">
            <span class="entertainment-ad-label">Sponsored</span>
            <p>Create amazing entertainment events and showcase your talent to the world!</p>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="entertainment-action-buttons">
        <button class="entertainment-action-btn host-entertainment-event" id="hostEntertainmentEvent">
            <div class="entertainment-btn-icon">
                <i class="fas fa-plus-circle"></i>
            </div>
            <span>Host</span>
        </button>

        <button class="entertainment-action-btn joined-entertainment-event" id="joinedEntertainmentEvent">
            <div class="entertainment-btn-icon">
                <i class="fas fa-users"></i>
            </div>
            <span>Joined</span>
        </button>
    </div>

    <!-- Tabs Navigation -->
    <div class="entertainment-tabs">
        <div class="entertainment-tabs-header">
            <button class="entertainment-tab-btn active live-entertainment-event" id="liveEntertainmentEvent" onclick="switchEntertainmentTab('live')">
                <i class="fas fa-broadcast-tower"></i>
                <span>Live Events</span>
            </button>
            <button class="entertainment-tab-btn new-entertainment-event" id="newEntertainmentEvent" onclick="switchEntertainmentTab('new')">
                <i class="fas fa-calendar-plus"></i>
                <span>New Events</span>
            </button>
            <button class="entertainment-tab-btn previous-entertainment-event" id="previousEntertainmentEvent" onclick="switchEntertainmentTab('previous')">
                <i class="fas fa-history"></i>
                <span>Previous Events</span>
            </button>
        </div>

        <!-- Tab Contents -->
        <div class="entertainment-tab-content">
            <!-- Live Events Tab -->
            <div class="entertainment-tab-pane active" id="entertainment-live-tab">
                <div class="entertainment-cards-container" id="liveEventsContainer">
                    <!-- Entertainment cards will be loaded here -->
                    <div class="entertainment-empty-state">
                        <i class="fas fa-broadcast-tower"></i>
                        <p>No live events of yours now</p>
                    </div>
                </div>
            </div>

            <!-- New Events Tab -->
            <div class="entertainment-tab-pane" id="entertainment-new-tab">
                <div class="entertainment-cards-container" id="newEventsContainer">
                    <!-- Entertainment cards will be loaded here -->
                    <div class="entertainment-empty-state">
                        <i class="fas fa-calendar-plus"></i>
                        <p>No entertainment card<br>Try creating</p>
                    </div>
                </div>
            </div>

            <!-- Previous Events Tab -->
            <div class="entertainment-tab-pane" id="entertainment-previous-tab">
                <div class="entertainment-cards-container" id="previousEventsContainer">
                    <!-- Entertainment cards will be loaded here -->
                    <div class="entertainment-empty-state">
                        <i class="fas fa-history"></i>
                        <p>No previous events</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
     
          <!-- Host Entertainment Event Popup -->
<div class="host-entertainment-popup-overlay" id="hostEntertainmentPopup">
    <div class="host-entertainment-popup-container">
        <!-- Close Button -->
        <div class="host-entertainment-popup-header">
            <h2>ðŸŽ­ Host Entertainment Event</h2>
            <button class="close-host-entertainment-popup-btn" id="closeHostEntertainmentPopupBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Banner Ad -->
        <div class="host-entertainment-banner-ad">
            <div class="host-entertainment-ad-content">
                <span class="host-entertainment-ad-label">Featured</span>
                <p>Create your entertainment event and connect with talented participants!</p>
            </div>
        </div>

        <!-- Form Content -->
        <div class="host-entertainment-form-content">
            <form id="hostEntertainmentForm">
                <!-- Event Type Selection -->
                <div class="form-group">
                    <label for="eventType">Event Type</label>
                    <select id="eventType" class="form-select" onchange="updateEventTypeOptions()">
                        <option value="">Select Event Type</option>
                        <option value="medium">Medium Event</option>
                        <option value="tactical">Tactical Event</option>
                        <option value="bigRush">Big Rush</option>
                    </select>
                </div>

                <!-- Category Selection -->
                <div class="form-group" id="categoryGroup" style="display: none;">
                    <label for="eventCategory">Category</label>
                    <select id="eventCategory" class="form-select">
                        <option value="">Select Category</option>
                    </select>
                    <div class="custom-category-input" style="display: none;">
                        <input type="text" id="customCategory" placeholder="Enter custom category" class="form-input">
                        <button type="button" onclick="addCustomCategory()" class="add-category-btn">Add</button>
                    </div>
                    <button type="button" onclick="toggleCustomCategory()" class="custom-category-toggle">Add Custom Category</button>
                </div>

                <!-- Duration Selection -->
                <div class="form-group" id="durationGroup" style="display: none;">
                    <label for="eventDuration">Event Duration</label>
                    <select id="eventDuration" class="form-select">
                        <option value="">Select Duration</option>
                    </select>
                </div>

                <!-- Participants -->
                <div class="form-group" id="participantsGroup" style="display: none;">
                    <label for="maxParticipants">Maximum Participants</label>
                    <input type="number" id="maxParticipants" class="form-input" min="10" max="50">
                    <small class="form-help" id="participantsHelp">Minimum: 10, Maximum: 50</small>
                </div>

                <!-- Entry Fee -->
                <div class="form-group" id="entryFeeGroup" style="display: none;">
                    <label>Entry Fee</label>
                    <div class="fee-options">
                        <div class="fee-input-wrapper">
                            <input type="number" id="entryFee" class="form-input fee-input" min="1" max="500" placeholder="30">
                            <span class="currency-label">TC</span>
                            <span class="naira-equivalent" id="entryFeeNaira">â‰ˆ â‚¦450</span>
                        </div>
                        <button type="button" class="no-fee-btn" id="noEntryFeeBtn" onclick="toggleEntryFee()">No Entry Fee</button>
                    </div>
                </div>

                <!-- Voting Fee -->
                <div class="form-group" id="votingFeeGroup" style="display: none;">
                    <label>Voting Fee</label>
                    <div class="fee-options">
                        <div class="fee-input-wrapper">
                            <input type="number" id="votingFee" class="form-input fee-input" min="1" max="500" placeholder="20">
                            <span class="currency-label">TC</span>
                            <span class="naira-equivalent" id="votingFeeNaira">â‰ˆ â‚¦300</span>
                        </div>
                        <button type="button" class="no-fee-btn" id="noVotingFeeBtn" onclick="toggleVotingFee()">No Voting Fee</button>
                    </div>
                </div>

                <!-- Event Name -->
                <div class="form-group" id="eventNameGroup" style="display: none;">
                    <label for="eventName">Event Name</label>
                    <input type="text" id="eventName" class="form-input" placeholder="Enter event name" maxlength="50">
                </div>

                <!-- Event Description -->
                <div class="form-group" id="descriptionGroup" style="display: none;">
                    <label for="eventDescription">Event Description</label>
                    <textarea id="eventDescription" class="form-textarea" placeholder="Describe your event (20-100 words)" rows="4"></textarea>
                    <small class="form-help">
                        <span id="wordCount">0</span>/100 words (minimum 20 words)
                    </small>
                </div>

                <!-- Background Selection -->
                <div class="form-group" id="backgroundGroup" style="display: none;">
                    <label>Event Background</label>
                    <div class="background-options">
                        <div class="background-tabs">
                            <button type="button" class="bg-tab active" onclick="switchBackgroundTab('image')">Image</button>
                            <button type="button" class="bg-tab" onclick="switchBackgroundTab('color')">Color</button>
                        </div>
                        <div class="background-content">
                            <div class="bg-content active" id="imageContent">
                                <input type="file" id="backgroundImage" accept="image/*" class="file-input">
                                <label for="backgroundImage" class="file-label">
                                    <i class="fas fa-upload"></i>
                                    Choose Background Image
                                </label>
                            </div>
                            <div class="bg-content" id="colorContent">
                                <div class="color-palette">
                                    <div class="color-option" style="background: #FF6B6B" onclick="selectColor('#FF6B6B')"></div>
                                    <div class="color-option" style="background: #4ECDC4" onclick="selectColor('#4ECDC4')"></div>
                                    <div class="color-option" style="background: #45B7D1" onclick="selectColor('#45B7D1')"></div>
                                    <div class="color-option" style="background: #96CEB4" onclick="selectColor('#96CEB4')"></div>
                                    <div class="color-option" style="background: #FFEAA7" onclick="selectColor('#FFEAA7')"></div>
                                    <div class="color-option" style="background: #DDA0DD" onclick="selectColor('#DDA0DD')"></div>
                                </div>
                                <input type="color" id="customColor" class="custom-color-input" onchange="selectColor(this.value)">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tags -->
                <div class="form-group" id="tagsGroup" style="display: none;">
                    <label>Tags</label>
                    <div class="tags-section">
                        <div class="tag-input-section">
                            <input type="text" id="hashtagInput" placeholder="Add hashtag" class="tag-input">
                            <button type="button" onclick="addHashtag()" class="add-tag-btn"># Add</button>
                        </div>
                        <div class="tag-input-section">
                            <input type="text" id="startagInput" placeholder="Add star tag" class="tag-input">
                            <button type="button" onclick="addStartag()" class="add-tag-btn">* Add</button>
                        </div>
                        <div class="tags-display">
                            <div class="hashtags" id="hashtagsDisplay"></div>
                            <div class="startags" id="startagsDisplay"></div>
                        </div>
                    </div>
                </div>

                <!-- Event Rules -->
                <div class="form-group" id="rulesGroup" style="display: none;">
                    <label>Event Rules</label>
                    <div class="rules-section">
                        <div class="rule-input-section">
                            <textarea id="ruleInput" placeholder="Enter event rule" class="rule-textarea" rows="2"></textarea>
                            <button type="button" onclick="addRule()" class="add-rule-btn">Add Rule</button>
                        </div>
                        <div class="rules-list" id="rulesList"></div>
                        <small class="form-help">
                            <span id="rulesCount">0</span>/15 rules (minimum 1 rule required)
                        </small>
                    </div>
                </div>

                   <!-- Update the payment summary section -->
<div class="form-group" id="paymentGroup" style="display: none;">
    <label class="form-label">Payment Method</label>
    
    <!-- Update the payment method selection with click handlers -->
<div class="payment-method-selection">
    <div class="payment-option">
        <input type="radio" id="tcBalancePayment" name="paymentMethod" value="tcBalance" checked>
        <label for="tcBalancePayment" class="payment-option-label" onclick="togglePaymentMethod('tcBalance')">
            <i class="fas fa-coins"></i>
            <span>Pay with TC Balance</span>
        </label>
    </div>
    
    <div class="payment-option">
        <input type="radio" id="promoCodePayment" name="paymentMethod" value="promoCode">
        <label for="promoCodePayment" class="payment-option-label" onclick="togglePaymentMethod('promoCode')">
            <i class="fas fa-ticket-alt"></i>
            <span>Use Promo Code</span>
        </label>
    </div>
</div>

    
    <!-- Promo Code Input -->
    <div class="promo-code-section" id="promoCodeSection" style="display: none;">
        <input type="text" id="promoCodeInput" class="form-input" placeholder="Enter promo code (Bisask19, nig2025, Ismartdc)">
        <small class="form-help">Valid codes: Bisask19, nig2025, Ismartdc</small>
    </div>
    
    <!-- Payment Summary -->
    <div class="payment-summary">
        <h3>Payment Summary</h3>
        <div class="creation-fee-breakdown">
            <div class="fee-item">
                <span>Event Type:</span>
                <span id="selectedEventType">-</span>
            </div>
            <div class="fee-item">
                <span>Creation Fee:</span>
                <span id="creationFee">0 TC</span>
            </div>
            <div class="fee-item" id="feeDiscountItem" style="display: none;">
                <span>Discount (No Entry/Voting Fee):</span>
                <span id="discountAmount">0 TC</span>
            </div>
            <div class="fee-item total-fee">
                <span>Total Creation Fee:</span>
                <span id="totalCreationFee">0 TC</span>
            </div>
            <div class="fee-equivalent">
                <span>â‰ˆ â‚¦<span id="totalCreationFeeNaira">0</span></span>
            </div>
        </div>
    </div>
</div>
 
                <!-- Submit Button -->
                <div class="form-actions" id="submitGroup" style="display: none;">
                    <button type="submit" class="submit-btn" id="createEventBtn">
                        <i class="fas fa-rocket"></i>
                        Create Event
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
    

          <div class="event-card" data-event-id="unique-event-id">
    <!-- Card Background (Image or Color) -->
    <div class="card-background" style="background: linear-gradient(135deg, #4a6cf7, #667eea);">
        <!-- You can also use: style="background-image: url('path-to-image.jpg');" -->
    </div>
    
    <!-- Event Name (Top Left) -->
    <div class="event-name">
        <h3>Amazing Talent Show</h3>
    </div>
    
    <!-- Menu Button (Top Left Corner) -->
    <div class="menu-container">
        <button class="menu-btn">
            <i class="fas fa-bars"></i>
        </button>
        <div class="menu-dropdown">
            <div class="menu-item" data-action="delete">
                <i class="fas fa-trash"></i>
                Delete Event & Get Code Back
            </div>
            <div class="menu-item" data-action="edit">
                <i class="fas fa-edit"></i>
                Edit Event Name
            </div>
        </div>
    </div>
    
    <!-- Participants Counter (Top Right) -->
    <div class="participants-counter">
        <div class="counter-circle">
            <div class="joined-count">
                <span class="count">12</span>
                <small>Joined</small>
            </div>
            <div class="divider"></div>
            <div class="max-count">
                <span class="count">50</span>
                <small>Max</small>
            </div>
        </div>
    </div>
    
    <!-- Duration Circle (Right Middle) -->
    <div class="duration-circle">
        <div class="duration-content">
            <span class="duration-number">30</span>
            <small class="duration-unit">days</small>
        </div>
    </div>
    
    <!-- Creation Date (Left Bottom) -->
    <div class="creation-date">
        <i class="fas fa-calendar"></i>
        <span>Dec 15, 2024</span>
    </div>
    
    <!-- Creator Name Input (Center Bottom) -->
    <div class="creator-name-section">
        <input type="text" class="creator-name-input" placeholder="Enter your creator name" value="">
    </div>
    
    <!-- Enter & Move Dropdown (Right Bottom) -->
    <div class="enter-move-section">
        <select class="enter-move-dropdown">
            <option value="">Enter</option>
            <option value="move-to-trackpage">Move to Track page</option>
        </select>
    </div>
</div>
 



<!-- Spin Wheel Modal -->
<div id="spinWheelModal" class="sg-spin-wheel-modal">
    <div class="sg-modal-content">
        <div class="sg-modal-header">
            <h2>Spin & Win</h2>
            <span class="sg-close-modal">&times;</span>
        </div>
        
        <!-- Tabs Navigation -->
        <div class="sg-modal-tabs">
            <button class="sg-tab-btn active" data-tab="sg-basic-spin">Basic Spin (2 TC)</button>
            <button class="sg-tab-btn" data-tab="sg-standard-spin">Standard Spin (10 TC)</button>
            <button class="sg-tab-btn" data-tab="sg-premium-spin">Premium Spin (50 TC)</button>
        </div>
        
        <!-- Basic Spin Tab -->
        <div id="sg-basic-spin" class="sg-tab-content active">
            <div class="sg-spin-info">
                <div class="sg-cost-badge">
                    <span>Cost: 2 TC</span>
                    <span id="sg-basic-free-spins" class="sg-free-spin-badge">Free Spins: 1</span>
                </div>
                <div class="sg-prize-info">
                    <p>Win up to 100 Talent Coins with the Basic Spin!</p>
                    <p>Prizes: 1, 5, 10, 25, or 100 TC</p>
                </div>
            </div>
            
            <div class="sg-wheel-container">
                <div class="sg-wheel-outer-rim sg-basic-wheel-rim">
                    <div class="sg-wheel-pointer"></div>
                    <div class="sg-wheel-wrapper">
                        <div id="sg-basic-wheel" class="sg-wheel sg-basic-wheel">
                            <div class="sg-wheel-section sg-wheel-oneB" data-type="tc">
                                <span class="sg-prize-text">1 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-twoB" data-type="tc">
                                <span class="sg-prize-text">5 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-threeB" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-fourB" data-type="tc">
                                <span class="sg-prize-text">25 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-fiveB" data-type="tc">
                                <span class="sg-prize-text">10 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-sixB" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-sevenB" data-type="tc">
                                <span class="sg-prize-text">100 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-eightB" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                        </div>
                    </div>
                    <div class="sg-wheel-center">
                        <span class="sg-wheel-logo">TC</span>
                    </div>
                </div>
                
                <button id="sg-basic-spin-btn" class="sg-spin-btn">
                    <div class="sg-spin-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <span>Spin Now</span>
                </button>
            </div>
            
            <div class="sg-recent-spins">
                <h3>Recent Spins</h3>
                <div id="sg-basic-spin-history" class="sg-spin-history">
                    <div class="sg-empty-history">No recent spins</div>
                </div>
            </div>
        </div>
        
        <!-- Standard Spin Tab -->
        <div id="sg-standard-spin" class="sg-tab-content">
            <div class="sg-spin-info">
                <div class="sg-cost-badge">
                    <span>Cost: 10 TC</span>
                    <span id="sg-standard-free-spins" class="sg-free-spin-badge">Free Spins: 0</span>
                </div>
                <div class="sg-prize-info">
                    <p>Win up to 700 Talent Coins with the Standard Spin!</p>
                    <p>Prizes: 3, 30, 50, 120, or 700 TC</p>
                </div>
            </div>
            
            <div class="sg-wheel-container">
                <div class="sg-wheel-outer-rim sg-standard-wheel-rim">
                    <div class="sg-wheel-pointer"></div>
                    <div class="sg-wheel-wrapper">
                        <div id="sg-standard-wheel" class="sg-wheel sg-standard-wheel">
                            <div class="sg-wheel-section sg-wheel-oneS" data-type="tc">
                                <span class="sg-prize-text">3 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-twoS" data-type="tc">
                                <span class="sg-prize-text">30 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-threeS" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-fourS" data-type="tc">
                                <span class="sg-prize-text">120 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-fiveS" data-type="tc">
                                <span class="sg-prize-text">50 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-sixS" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-sevenS" data-type="tc">
                                <span class="sg-prize-text">700 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-eightS" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                        </div>
                    </div>
                    <div class="sg-wheel-center">
                        <span class="sg-wheel-logo">TC</span>
                    </div>
                </div>
                
                <button id="sg-standard-spin-btn" class="sg-spin-btn">
                    <div class="sg-spin-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <span>Spin Now</span>
                </button>
            </div>
            
            <div class="sg-recent-spins">
                <h3>Recent Spins</h3>
                <div id="sg-standard-spin-history" class="sg-spin-history">
                    <div class="sg-empty-history">No recent spins</div>
                </div>
            </div>
        </div>
        
        <!-- Premium Spin Tab -->
        <div id="sg-premium-spin" class="sg-tab-content">
            <div class="sg-spin-info">
                <div class="sg-cost-badge">
                    <span>Cost: 50 TC</span>
                    <span id="sg-premium-free-spins" class="sg-free-spin-badge">Free Spins: 0</span>
                </div>
                <div class="sg-prize-info">
                    <p>Win up to 1000 Talent Coins with the Premium Spin!</p>
                    <p>Prizes: 7, 50, 75, 145, or 1000 TC</p>
                </div>
            </div>
            
            <div class="sg-wheel-container">
                <div class="sg-wheel-outer-rim sg-premium-wheel-rim">
                    <div class="sg-wheel-pointer"></div>
                    <div class="sg-wheel-wrapper">
                        <div id="sg-premium-wheel" class="sg-wheel sg-premium-wheel">
                            <div class="sg-wheel-section sg-wheel-oneP" data-type="tc">
                                <span class="sg-prize-text">7 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-twoP" data-type="tc">
                                <span class="sg-prize-text">50 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-threeP" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-fourP" data-type="tc">
                                <span class="sg-prize-text">145 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-fiveP" data-type="tc">
                                <span class="sg-prize-text">75 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-sixP" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-sevenP" data-type="tc">
                                <span class="sg-prize-text">1000 TC</span>
                            </div>
                            <div class="sg-wheel-section sg-wheel-eightP" data-type="try-again">
                                <span class="sg-prize-text">Try Again</span>
                            </div>
                        </div>
                    </div>
                    <div class="sg-wheel-center">
                        <span class="sg-wheel-logo">TC</span>
                    </div>
                </div>
                
                <button id="sg-premium-spin-btn" class="sg-spin-btn">
                    <div class="sg-spin-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <span>Spin Now</span>
                </button>
            </div>
            
            <div class="sg-recent-spins">
                <h3>Recent Spins</h3>
                <div id="sg-premium-spin-history" class="sg-spin-history">
                    <div class="sg-empty-history">No recent spins</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Spin Result Modal -->
<div id="spinResultModal" class="sg-spin-result-modal">
    <div class="sg-modal-content">
        <div class="sg-result-icon">
            <i class="fas fa-trophy"></i>
        </div>
        <h2 id="resultTitle">Congratulations!</h2>
        <p id="resultMessage">You won 100 Talent Coins!</p>
        <div class="sg-result-actions">
            <button id="claimPrizeBtn" class="sg-btn sg-btn-primary">Claim Prize</button>
            <button id="spinAgainBtn" class="sg-btn sg-btn-secondary">Spin Again</button>
        </div>
    </div>
</div>

   
      

  <!-- Overlay for modals -->
<div class="modal-overlay" id="modalOverlay"></div>
  
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>


<script>
Â // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDW8V2SjNITrA4LcdmeILh944mTbOKnM0c",
  authDomain: "rewarderhub.firebaseapp.com",
  projectId: "rewarderhub",
  storageBucket: "rewarderhub.firebasestorage.app",
  messagingSenderId: "85965945106",
  appId: "1:85965945106:web:fa0a57d8968926e1041bcb",
  measurementId: "G-F2ERB5NGN0"
};



// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const analytics = firebase.analytics();



// Constants
const ADMIN_EMAIL = 'rewarderprivate@gmail.com';
const ADMIN_PASSWORD = 'BISA1999';



// DOM Elements
const splitScreen = document.querySelector('.split-screen');
const loginForm = document.getElementById('loginForm');
const signupForm = document.getElementById('signupForm');
const googleBtns = document.querySelectorAll('.google-btn');
const dashboardPage = document.getElementById('dashboardPage');
const passwordFields = document.querySelectorAll('.password-field');


// Initialize UI
document.addEventListener('DOMContentLoaded', function() {
Â  
Â  
Â  // Setup form switching
Â  setupFormSwitching();
});


// Setup form switching
function setupFormSwitching() {
    Â   // Get the forms
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        
        // Get the switch links
        const showSignupLink = document.getElementById('showSignup');
        const showLoginLink = document.getElementById('showLogin');
        
        // Add event listeners to the links
        if (showSignupLink) {
            showSignupLink.addEventListener('click', function(e) {
                e.preventDefault();
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
            });
        }
        
        if (showLoginLink) {
            showLoginLink.addEventListener('click', function(e) {
                e.preventDefault();
                signupForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
            });
        }
    }
Â  Â  
Â  Â  

// Show toast notification
function showToast(message, type = 'success') {
Â  const toast = document.getElementById('toast') || createToastElement();
Â  
Â  // Set toast type
Â  toast.className = 'toast';
Â  toast.classList.add(type);
Â  
Â  // Set message
Â  toast.querySelector('.toast-message').textContent = message;
Â  
Â  // Set icon
Â  const iconElement = toast.querySelector('.toast-icon i');
Â  if (iconElement) {
Â  Â  iconElement.className = type === 'success' 
Â  Â  Â  ? 'fas fa-check-circle' 
Â  Â  Â  : 'fas fa-exclamation-circle';
Â  }
Â  
Â  // Show toast
Â  toast.classList.add('show');
Â  
Â  // Hide after 3 seconds
Â  setTimeout(() => {
Â  Â  toast.classList.remove('show');
Â  }, 3000);
}


// Create toast element if it doesn't exist
function createToastElement() {
Â  const toast = document.createElement('div');
Â  toast.className = 'toast';
Â  toast.innerHTML = `
Â  Â  <div class="toast-icon">
Â  Â  Â  <i class="fas fa-check-circle"></i>
Â  Â  </div>
Â  Â  <div class="toast-message"></div>
Â  `;
Â  document.body.appendChild(toast);
Â  return toast;
}






document.addEventListener('DOMContentLoaded', function() {
    Â  Â  // Direct approach for password toggle
    Â  Â  const passwordInput = document.getElementById('signupPassword');
    Â  Â  const toggleIcon = document.querySelector('.toggle-password');
    Â  Â  
    Â  Â  if (passwordInput && toggleIcon) {
    Â  Â  Â  Â  // Add click event directly to the toggle icon
    Â  Â  Â  Â  toggleIcon.onclick = function() {
    Â  Â  Â  Â  Â  Â  // Toggle between password and text
    Â  Â  Â  Â  Â  Â  if (passwordInput.type === 'password') {
    Â  Â  Â  Â  Â  Â  Â  Â  passwordInput.type = 'text';
    Â  Â  Â  Â  Â  Â  Â  Â  toggleIcon.classList.remove('fa-eye-slash');
    Â  Â  Â  Â  Â  Â  Â  Â  toggleIcon.classList.add('fa-eye');
    Â  Â  Â  Â  Â  Â  } else {
    Â  Â  Â  Â  Â  Â  Â  Â  passwordInput.type = 'password';
    Â  Â  Â  Â  Â  Â  Â  Â  toggleIcon.classList.remove('fa-eye');
    Â  Â  Â  Â  Â  Â  Â  Â  toggleIcon.classList.add('fa-eye-slash');
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  };
    Â  Â  }
    Â  Â  
    Â  Â  // Password validation and strength meter
    Â  Â  if (passwordInput) {
    Â  Â  Â  Â  const strengthMeter = document.querySelector('.strength-meter');
    Â  Â  Â  Â  const strengthText = document.querySelector('.strength-text');
    Â  Â  Â  Â  const strengthSegments = document.querySelectorAll('.strength-segment');
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Add minlength attribute
    Â  Â  Â  Â  passwordInput.setAttribute('minlength', '6');
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Create error message element
    Â  Â  Â  Â  const errorMessage = document.createElement('div');
    Â  Â  Â  Â  errorMessage.style.color = '#ff4d4d';
    Â  Â  Â  Â  errorMessage.style.fontSize = '12px';
    Â  Â  Â  Â  errorMessage.style.marginTop = '4px';
    Â  Â  Â  Â  errorMessage.style.display = 'none';
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Insert error message after strength text
    Â  Â  Â  Â  if (strengthText && strengthText.parentNode) {
    Â  Â  Â  Â  Â  Â  strengthText.parentNode.insertBefore(errorMessage, strengthText.nextSibling);
    Â  Â  Â  Â  }
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Password input event
    Â  Â  Â  Â  passwordInput.addEventListener('input', function() {
    Â  Â  Â  Â  Â  Â  const password = this.value;
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  // Check minimum length
    Â  Â  Â  Â  Â  Â  if (password.length > 0 && password.length < 6) {
    Â  Â  Â  Â  Â  Â  Â  Â  errorMessage.textContent = 'Password must be at least 6 characters';
    Â  Â  Â  Â  Â  Â  Â  Â  errorMessage.style.display = 'block';
    Â  Â  Â  Â  Â  Â  } else {
    Â  Â  Â  Â  Â  Â  Â  Â  errorMessage.style.display = 'none';
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  // Update strength meter
    Â  Â  Â  Â  Â  Â  if (strengthSegments && strengthText) {
    Â  Â  Â  Â  Â  Â  Â  Â  updatePasswordStrength(password, strengthSegments, strengthText);
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  });
    Â  Â  }
    Â  Â  
    Â  Â  // Function to update password strength
    Â  Â  function updatePasswordStrength(password, segments, textElement) {
    Â  Â  Â  Â  // Reset segments
    Â  Â  Â  Â  segments.forEach(segment => {
    Â  Â  Â  Â  Â  Â  segment.style.backgroundColor = '#e0e0e0';
    Â  Â  Â  Â  });
    Â  Â  Â  Â  
    Â  Â  Â  Â  if (!password) {
    Â  Â  Â  Â  Â  Â  textElement.textContent = 'Password strength';
    Â  Â  Â  Â  Â  Â  return;
    Â  Â  Â  Â  }
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Calculate strength
    Â  Â  Â  Â  const hasLower = /[a-z]/.test(password);
    Â  Â  Â  Â  const hasUpper = /[A-Z]/.test(password);
    Â  Â  Â  Â  const hasNumber = /[0-9]/.test(password);
    Â  Â  Â  Â  const hasSpecial = /[^A-Za-z0-9]/.test(password);
    Â  Â  Â  Â  const length = password.length;
    Â  Â  Â  Â  
    Â  Â  Â  Â  let strength = 0;
    Â  Â  Â  Â  // Only count if minimum length is met
    Â  Â  Â  Â  if (length >= 6) {
    Â  Â  Â  Â  Â  Â  strength++;
    Â  Â  Â  Â  Â  Â  if (length >= 8) strength++;
    Â  Â  Â  Â  Â  Â  if (hasLower && hasUpper) strength++;
    Â  Â  Â  Â  Â  Â  if (hasNumber) strength++;
    Â  Â  Â  Â  Â  Â  if (hasSpecial) strength++;
    Â  Â  Â  Â  }
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Colors for different strength levels
    Â  Â  Â  Â  const colors = {
    Â  Â  Â  Â  Â  Â  1: '#ff4d4d', // weak
    Â  Â  Â  Â  Â  Â  2: '#ffaa00', // medium
    Â  Â  Â  Â  Â  Â  3: '#2ecc71', // strong
    Â  Â  Â  Â  Â  Â  4: '#27ae60' Â // very strong
    Â  Â  Â  Â  };
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Update segments
    Â  Â  Â  Â  for (let i = 0; i < Math.min(strength, segments.length); i++) {
    Â  Â  Â  Â  Â  Â  segments[i].style.backgroundColor = colors[strength] || colors[1];
    Â  Â  Â  Â  }
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Update text
    Â  Â  Â  Â  if (length < 6) {
    Â  Â  Â  Â  Â  Â  textElement.textContent = 'Too short';
    Â  Â  Â  Â  Â  Â  textElement.style.color = '#ff4d4d';
    Â  Â  Â  Â  } else {
    Â  Â  Â  Â  Â  Â  textElement.style.color = '';
    Â  Â  Â  Â  Â  Â  if (strength <= 1) textElement.textContent = 'Weak';
    Â  Â  Â  Â  Â  Â  else if (strength === 2) textElement.textContent = 'Medium';
    Â  Â  Â  Â  Â  Â  else if (strength === 3) textElement.textContent = 'Strong';
    Â  Â  Â  Â  Â  Â  else textElement.textContent = 'Very strong';
    Â  Â  Â  Â  }
    Â  Â  }
    });

// Show loading state on button
function setButtonLoading(button, isLoading) {
Â  if (isLoading) {
Â  Â  button.classList.add('loading');
Â  Â  const originalText = button.textContent;
Â  Â  button.setAttribute('data-original-text', originalText);
Â  Â  button.innerHTML = 'Processing... <span class="loading-spinner"></span>';
Â  Â  button.disabled = true;
Â  } else {
Â  Â  button.classList.remove('loading');
Â  Â  const originalText = button.getAttribute('data-original-text');
Â  Â  button.textContent = originalText;
Â  Â  button.disabled = false;
Â  }
}


// Check if user is admin
function isAdmin(email) {
Â  return email === ADMIN_EMAIL;
}


// Navigate to dashboard
function navigateToDashboard(user, isAdminUser = false) {
Â  // Store admin status in localStorage for persistence
Â  if (isAdminUser) {
Â  Â  localStorage.setItem('isAdmin', 'true');
Â  } else {
Â  Â  localStorage.removeItem('isAdmin');
Â  }


Â  // Hide authentication container
Â  if (splitScreen) {
Â  Â  splitScreen.style.display = 'none';
Â  }
Â  
Â  // If admin, show admin dashboard instead of regular dashboard
Â  if (isAdminUser) {
Â  Â  console.log('Showing admin dashboard for:', user.email);
Â  Â  
Â  Â  // Hide regular dashboard if it exists
Â  Â  if (dashboardPage) {
Â  Â  Â  dashboardPage.classList.remove('active');
Â  Â  }
Â  Â  
Â  Â  // Show admin dashboard
Â  Â  const adminDashboard = document.getElementById('dashboard');
Â  Â  if (adminDashboard) {
Â  Â  Â  adminDashboard.classList.remove('hidden');
Â  Â  Â  
Â  Â  Â  // Set moderator name if available
Â  Â  Â  const moderatorName = document.querySelector('.moderator-name');
Â  Â  Â  if (moderatorName) {
Â  Â  Â  Â  moderatorName.textContent = user.displayName || 'Administrator';
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  // Initialize admin dashboard functionality
Â  Â  Â  initializeAdminDashboard();
Â  Â  Â  
Â  Â  Â  showToast('Admin mode activated', 'success');
Â  Â  } else {
Â  Â  Â  console.error('Admin dashboard element not found');
Â  Â  Â  showToast('Error loading admin dashboard', 'error');
Â  Â  }
Â  } else {
Â  Â  // Show regular dashboard
Â  Â  if (dashboardPage) {
Â  Â  Â  dashboardPage.classList.add('active');
Â  Â  Â  
Â  Â  Â  // Set username
Â  Â  Â  const displayName = user.displayName || user.email.split('@')[0];
Â  Â  Â  const usernameDisplay = document.getElementById('usernameDisplay');
Â  Â  Â  if (usernameDisplay) {
Â  Â  Â  Â  usernameDisplay.textContent = displayName;
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  // Set profile image if available
Â  Â  Â  const userProfileImage = document.getElementById('userProfileImage');
Â  Â  Â  if (userProfileImage && user.photoURL) {
Â  Â  Â  Â  userProfileImage.src = user.photoURL;
Â  Â  Â  }
Â  Â  }
Â  }
Â  
Â  // Prevent body scrolling
Â  document.body.style.overflow = 'hidden';
Â  
Â  // Log analytics event
Â  if (typeof analytics !== 'undefined') {
Â  Â  analytics.logEvent('login', {
Â  Â  Â  method: user.providerData[0].providerId,
Â  Â  Â  isAdmin: isAdminUser
Â  Â  });
Â  }
}


// Initialize admin dashboard
function initializeAdminDashboard() {
Â  console.log('Initializing admin dashboard');
Â  
Â  // Set up logout button
Â  const logoutBtn = document.getElementById('logoutBtn');
Â  if (logoutBtn) {
Â  Â  logoutBtn.addEventListener('click', logout);
Â  }
Â  
Â  // Set up action card buttons
Â  const buyCoinSupportBtn = document.getElementById('buyCoinSupportBtn');
Â  const withdrawSupportBtn = document.getElementById('withdrawSupportBtn');
Â  const transferSupportBtn = document.getElementById('transferSupportBtn');
Â  const talentCoinDispenserBtn = document.getElementById('talentCoinDispenserBtn');
Â  
Â  // Dashboard sections
Â  const dashboard = document.getElementById('dashboard');
Â  const buyCoinSupport = document.getElementById('buyCoinSupport');
Â  const withdrawSupport = document.getElementById('withdrawSupport');
Â  const transferSupport = document.getElementById('transferSupport');
Â  const talentCoinDispenser = document.getElementById('talentCoinDispenser');
Â  
Â  // Function to show a specific section and hide others
Â  function showSection(sectionToShow) {
Â  Â  // Hide all sections
Â  Â  [buyCoinSupport, withdrawSupport, transferSupport, talentCoinDispenser].forEach(section => {
Â  Â  Â  if (section) section.classList.add('hidden');
Â  Â  });
Â  Â  
Â  Â  // Show the selected section
Â  Â  if (sectionToShow) {
Â  Â  Â  sectionToShow.classList.remove('hidden');
Â  Â  }
Â  }
Â  
Â  // Set up action card click handlers
Â  if (buyCoinSupportBtn) {
Â  Â  buyCoinSupportBtn.addEventListener('click', () => showSection(buyCoinSupport));
Â  }
Â  
Â  if (withdrawSupportBtn) {
Â  Â  withdrawSupportBtn.addEventListener('click', () => showSection(withdrawSupport));
Â  }
Â  
Â  if (transferSupportBtn) {
Â  Â  transferSupportBtn.addEventListener('click', () => showSection(transferSupport));
Â  }
Â  
Â  if (talentCoinDispenserBtn) {
Â  Â  talentCoinDispenserBtn.addEventListener('click', () => showSection(talentCoinDispenser));
Â  }
Â  
Â  // Set up back buttons
Â  const backButtons = document.querySelectorAll('.back-btn');
Â  backButtons.forEach(btn => {
Â  Â  btn.addEventListener('click', () => {
Â  Â  Â  const target = btn.getAttribute('data-target');
Â  Â  Â  if (target === 'dashboard') {
Â  Â  Â  Â  showSection(null); // Hide all feature sections
Â  Â  Â  }
Â  Â  });
Â  });
Â  
Â  // Load initial data for the dashboard
Â  loadDashboardData();
}


// Load dashboard data
function loadDashboardData() {
Â  // This would normally fetch data from Firestore
Â  // For now, we'll just set some placeholder values
Â  
Â  // Set badge counts
Â  const buyRequestsBadge = document.getElementById('buyRequestsBadge');
Â  const withdrawRequestsBadge = document.getElementById('withdrawRequestsBadge');
Â  const transferIssuesBadge = document.getElementById('transferIssuesBadge');
Â  
Â  if (buyRequestsBadge) buyRequestsBadge.textContent = '5';
Â  if (withdrawRequestsBadge) withdrawRequestsBadge.textContent = '3';
Â  if (transferIssuesBadge) transferIssuesBadge.textContent = '2';
Â  
Â  // Set today's activity summary
Â  const todayBuyRequests = document.getElementById('todayBuyRequests');
Â  const todayWithdrawals = document.getElementById('todayWithdrawals');
Â  const todayTransfers = document.getElementById('todayTransfers');
Â  const todayIssues = document.getElementById('todayIssues');
Â  
Â  if (todayBuyRequests) todayBuyRequests.textContent = '8';
Â  if (todayWithdrawals) todayWithdrawals.textContent = '6';
Â  if (todayTransfers) todayTransfers.textContent = '15';
Â  if (todayIssues) todayIssues.textContent = '2';
Â  
Â  // Load recent activity (placeholder)
Â  const recentActivityList = document.getElementById('recentActivityList');
Â  if (recentActivityList) {
Â  Â  // Clear empty state if it exists
Â  Â  const emptyState = recentActivityList.querySelector('.empty-state');
Â  Â  if (emptyState) {
Â  Â  Â  emptyState.remove();
Â  Â  }
Â  Â  
Â  Â  // Add some sample activity items
Â  Â  const activityTemplate = document.getElementById('activityItemTemplate');
Â  Â  if (activityTemplate) {
Â  Â  Â  const activities = [
Â  Â  Â  Â  { title: 'New buy request from user123', time: '5 minutes ago', icon: 'fa-coins' },
Â  Â  Â  Â  { title: 'Withdrawal approved for user456', time: '15 minutes ago', icon: 'fa-money-bill-wave' },
Â  Â  Â  Â  { title: 'Transfer issue reported by user789', time: '30 minutes ago', icon: 'fa-exclamation-circle' },
Â  Â  Â  Â  { title: 'New user registered', time: '1 hour ago', icon: 'fa-user-plus' }
Â  Â  Â  ];
Â  Â  Â  
Â  Â  Â  activities.forEach(activity => {
Â  Â  Â  Â  const activityItem = activityTemplate.content.cloneNode(true);
Â  Â  Â  Â  const activityIcon = activityItem.querySelector('.activity-icon i');
Â  Â  Â  Â  const activityTitle = activityItem.querySelector('.activity-title');
Â  Â  Â  Â  const activityTime = activityItem.querySelector('.activity-time');
Â  Â  Â  Â  
Â  Â  Â  Â  if (activityIcon) activityIcon.className = `fas ${activity.icon}`;
Â  Â  Â  Â  if (activityTitle) activityTitle.textContent = activity.title;
Â  Â  Â  Â  if (activityTime) activityTime.textContent = activity.time;
Â  Â  Â  Â  
Â  Â  Â  Â  recentActivityList.appendChild(activityItem);
Â  Â  Â  });
Â  Â  }
Â  }
}


// Google Sign In
googleBtns.forEach(btn => {
Â  btn.addEventListener('click', function() {
Â  Â  const provider = new firebase.auth.GoogleAuthProvider();
Â  Â  provider.addScope('profile');
Â  Â  provider.addScope('email');
Â  Â  
Â  Â  auth.signInWithPopup(provider)
Â  Â  Â  .then((result) => {
Â  Â  Â  Â  // Save user data to Firestore
Â  Â  Â  Â  const user = result.user;
Â  Â  Â  Â  saveUserData(user);
Â  Â  Â  Â  
Â  Â  Â  Â  // Show success message
Â  Â  Â  Â  showToast('Successfully signed in with Google!');
Â  Â  Â  Â  
Â  Â  Â  Â  // Check if admin
Â  Â  Â  Â  const isAdminUser = isAdmin(user.email);
Â  Â  Â  Â  
Â  Â  Â  Â  // Navigate to dashboard
Â  Â  Â  Â  navigateToDashboard(user, isAdminUser);
Â  Â  Â  })
Â  Â  Â  .catch((error) => {
Â  Â  Â  Â  console.error('Google sign in error:', error);
Â  Â  Â  Â  showToast(error.message, 'error');
Â  Â  Â  });
Â  });
});

// Email/Password Sign In

if (loginForm) {
  loginForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    // Basic validation
    if (!email || !password) {
      showToast('Please enter your email and password', 'error');
      return;
    }
    
    const rememberMe = document.getElementById('remember') ? document.getElementById('remember').checked : false;
    
    // Show loading animation
    showAuthLoading('Verifying your credentials...');
    
    // Show loading state on button
    const submitBtn = this.querySelector('button[type="submit"]');
    setButtonLoading(submitBtn, true);
    
    // Check for admin login
    const isAdminLogin = email === ADMIN_EMAIL && password === ADMIN_PASSWORD;
    
    auth.signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        const user = userCredential.user;
        
        // Update loading message
        document.querySelector('.loading-text').textContent = 'Updating your profile...';
        
        // Update last login timestamp
        return db.collection('users').doc(user.uid).update({
          lastLogin: firebase.firestore.FieldValue.serverTimestamp()
        }).catch(err => {
          console.log('Error updating user data:', err);
          // Continue despite error
          return user;
        }).then(() => {
          // Update loading message
          document.querySelector('.loading-text').textContent = 'Setting up your session...';
          
          // Set persistence based on remember me
          const persistence = rememberMe ? 
            firebase.auth.Auth.Persistence.LOCAL : 
            firebase.auth.Auth.Persistence.SESSION;
          
          return auth.setPersistence(persistence);
        }).then(() => {
          // Update loading message
          document.querySelector('.loading-text').textContent = 'Loading your dashboard...';
          
          // Check if wallet exists for this user
          return db.collection('wallets').doc(user.uid).get()
            .then(walletDoc => {
              if (!walletDoc.exists) {
                // Create wallet if it doesn't exist
                return createUserWallet(user.uid).catch(error => {
                  console.warn('Could not create wallet, but continuing sign in:', error);
                  // Continue despite wallet creation error
                  return null;
                });
              }
              return null;
            });
        }).then(() => {
          // Hide loading after a minimum time for better UX
          setTimeout(() => {
            hideAuthLoading();
            showToast('Successfully signed in!');
            navigateToDashboard(user, isAdminLogin);
          }, 1500); // Minimum 1.5 seconds to show loading
          
          return user;
        });
      })
      .catch((error) => {
        console.error('Sign in error:', error);
        hideAuthLoading();
        showToast(error.message, 'error');
      })
      .finally(() => {
        setButtonLoading(submitBtn, false);
      });
  });
}

// Make sure these helper functions are defined
if (typeof showAuthLoading !== 'function') {
  // Show loading animation
  function showAuthLoading(message = 'Verifying credentials...') {
    const loadingOverlay = document.getElementById('auth-loading-overlay');
    if (loadingOverlay) {
      const loadingText = loadingOverlay.querySelector('.loading-text');
      if (loadingText) {
        loadingText.textContent = message;
      }
      loadingOverlay.classList.add('active');
    }
  }
}

if (typeof hideAuthLoading !== 'function') {
  // Hide loading animation
  function hideAuthLoading() {
    const loadingOverlay = document.getElementById('auth-loading-overlay');
    if (loadingOverlay) {
      loadingOverlay.classList.remove('active');
    }
  }
}

if (typeof createUserWallet !== 'function') {
  // Create wallet for user
  function createUserWallet(userId) {
    // First check if wallet already exists to avoid duplicate creation
    return db.collection('wallets').doc(userId).get()
      .then(doc => {
        if (doc.exists) {
          console.log('Wallet already exists for user:', userId);
          return doc.data();
        }
        
        // Create new wallet if it doesn't exist
        const walletData = {
          userId: userId,
          talentCoinBalance: 0,
          pendingCoinBalance: 0,
          commissionBalance: 0,
          nairaBalance: 0,
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
          transactions: []
        };
        
        return db.collection('wallets').doc(userId).set(walletData)
          .then(() => {
            console.log('Wallet created for user:', userId);
            return walletData;
          });
      })
      .catch((error) => {
        console.error('Error with wallet operation:', error);
        // Don't throw the error, just return null to continue the flow
        return null;
      });
  }
}

Â  // Email/Password Sign Up
const signupFormElement = document.getElementById('signupFormElement');

if (signupFormElement) {
  signupFormElement.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const fullName = document.getElementById('fullName').value;
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    const userType = document.getElementById('userType').value;
    const termsAccepted = document.getElementById('terms').checked;
    
    // Validate form
    if (!termsAccepted) {
      showToast('Please accept the terms and conditions', 'error');
      return;
    }
    
    if (!userType) {
      showToast('Please select your role', 'error');
      return;
    }
    
    // Show loading state
    const submitBtn = this.querySelector('button[type="submit"]');
    setButtonLoading(submitBtn, true);
    
    auth.createUserWithEmailAndPassword(email, password)
      .then((userCredential) => {
        const user = userCredential.user;
        
        // Update profile with display name
        return user.updateProfile({
          displayName: fullName
        }).then(() => {
          // Save user data to Firestore with additional fields
          return saveUserData(user, userType);
        }).then(() => {
          // Create wallet for the user
          return createUserWallet(user.uid).catch(error => {
            console.warn('Could not create wallet, but continuing signup:', error);
            // Continue despite wallet creation error
            return null;
          });
        }).then(() => {
          // Send email verification
          return user.sendEmailVerification();
        }).then(() => {
          showToast('Account created! Please verify your email.');
          navigateToDashboard(user);
          return user;
        });
      })
      .catch((error) => {
        console.error('Sign up error:', error);
        showToast(error.message, 'error');
      })
      .finally(() => {
        setButtonLoading(submitBtn, false);
      });
  });
}

// Save user data to Firestore with additional fields
function saveUserData(user, userType = 'voter') {
  const userData = {
    uid: user.uid,
    email: user.email,
    displayName: user.displayName || user.email.split('@')[0],
    photoURL: user.photoURL || null,
    userType: userType,
    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
    lastLogin: firebase.firestore.FieldValue.serverTimestamp(),
    isAdmin: isAdmin(user.email)
  };
  
  return db.collection('users').doc(user.uid).set(userData, { merge: true })
    .then(() => {
      console.log('User data saved:', userData);
      return userData;
    })
    .catch((error) => {
      console.error('Error saving user data:', error);
      throw error;
    });
}

// Create wallet for user
function createUserWallet(userId) {
  const walletData = {
    userId: userId,
    talentCoinBalance: 0,
    pendingCoinBalance: 0,
    commissionBalance: 0,
    nairaBalance: 0,
    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
    transactions: []
  };
  
  return db.collection('wallets').doc(userId).set(walletData)
    .then(() => {
      console.log('Wallet created for user:', userId);
      return walletData;
    })
    .catch((error) => {
      console.error('Error creating wallet:', error);
      throw error;
    });
}



// Add loading animation for authentication
function setupAuthLoadingAnimation() {
  // Create the loading overlay HTML
  const loadingOverlayHTML = `
    <div id="auth-loading-overlay" class="auth-loading-overlay">
      <div class="loading-animation">
        <div class="loading-item coin">â‚®</div>
        <div class="loading-item star">â˜…</div>
        <div class="loading-item naira">â‚¦</div>
        <div class="loading-item coin">â‚®</div>
        <div class="loading-item star">â˜…</div>
      </div>
      <div class="loading-text">Verifying credentials...</div>
    </div>
  `;
  
  // Add the loading overlay to the body
  document.body.insertAdjacentHTML('beforeend', loadingOverlayHTML);
  
  // Add the CSS for the loading animation
  const loadingStyles = document.createElement('style');
  loadingStyles.textContent = `
    .auth-loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .auth-loading-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .loading-animation {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .loading-item {
      font-size: 2.5rem;
      margin: 0 10px;
      animation-duration: 2s;
      animation-iteration-count: infinite;
      animation-timing-function: ease-in-out;
      color: white;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
    }
    
    .loading-item.coin {
      color: #FFD700;
      animation-name: floatCoin;
    }
    
    .loading-item.star {
      color: #6c5ce7;
      animation-name: rotateStar;
    }
    
    .loading-item.naira {
      color: #2ecc71;
      animation-name: floatNaira;
    }
    
    @keyframes floatCoin {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(10deg); }
    }
    
    @keyframes rotateStar {
      0% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(180deg) scale(1.2); }
      100% { transform: rotate(360deg) scale(1); }
    }
    
    @keyframes floatNaira {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-15px) scale(1.1); }
    }
    
    .loading-text {
      color: white;
      font-size: 1.2rem;
      font-weight: 500;
      text-align: center;
      margin-top: 10px;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
  `;
  document.head.appendChild(loadingStyles);
}
setupAuthLoadingAnimation();
setupAuthLoadingAnimation();
Â 




// Logout function
function logout() {
Â  auth.signOut()
Â  Â  .then(() => {
Â  Â  Â  // Clear admin status
Â  Â  Â  localStorage.removeItem('isAdmin');
Â  Â  Â  
Â  Â  Â  // Hide dashboards
Â  Â  Â  if (dashboardPage) {
Â  Â  Â  Â  dashboardPage.classList.remove('active');
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  const adminDashboard = document.getElementById('dashboard');
Â  Â  Â  if (adminDashboard) {
Â  Â  Â  Â  adminDashboard.classList.add('hidden');
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  // Hide all feature sections
Â  Â  Â  const featureSections = document.querySelectorAll('.feature-section');
Â  Â  Â  featureSections.forEach(section => {
Â  Â  Â  Â  section.classList.add('hidden');
Â  Â  Â  });
Â  Â  Â  
Â  Â  Â  // Show login screen
Â  Â  Â  if (splitScreen) {
Â  Â  Â  Â  splitScreen.style.display = 'flex';
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  // Allow body scrolling
Â  Â  Â  document.body.style.overflow = 'auto';
Â  Â  Â  
Â  Â  Â  showToast('Successfully logged out');
Â  Â  })
Â  Â  .catch((error) => {
Â  Â  Â  console.error('Logout error:', error);
Â  Â  Â  showToast('Error logging out: ' + error.message, 'error');
Â  Â  });
}


// Auth state change handler
auth.onAuthStateChanged(function(user) {
Â  if (user) {
Â  Â  // User is signed in
Â  Â  console.log('User is signed in:', user.email);
Â  Â  
Â  Â  // Check if admin from localStorage or email
Â  Â  const isAdminUser = localStorage.getItem('isAdmin') === 'true' || isAdmin(user.email);
Â  Â  
Â  Â  // If we're on the login page, navigate to appropriate dashboard
Â  Â  if (splitScreen && splitScreen.style.display !== 'none') {
Â  Â  Â  navigateToDashboard(user, isAdminUser);
Â  Â  }
Â  } else {
Â  Â  // User is signed out
Â  Â  console.log('User is signed out');
Â  Â  
Â  Â  // Show login screen
Â  Â  if (splitScreen) {
Â  Â  Â  splitScreen.style.display = 'flex';
Â  Â  }
Â  Â  
Â  Â  // Hide dashboards
Â  Â  if (dashboardPage) {
Â  Â  Â  dashboardPage.classList.remove('active');
Â  Â  }
Â  Â  
Â  Â  const adminDashboard = document.getElementById('dashboard');
Â  Â  if (adminDashboard) {
Â  Â  Â  adminDashboard.classList.add('hidden');
Â  Â  }
Â  Â  
Â  Â  // Allow body scrolling
Â  Â  document.body.style.overflow = 'auto';
Â  }
});


// Password reset functionality
const forgotPasswordLink = document.querySelector('.forgot-password');
if (forgotPasswordLink) {
Â  forgotPasswordLink.addEventListener('click', function(e) {
Â  Â  e.preventDefault();
Â  Â  
Â  Â  const email = document.getElementById('loginEmail').value;
Â  Â  if (!email) {
Â  Â  Â  showToast('Please enter your email address first', 'error');
Â  Â  Â  return;
Â  Â  }
Â  Â  
Â  Â  auth.sendPasswordResetEmail(email)
Â  Â  Â  .then(() => {
Â  Â  Â  Â  showToast('Password reset email sent. Check your inbox.');
Â  Â  Â  })
Â  Â  Â  .catch((error) => {
Â  Â  Â  Â  console.error('Password reset error:', error);
Â  Â  Â  Â  showToast(error.message, 'error');
Â  Â  Â  });
Â  });
}


// Initialize logout buttons
const logoutBtns = document.querySelectorAll('.logout-btn');
logoutBtns.forEach(btn => {
Â  btn.addEventListener('click', logout);
});









// Initialize the app
console.log('Firebase Auth initialized');



// Profile functionality
document.addEventListener('DOMContentLoaded', function() {
    // Check if Firebase is initialized
    if (typeof firebase === 'undefined') {
        console.error('Firebase SDK is not loaded. Profile functionality will not work.');
        return;
    }

    // Ensure we have the storage SDK
    if (!firebase.storage) {
        // Load Firebase Storage SDK if not already loaded
        const storageScript = document.createElement('script');
        storageScript.src = 'https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js';
        storageScript.onload = function() {
            console.log('Firebase Storage SDK loaded');
            initProfileModal();
        };
        document.head.appendChild(storageScript);
    } else {
        initProfileModal();
    }
});

function initProfileModal() {
    // Create and append the profile modal HTML to the body
    const profileModalHTML = `
    <!-- Profile Modal -->
    <div id="profileModal" class="profile-modal">
        <div class="profile-modal-content">
            <div class="profile-modal-header">
                <h2>My Profile</h2>
                <button class="close-modal">&times;</button>
            </div>
            
            <div class="profile-modal-body">
                <div class="profile-image-container">
                    <div class="profile-image-wrapper">
                        <img src="https://via.placeholder.com/150" alt="Profile" id="profileModalImage">
                        <div class="profile-image-overlay">
                            <i class="fas fa-camera"></i>
                            <span>Change</span>
                        </div>
                    </div>
                    <input type="file" id="profileImageUpload" accept="image/*" hidden>
                </div>
                
                <form id="profileForm">
                    <div class="form-group">
                        <label for="profileFullName">Full Name</label>
                        <input type="text" id="profileFullName" placeholder="Your full name">
                    </div>
                    
                    <div class="form-group">
                        <label for="profileEmail">Email</label>
                        <input type="email" id="profileEmail" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label for="profileUserType">Account Type</label>
                        <select id="profileUserType">
                            <option value="contestant">Contestant</option>
                            <option value="voter">Voter</option>
                            <option value="both">Both</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="profileBio">Bio</label>
                        <textarea id="profileBio" placeholder="Tell us about yourself" rows="3"></textarea>
                    </div>
                    
                    <div class="profile-actions">
                        <button type="button" id="changePasswordBtn" class="secondary-btn">Change Password</button>
                        <button type="submit" id="saveProfileBtn" class="primary-btn">Save Changes</button>
                    </div>
                </form>
                
                <!-- Change Password Section (Hidden by default) -->
                <div id="changePasswordSection" class="change-password-section hidden">
                    <h3>Change Password</h3>
                    <form id="changePasswordForm">
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <div class="password-input">
                                <input type="password" id="currentPassword" placeholder="Enter current password" required>
                                <i class="fas fa-eye-slash toggle-password"></i>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="newPassword">New Password</label>
                            <div class="password-input">
                                <input type="password" id="newPassword" placeholder="Enter new password" required>
                                <i class="fas fa-eye-slash toggle-password"></i>
                            </div>
                            <div class="password-strength">
                                <div class="strength-meter">
                                    <div class="strength-segment"></div>
                                    <div class="strength-segment"></div>
                                    <div class="strength-segment"></div>
                                    <div class="strength-segment"></div>
                                </div>
                                <span class="strength-text">Password strength</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <div class="password-input">
                                <input type="password" id="confirmPassword" placeholder="Confirm new password" required>
                                <i class="fas fa-eye-slash toggle-password"></i>
                            </div>
                        </div>
                        
                        <div class="profile-actions">
                            <button type="button" id="cancelPasswordChange" class="secondary-btn">Cancel</button>
                            <button type="submit" class="primary-btn">Update Password</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    `;

    // Add the profile modal CSS
    const profileStyles = document.createElement('style');
    profileStyles.textContent = `
    /* Profile Modal Styles */
    .profile-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 2000;
        overflow-y: auto;
        animation: fadeIn 0.3s ease;
    }

    .profile-modal.active {
        display: block;
    }

    .profile-modal-content {
        background-color: white;
        margin: 20px auto;
        width: 90%;
        max-width: 500px;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        animation: slideUp 0.4s ease;
    }

    .profile-modal-header {
        padding: 15px 20px;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .profile-modal-header h2 {
        margin: 0;
        font-size: 1.3rem;
        color: #333;
    }

    .close-profile {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #777;
        transition: color 0.3s ease;
    }

    .close-profile:hover {
        color: #333;
    }

    .profile-modal-body {
        padding: 20px;
    }

    .profile-image-container {
        display: flex;
        justify-content: center;
        margin-bottom: 25px;
    }

    .profile-image-wrapper {
        position: relative;
        width: 120px;
        height: 120px;
        border-radius: 50%;
        overflow: hidden;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        border: 3px solid #6c5ce7;
    }

    .profile-image-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .profile-image-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: rgba(0, 0, 0, 0.6);
        color: white;
        padding: 8px 0;
        text-align: center;
        font-size: 0.8rem;
        transform: translateY(100%);
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .profile-image-wrapper:hover .profile-image-overlay {
        transform: translateY(0);
    }

    .profile-image-overlay i {
        font-size: 1rem;
        margin-bottom: 2px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #333;
        font-size: 0.9rem;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 0.95rem;
        transition: border-color 0.3s ease;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        border-color: #6c5ce7;
        outline: none;
    }

    .form-group input[readonly] {
        background-color: #f8f9fa;
        cursor: not-allowed;
    }

    .profile-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
    }

    .primary-btn,
    .secondary-btn {
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        font-size: 0.95rem;
    }

    .primary-btn {
        background-color: #6c5ce7;
        color: white;
    }

    .primary-btn:hover {
        background-color: #5b4bc4;
    }

    .secondary-btn {
        background-color: #f1f3f5;
        color: #333;
    }

    .secondary-btn:hover {
        background-color: #e9ecef;
    }

    /* Change Password Section */
    .change-password-section {
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #eee;
    }

    .change-password-section h3 {
        margin-top: 0;
        margin-bottom: 20px;
        font-size: 1.1rem;
        color: #333;
    }

    .hidden {
        display: none;
    }

    .password-input {
        position: relative;
    }

    .toggle-password {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        color: #777;
    }

    /* Password Strength Meter */
    .password-strength {
        margin-top: 8px;
    }

    .strength-meter {
        display: flex;
        gap: 5px;
        margin-bottom: 5px;
    }

    .strength-segment {
        height: 4px;
        flex: 1;
        background-color: #ddd;
        border-radius: 2px;
        transition: background-color 0.3s ease;
    }

    .strength-segment.weak {
        background-color: #e74c3c;
    }

    .strength-segment.medium {
        background-color: #f39c12;
    }

    .strength-segment.strong {
        background-color: #2ecc71;
    }

    .strength-text {
        font-size: 0.8rem;
        color: #777;
    }

    /* Loading Spinner */
    .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 0.8s linear infinite;
        margin-left: 8px;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideUp {
        from { transform: translateY(30px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    /* Button Loading State */
    .primary-btn.loading,
    .secondary-btn.loading {
        position: relative;
        color: transparent !important;
        pointer-events: none;
    }

    .primary-btn.loading .loading-spinner,
    .secondary-btn.loading .loading-spinner {
        position: absolute;
        top: calc(50% - 10px);
        left: calc(50% - 10px);
    }

    .secondary-btn.loading .loading-spinner {
        border-top-color: #333;
    }

    /* Responsive adjustments */
    @media (max-width: 480px) {
        .profile-modal-content {
            width: 95%;
            margin: 10px auto;
        }
        
        .profile-actions {
            flex-direction: column;
            gap: 10px;
        }
        
        .primary-btn,
        .secondary-btn {
            width: 100%;
        }
    }
    `;

    // Append the CSS and HTML to the document
    document.head.appendChild(profileStyles);
    document.body.insertAdjacentHTML('beforeend', profileModalHTML);

    // Initialize the profile functionality
    initializeProfileFunctionality();
}

function initializeProfileFunctionality() {
    // Get Firebase services
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();

    // DOM Elements
    const profileCircle = document.querySelector('.profile-circle');
    const profileModal = document.getElementById('profileModal');
    const closeModalBtn = document.querySelector('.close-profile');
    const profileForm = document.getElementById('profileForm');
    const profileImageWrapper = document.querySelector('.profile-image-wrapper');
    const profileImageUpload = document.getElementById('profileImageUpload');
    const profileModalImage = document.getElementById('profileModalImage');
    const userProfileImage = document.getElementById('userProfileImage');
    const changePasswordBtn = document.getElementById('changePasswordBtn');
    const changePasswordSection = document.getElementById('changePasswordSection');
    const cancelPasswordChange = document.getElementById('cancelPasswordChange');
    const changePasswordForm = document.getElementById('changePasswordForm');
    const togglePasswordBtns = document.querySelectorAll('.toggle-password');
    const newPasswordInput = document.getElementById('newPassword');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const strengthSegments = document.querySelectorAll('.strength-meter .strength-segment');
    const strengthText = document.querySelector('.strength-text');

    // Check if elements exist
    if (!profileCircle || !profileModal) {
        console.error('Required DOM elements not found');
        return;
    }

    // Open profile modal when clicking on profile circle
profileCircle.addEventListener('click', function() {
    profileModal.classList.add('active');
    
    // Don't reset the image when opening the modal
    // Just load the user data from Firestore
    loadUserProfileData();
});

    // Close modal when clicking the close button
    closeModalBtn.addEventListener('click', function() {
        profileModal.classList.remove('active');
    });

    // Close modal when clicking outside the modal content
    profileModal.addEventListener('click', function(e) {
        if (e.target === profileModal) {
            profileModal.classList.remove('active');
        }
    });

    // Trigger file upload when clicking on profile image
    profileImageWrapper.addEventListener('click', function() {
        profileImageUpload.click();
    });


// Function to initialize the emoji avatar selector
function initEmojiAvatarSelector() {
    const currentEmojiAvatar = document.getElementById('currentEmojiAvatar');
    const emojiSelector = document.getElementById('emojiSelector');
    const emojiOptions = document.querySelectorAll('.emoji-option');
    
    if (!currentEmojiAvatar || !emojiSelector) return;
    
    // Add click handler to show/hide emoji selector
    currentEmojiAvatar.addEventListener('click', (e) => {
        e.stopPropagation();
        emojiSelector.classList.toggle('active');
    });
    
    // Close emoji selector when clicking outside
    document.addEventListener('click', () => {
        emojiSelector.classList.remove('active');
    });
    
    // Prevent closing when clicking inside the selector
    emojiSelector.addEventListener('click', (e) => {
        e.stopPropagation();
    });
    
    // Add click handlers for each emoji option
    emojiOptions.forEach(option => {
        option.addEventListener('click', () => {
            const emoji = option.getAttribute('data-emoji');
            selectEmojiAvatar(emoji);
        });
    });
    
    // Add styles for emoji avatar
    const emojiStyles = document.createElement('style');
    emojiStyles.textContent = `
        .emoji-avatar-wrapper {
            position: relative;
            cursor: pointer;
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
        }
        
        .current-emoji-avatar {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            background-color: #f0f0f0;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .current-emoji-avatar:hover {
            background-color: #e0e0e0;
        }
        
        .emoji-selector {
            position: absolute;
            top: 110%;
            left: 50%;
            transform: translateX(-50%);
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 10px;
            display: none;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            z-index: 10;
        }
        
        .emoji-selector.active {
            display: grid;
        }
        
        .emoji-option {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .emoji-option:hover {
            background-color: #f0f0f0;
            transform: scale(1.1);
        }
        
        .user-profile-image {
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f0f0f0;
        }
    `;
    document.head.appendChild(emojiStyles);
    
    // Also update the small profile image in the header
    const userProfileImage = document.querySelector('.user-profile-image');
    if (userProfileImage) {
        // Remove any existing img tag
        userProfileImage.innerHTML = '';
        userProfileImage.classList.add('emoji-avatar');
    }
}

// Function to select and save an emoji avatar
function selectEmojiAvatar(emoji) {
    const user = auth.currentUser;
    if (!user) {
        showToast('You must be logged in to change your avatar', 'error');
        return;
    }
    
    // Update the current avatar display
    const currentEmojiAvatar = document.getElementById('currentEmojiAvatar');
    if (currentEmojiAvatar) {
        currentEmojiAvatar.textContent = emoji;
    }
    
    // Update the small profile image in the header
    const userProfileImage = document.querySelector('.user-profile-image');
    if (userProfileImage) {
        userProfileImage.textContent = emoji;
    }
    
    // Close the emoji selector
    const emojiSelector = document.getElementById('emojiSelector');
    if (emojiSelector) {
        emojiSelector.classList.remove('active');
    }
    
    // Save the selected emoji to Firebase
    db.collection('users').doc(user.uid).update({
        emojiAvatar: emoji,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
    })
    .then(() => {
        console.log('Emoji avatar updated successfully');
        showToast('Avatar updated successfully');
    })
    .catch(error => {
        console.error('Error updating emoji avatar:', error);
        showToast('Error updating avatar: ' + error.message, 'error');
    });
}

// Function to load the user's emoji avatar
function loadUserEmojiAvatar() {
    const user = auth.currentUser;
    if (!user) return;
    
    db.collection('users').doc(user.uid).get()
        .then(doc => {
            if (doc.exists) {
                const userData = doc.data();
                
                // Get the emoji avatar or use default
                const emojiAvatar = userData.emojiAvatar || 'ðŸ¤–';
                
                // Update the current avatar display
                const currentEmojiAvatar = document.getElementById('currentEmojiAvatar');
                if (currentEmojiAvatar) {
                    currentEmojiAvatar.textContent = emojiAvatar;
                }
                
                // Update the small profile image in the header
                const userProfileImage = document.querySelector('.user-profile-image');
                if (userProfileImage) {
                    userProfileImage.textContent = emojiAvatar;
                }
            }
        })
        .catch(error => {
            console.error('Error loading user emoji avatar:', error);
        });
}

// Modified auth state change listener
auth.onAuthStateChanged(function(user) {
    console.log('Auth state changed:', user ? 'User logged in' : 'User logged out');
    
    if (user) {
        // Load emoji avatar
        loadUserEmojiAvatar();
        
        // Update username display
        const usernameDisplay = document.getElementById('usernameDisplay');
        if (usernameDisplay) {
            usernameDisplay.textContent = user.displayName || user.email;
        }
        
        // Ensure user document exists in Firestore
        db.collection('users').doc(user.uid).get()
            .then(doc => {
                if (!doc.exists) {
                    // Create user document if it doesn't exist
                    console.log('Creating new user document in Firestore');
                    return db.collection('users').doc(user.uid).set({
                        email: user.email,
                        displayName: user.displayName || '',
                        emojiAvatar: 'ðŸ¤–', // Default emoji avatar
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } else if (!doc.data().emojiAvatar) {
                    // If document exists but is missing emojiAvatar, add default
                    console.log('Adding default emoji avatar to user document');
                    return db.collection('users').doc(user.uid).update({
                        emojiAvatar: 'ðŸ¤–'
                    });
                }
            })
            .catch(error => {
                console.error('Error checking/creating user document:', error);
            });
    }
});

// Initialize emoji avatar selector when the document is ready
document.addEventListener('DOMContentLoaded', function() {
    initEmojiAvatarSelector();
    
    // Also initialize the profile circle click handler
    const profileCircle = document.querySelector('.user-profile-image');
    if (profileCircle) {
        profileCircle.addEventListener('click', function() {
            const profileModal = document.getElementById('profileModal');
            if (profileModal) {
                profileModal.classList.add('active');
                loadUserEmojiAvatar(); // Load emoji avatar when opening modal
                loadUserProfileData();
            }
        });
    }
});

    
    // Toggle password visibility
    togglePasswordBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const passwordInput = this.previousElementSibling;
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.classList.toggle('fa-eye');
            this.classList.toggle('fa-eye-slash');
        });
    });

    // Show/hide change password section
    changePasswordBtn.addEventListener('click', function() {
        profileForm.classList.add('hidden');
        changePasswordSection.classList.remove('hidden');
    });

    cancelPasswordChange.addEventListener('click', function() {
        changePasswordSection.classList.add('hidden');
        profileForm.classList.remove('hidden');
        changePasswordForm.reset();
    });

    // Password strength meter
    if (newPasswordInput) {
        newPasswordInput.addEventListener('input', function() {
            updatePasswordStrength(this.value);
        });
    }

    // Save profile changes
    profileForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const saveBtn = document.getElementById('saveProfileBtn');
        setButtonLoading(saveBtn, true);
        
        const user = auth.currentUser;
        if (!user) {
            showToast('You must be logged in to update your profile', 'error');
            setButtonLoading(saveBtn, false);
            return;
        }
        
        const fullName = document.getElementById('profileFullName').value.trim();
        const userType = document.getElementById('profileUserType').value;
        const bio = document.getElementById('profileBio').value.trim();
        
        // Update display name in Auth
        user.updateProfile({
            displayName: fullName
        }).then(() => {
            // Update user data in Firestore
            return db.collection('users').doc(user.uid).update({
                displayName: fullName,
                userType: userType,
                bio: bio,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            });
        }).then(() => {
            // Update username display in the dashboard
            const usernameDisplay = document.getElementById('usernameDisplay');
            if (usernameDisplay) {
                usernameDisplay.textContent = fullName;
            }
            
            showToast('Profile updated successfully');
            setButtonLoading(saveBtn, false);
        }).catch(error => {
            console.error('Error updating profile:', error);
            showToast('Error updating profile: ' + error.message, 'error');
            setButtonLoading(saveBtn, false);
        });
    });

    // Change password
    changePasswordForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const submitBtn = this.querySelector('button[type="submit"]');
        setButtonLoading(submitBtn, true);
        
        const user = auth.currentUser;
        if (!user) {
            showToast('You must be logged in to change your password', 'error');
            setButtonLoading(submitBtn, false);
            return;
        }
        
        const currentPassword = document.getElementById('currentPassword').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        // Check if passwords match
        if (newPassword !== confirmPassword) {
            showToast('New passwords do not match', 'error');
            setButtonLoading(submitBtn, false);
            return;
        }
        
        // Check password strength
        if (getPasswordStrength(newPassword) < 2) {
            showToast('Please choose a stronger password', 'error');
            setButtonLoading(submitBtn, false);
            return;
        }
        
        // Reauthenticate user
        const credential = firebase.auth.EmailAuthProvider.credential(
            user.email, 
            currentPassword
        );
        
        user.reauthenticateWithCredential(credential)
            .then(() => {
                // Change password
                return user.updatePassword(newPassword);
            })
            .then(() => {
                showToast('Password updated successfully');
                changePasswordSection.classList.add('hidden');
                profileForm.classList.remove('hidden');
                changePasswordForm.reset();
                setButtonLoading(submitBtn, false);
            })
            .catch(error => {
                console.error('Error changing password:', error);
                let errorMessage = error.message;
                
                // Provide more user-friendly error messages
                if (error.code === 'auth/wrong-password') {
                    errorMessage = 'Current password is incorrect';
                } else if (error.code === 'auth/weak-password') {
                    errorMessage = 'New password is too weak';
                }
                
                showToast('Error: ' + errorMessage, 'error');
                setButtonLoading(submitBtn, false);
            });
    });

    // Load user profile data
    function loadUserProfile() {
        const user = auth.currentUser;
        if (!user) {
            showToast('You must be logged in to view your profile', 'error');
            profileModal.classList.remove('active');
            return;
        }
        
        // Set email (from Auth)
        const profileEmail = document.getElementById('profileEmail');
        if (profileEmail) {
            profileEmail.value = user.email;
        }
        
        // Set name (from Auth)
        const profileFullName = document.getElementById('profileFullName');
        if (profileFullName) {
            profileFullName.value = user.displayName || '';
        }
        
        // Set profile image (from Auth)
        if (user.photoURL) {
            profileModalImage.src = user.photoURL;
            userProfileImage.src = user.photoURL;
        } else {
            // Set default image
            profileModalImage.src = 'https://via.placeholder.com/150';
            userProfileImage.src = 'https://via.placeholder.com/40';
        }
        
        // Get additional user data from Firestore
        db.collection('users').doc(user.uid).get()
            .then(doc => {
                if (doc.exists) {
                    const userData = doc.data();
                    
                    // Set user type
                    const profileUserType = document.getElementById('profileUserType');
                    if (profileUserType && userData.userType) {
                        profileUserType.value = userData.userType;
                    }
                    
                    // Set bio
                    const profileBio = document.getElementById('profileBio');
                    if (profileBio && userData.bio) {
                        profileBio.value = userData.bio;
                    }
                }
            })
            .catch(error => {
                console.error('Error loading user data:', error);
                showToast('Error loading profile data', 'error');
            });
    }

    // Upload profile image to Firebase Storage
    function uploadProfileImage(file) {
        const user = auth.currentUser;
        if (!user) {
            showToast('You must be logged in to upload a profile image', 'error');
            return;
        }
        
        // Create a storage reference
        const storageRef = storage.ref();
        const profileImageRef = storageRef.child(`profile_images/${user.uid}`);
        
        // Show loading state
        profileImageWrapper.classList.add('uploading');
        
        // Upload file
        const uploadTask = profileImageRef.put(file);
        
        // Monitor upload progress
        uploadTask.on('state_changed', 
            (snapshot) => {
                // Progress function
                const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                console.log('Upload is ' + progress + '% done');
            }, 
            (error) => {
                // Error function
                console.error('Error uploading image:', error);
                showToast('Error uploading image: ' + error.message, 'error');
                profileImageWrapper.classList.remove('uploading');
            }, 
            () => {
                // Complete function
                uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                    console.log('File available at', downloadURL);
                    
                    // Update profile in Auth
                    user.updateProfile({
                        photoURL: downloadURL
                    }).then(() => {
                        // Update profile in Firestore
                        return db.collection('users').doc(user.uid).update({
                            photoURL: downloadURL,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }).then(() => {
                        showToast('Profile image updated successfully');
                        profileImageWrapper.classList.remove('uploading');
                    }).catch(error => {
                        console.error('Error updating profile with new image:', error);
                        showToast('Error updating profile with new image', 'error');
                        profileImageWrapper.classList.remove('uploading');
                    });
                });
            }
        );
    }

    // Password strength checker
    function getPasswordStrength(password) {
        let strength = 0;
        
        // Length check
        if (password.length >= 8) strength += 1;
        
        // Contains lowercase
        if (/[a-z]/.test(password)) strength += 1;
        
        // Contains uppercase
        if (/[A-Z]/.test(password)) strength += 1;
        
        // Contains number
        if (/[0-9]/.test(password)) strength += 1;
        
        // Contains special character
        if (/[^A-Za-z0-9]/.test(password)) strength += 1;
        
        return Math.min(strength, 4);
    }

    // Update password strength meter
    function updatePasswordStrength(password) {
        const strength = getPasswordStrength(password);
        
        // Reset all segments
        strengthSegments.forEach(segment => {
            segment.className = 'strength-segment';
        });
        
        // Update strength text
        let strengthLabel = 'Weak';
        let strengthClass = 'weak';
        
        if (strength >= 4) {
            strengthLabel = 'Strong';
            strengthClass = 'strong';
        } else if (strength >= 2) {
            strengthLabel = 'Medium';
            strengthClass = 'medium';
        }
        
        strengthText.textContent = strengthLabel;
        
        // Update segments
        for (let i = 0; i < strength; i++) {
            strengthSegments[i].classList.add(strengthClass);
        }
    }

    // Set button loading state
    function setButtonLoading(button, isLoading) {
        if (!button) return;
        
        if (isLoading) {
            button.classList.add('loading');
            button.disabled = true;
            
            // Add spinner
            const spinner = document.createElement('span');
            spinner.className = 'loading-spinner';
            button.appendChild(spinner);
        } else {
            button.classList.remove('loading');
            button.disabled = false;
            
            // Remove spinner
            const spinner = button.querySelector('.loading-spinner');
            if (spinner) {
                button.removeChild(spinner);
            }
        }
    }

    // Initialize profile data when auth state changes
    auth.onAuthStateChanged(function(user) {
        if (user) {
            // Update profile circle image
            if (user.photoURL) {
                userProfileImage.src = user.photoURL;
            }
            
            // Update username display
            const usernameDisplay = document.getElementById('usernameDisplay');
            if (usernameDisplay) {
                usernameDisplay.textContent = user.displayName || user.email;
            }
        }
    });

    // Initialize dropdown menu for the hamburger button
    const hamburgerMenu = document.getElementById('hamburgerMenu');
    const dropdownMenu = document.getElementById('dropdownMenu');
    
    if (hamburgerMenu && dropdownMenu) {
        hamburgerMenu.addEventListener('click', function(e) {
            e.stopPropagation();
            dropdownMenu.classList.toggle('active');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
            if (dropdownMenu.classList.contains('active')) {
                dropdownMenu.classList.remove('active');
            }
        });
        
        // Prevent dropdown from closing when clicking inside it
        dropdownMenu.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    }

    console.log('Profile functionality initialized');
}

// Add this CSS for the dropdown menu
const dropdownStyles = document.createElement('style');
dropdownStyles.textContent = `
.dropdown-menu {
    position: absolute;
    top: 56px;
    right: 15px;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    width: 180px;
    z-index: 100;
    overflow: hidden;
    display: none;
    animation: fadeIn 0.2s ease;
}

.dropdown-menu.active {
    display: block;
}

.dropdown-item {
    padding: 12px 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.dropdown-item:hover {
    background-color: #f8f9fa;
}

.dropdown-item i {
    font-size: 1rem;
    color: #6c5ce7;
}

.dropdown-item span {
    font-size: 0.9rem;
    color: #333;
}

.logout-btn {
    border-top: 1px solid #eee;
}

.logout-btn i {
    color: #e74c3c;
}

.profile-image-wrapper.uploading {
    opacity: 0.7;
}

.profile-image-wrapper.uploading::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.3) url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3
.org/2000/svg" width="38" height="38" viewBox="0 0 38 38">
    <defs>
        <linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a">
            <stop stop-color="#fff" stop-opacity="0" offset="0%"/>
            <stop stop-color="#fff" stop-opacity=".631" offset="63.146%"/>
            <stop stop-color="#fff" offset="100%"/>
        </linearGradient>
    </defs>
    <g fill="none" fill-rule="evenodd">
        <g transform="translate(1 1)">
            <path d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="2">
                <animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"/>
            </path>
        </g>
    </g>
</svg>') center no-repeat;
}
`;
document.head.appendChild(dropdownStyles);

// Helper function for showing toast notifications
function showToast(message, type = 'success') {
    // Create toast container if it doesn't exist
    let toastContainer = document.querySelector('.toast-container');
    if (!toastContainer) {
        toastContainer = document.createElement('div');
        toastContainer.className = 'toast-container';
        document.body.appendChild(toastContainer);
    }
    
    // Create toast element
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    toast.innerHTML = `
        <div class="toast-content">
            <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
            <span>${message}</span>
        </div>
        <div class="toast-progress"></div>
    `;
    
    toastContainer.appendChild(toast);
    
    // Show and hide toast with animation
    setTimeout(() => toast.classList.add('visible'), 10);
    
    // Remove toast after animation
    setTimeout(() => {
        toast.classList.remove('visible');
        setTimeout(() => toastContainer.removeChild(toast), 300);
    }, 3000);
}

// Add toast styles if they don't exist
if (!document.querySelector('style[data-toast-styles]')) {
    const toastStyles = document.createElement('style');
    toastStyles.setAttribute('data-toast-styles', 'true');
    toastStyles.textContent = `
    .toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
    }
    
    .toast {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        margin-bottom: 10px;
        overflow: hidden;
        width: 300px;
        max-width: 100%;
        transform: translateX(120%);
        transition: transform 0.3s ease;
    }
    
    .toast.visible {
        transform: translateX(0);
    }
    
    .toast-content {
        display: flex;
        align-items: center;
        padding: 15px;
    }
    
    .toast-content i {
        font-size: 1.5rem;
        margin-right: 12px;
    }
    
    .toast.success i {
        color: #2ecc71;
    }
    
    .toast.error i {
        color: #e74c3c;
    }
    
    .toast-content span {
        flex: 1;
        font-size: 0.9rem;
        color: #333;
    }
    
    .toast-progress {
        height: 3px;
        background-color: #6c5ce7;
        width: 100%;
        animation: progress 3s linear;
    }
    
    .toast.error .toast-progress {
        background-color: #e74c3c;
    }
    
    @keyframes progress {
        from { width: 100%; }
        to { width: 0%; }
    }
    `;
    document.head.appendChild(toastStyles);
}


// Check if we need to load Font Awesome
if (!document.querySelector('link[href*="font-awesome"]')) {
    const fontAwesome = document.createElement('link');
    fontAwesome.rel = 'stylesheet';
    fontAwesome.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
    document.head.appendChild(fontAwesome);
}

// Initialize the profile functionality when the document is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initProfileModal);
} else {
    initProfileModal();
}

 // Enhanced function to update profile images from Firebase
function updateProfileImages() {
    const user = auth.currentUser;
    if (!user) return;
    
    console.log('Updating profile images for user:', user.uid);
    
    // First check if user has photoURL in Auth
    if (user.photoURL) {
        console.log('Using photoURL from Auth:', user.photoURL);
        setProfileImages(user.photoURL);
    } else {
        // If not in Auth, check Firestore
        console.log('No photoURL in Auth, checking Firestore');
        db.collection('users').doc(user.uid).get()
            .then(doc => {
                if (doc.exists && doc.data().photoURL) {
                    const photoURL = doc.data().photoURL;
                    console.log('Found photoURL in Firestore:', photoURL);
                    
                    // Update Auth with the Firestore photoURL
                    user.updateProfile({
                        photoURL: photoURL
                    }).then(() => {
                        console.log('Updated Auth with Firestore photoURL');
                        setProfileImages(photoURL);
                    }).catch(error => {
                        console.error('Error updating Auth with Firestore photoURL:', error);
                        // Still set the images even if Auth update fails
                        setProfileImages(photoURL);
                    });
                } else {
                    console.log('No photoURL found in Firestore, using default');
                    setProfileImages(null);
                }
            })
            .catch(error => {
                console.error('Error fetching user data from Firestore:', error);
                setProfileImages(null);
            });
    }
}

// Helper function to set profile images with a given URL
function setProfileImages(imageUrl) {
    // Set the images with the determined URL or fallback to placeholder
    if (profileModalImage) {
        profileModalImage.src = imageUrl || 'https://via.placeholder.com/150';
        profileModalImage.onerror = function() {
            console.log('Error loading profile modal image, using placeholder');
            this.src = 'https://via.placeholder.com/150';
        };
    }
    
    if (userProfileImage) {
        userProfileImage.src = imageUrl || 'https://via.placeholder.com/40';
        userProfileImage.onerror = function() {
            console.log('Error loading user profile image, using placeholder');
            this.src = 'https://via.placeholder.com/40';
        };
    }
    
    console.log('Profile images updated with URL:', imageUrl || 'placeholder');
}

// Enhanced auth state change listener
auth.onAuthStateChanged(function(user) {
    console.log('Auth state changed:', user ? 'User logged in' : 'User logged out');
    
    if (user) {
        // Update profile images
        updateProfileImages();
        
        // Update username display
        const usernameDisplay = document.getElementById('usernameDisplay');
        if (usernameDisplay) {
            usernameDisplay.textContent = user.displayName || user.email;
        }
        
        // Ensure user document exists in Firestore
        db.collection('users').doc(user.uid).get()
            .then(doc => {
                if (!doc.exists) {
                    // Create user document if it doesn't exist
                    console.log('Creating new user document in Firestore');
                    return db.collection('users').doc(user.uid).set({
                        email: user.email,
                        displayName: user.displayName || '',
                        photoURL: user.photoURL || '',
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } else {
                    // If document exists but is missing photoURL, update it
                    const userData = doc.data();
                    if (user.photoURL && !userData.photoURL) {
                        console.log('Updating Firestore with Auth photoURL');
                        return db.collection('users').doc(user.uid).update({
                            photoURL: user.photoURL
                        });
                    }
                }
            })
            .catch(error => {
                console.error('Error checking/creating user document:', error);
            });
    }
});

// Modified upload function to ensure images stay consistent
function uploadProfileImage(file) {
    const user = auth.currentUser;
    if (!user) {
        showToast('You must be logged in to upload a profile image', 'error');
        return;
    }
    
    // Show loading state
    profileImageWrapper.classList.add('uploading');
    showToast('Uploading image...', 'info');
    
    // Create a storage reference
    const storageRef = firebase.storage().ref();
    const profileImageRef = storageRef.child(`profile_images/${user.uid}_${Date.now()}`);
    
    console.log('Starting upload to:', profileImageRef.fullPath);
    
    // Upload file
    const uploadTask = profileImageRef.put(file);
    
    // Monitor upload progress
    uploadTask.on('state_changed', 
        (snapshot) => {
            // Progress function
            const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
            console.log('Upload is ' + progress + '% done');
        }, 
        (error) => {
            // Error function
            console.error('Error uploading image:', error);
            showToast('Error uploading image: ' + error.message, 'error');
            profileImageWrapper.classList.remove('uploading');
        }, 
        () => {
            // Complete function - Get the download URL
            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                console.log('File available at', downloadURL);
                
                // Create a transaction to update both Auth and Firestore
                Promise.all([
                    // Update Auth profile
                    user.updateProfile({
                        photoURL: downloadURL
                    }),
                    
                    // Update Firestore document
                    db.collection('users').doc(user.uid).update({
                        photoURL: downloadURL,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    })
                ])
                .then(() => {
                    console.log('Profile updated with new photo URL in both Auth and Firestore');
                    showToast('Profile image updated successfully');
                    
                    // Update both images with the new URL
                    setProfileImages(downloadURL);
                    
                    profileImageWrapper.classList.remove('uploading');
                })
                .catch(error => {
                    console.error('Error updating profile with new image:', error);
                    showToast('Error updating profile with new image: ' + error.message, 'error');
                    profileImageWrapper.classList.remove('uploading');
                });
            }).catch(error => {
                console.error('Error getting download URL:', error);
                showToast('Error getting download URL: ' + error.message, 'error');
                profileImageWrapper.classList.remove('uploading');
            });
        }
    );
}

// Call updateProfileImages when the page loads to ensure images are displayed
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(updateProfileImages, 1000); // Slight delay to ensure auth is initialized
});

// Also update images when the profile modal is opened
profileCircle.addEventListener('click', function() {
    profileModal.classList.add('active');
    updateProfileImages(); // Refresh images when opening modal
    loadUserProfileData();
});

// Modified function to load user profile data without changing the current images
function loadUserProfileData() {
    const user = auth.currentUser;
    if (!user) {
        showToast('You must be logged in to view your profile', 'error');
        profileModal.classList.remove('active');
        return;
    }
    
    // Set email (from Auth)
    const profileEmail = document.getElementById('profileEmail');
    if (profileEmail) {
        profileEmail.value = user.email;
    }
    
    // Set name (from Auth)
    const profileFullName = document.getElementById('profileFullName');
    if (profileFullName) {
        profileFullName.value = user.displayName || '';
    }
    
    // Get additional user data from Firestore
    db.collection('users').doc(user.uid).get()
        .then(doc => {
            if (doc.exists) {
                const userData = doc.data();
                
                // Set user type
                const profileUserType = document.getElementById('profileUserType');
                if (profileUserType && userData.userType) {
                    profileUserType.value = userData.userType;
                }
                
                // Set bio
                const profileBio = document.getElementById('profileBio');
                if (profileBio && userData.bio) {
                    profileBio.value = userData.bio;
                }
            }
        })
        .catch(error => {
            console.error('Error loading user data:', error);
            showToast('Error loading profile data', 'error');
        });
}
   
// Function to initialize the emoji avatar selector
function initEmojiAvatarSelector() {
  const currentEmojiAvatar = document.getElementById('currentEmojiAvatar');
  const emojiSelector = document.getElementById('emojiSelector');
  const emojiOptions = document.querySelectorAll('.emoji-option');
  
  if (!currentEmojiAvatar || !emojiSelector) {
    console.error('Emoji selector elements not found');
    return;
  }
  
  // Add click handler to show/hide emoji selector
  currentEmojiAvatar.addEventListener('click', (e) => {
    e.stopPropagation();
    emojiSelector.classList.toggle('active');
  });
  
  // Close emoji selector when clicking outside
  document.addEventListener('click', () => {
    emojiSelector.classList.remove('active');
  });
  
  // Prevent closing when clicking inside the selector
  emojiSelector.addEventListener('click', (e) => {
    e.stopPropagation();
  });
  
  // Add click handlers for each emoji option
  emojiOptions.forEach(option => {
    option.addEventListener('click', () => {
      const emoji = option.getAttribute('data-emoji');
      selectEmojiAvatar(emoji);
    });
  });
}

// Function to select and save an emoji avatar
function selectEmojiAvatar(emoji) {
  const user = firebase.auth().currentUser;
  if (!user) {
    showToast('You must be logged in to change your avatar', 'error');
    return;
  }
  
  // Update the current avatar display
  const currentEmojiAvatar = document.getElementById('currentEmojiAvatar');
  if (currentEmojiAvatar) {
    currentEmojiAvatar.textContent = emoji;
  }
  
  // Update the small profile image in the header
  const userProfileImage = document.querySelector('.user-profile-image');
  if (userProfileImage) {
    userProfileImage.textContent = emoji;
  }
  
  // Close the emoji selector
  const emojiSelector = document.getElementById('emojiSelector');
  if (emojiSelector) {
    emojiSelector.classList.remove('active');
  }
  
  // Save the selected emoji to Firebase
  firebase.firestore().collection('users').doc(user.uid).update({
    emojiAvatar: emoji,
    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
  })
  .then(() => {
    console.log('Emoji avatar updated successfully');
    showToast('Avatar updated successfully');
  })
  .catch(error => {
    console.error('Error updating emoji avatar:', error);
    showToast('Error updating avatar: ' + error.message, 'error');
  });
}

// Function to load the user's emoji avatar
function loadUserEmojiAvatar() {
  const user = firebase.auth().currentUser;
  if (!user) return;
  
  firebase.firestore().collection('users').doc(user.uid).get()
    .then(doc => {
      if (doc.exists) {
        const userData = doc.data();
        
        // Get the emoji avatar or use default
        const emojiAvatar = userData.emojiAvatar || 'ðŸ¤–';
        
        // Update the current avatar display
        const currentEmojiAvatar = document.getElementById('currentEmojiAvatar');
        if (currentEmojiAvatar) {
          currentEmojiAvatar.textContent = emojiAvatar;
        }
        
        // Update the small profile image in the header
        const userProfileImage = document.querySelector('.user-profile-image');
        if (userProfileImage) {
          userProfileImage.textContent = emojiAvatar;
        }
      }
    })
    .catch(error => {
      console.error('Error loading user emoji avatar:', error);
    });
}

// Function to add more emoji options dynamically
function addMoreEmojiOptions() {
  const emojiSelector = document.getElementById('emojiSelector');
  if (!emojiSelector) return;
  
  // Additional emojis to add
  const additionalEmojis = ['ðŸš€', 'ðŸŒˆ', 'ðŸ”¥', 'ðŸ’¡', 'ðŸŽ­', 'ðŸŽ®', 'ðŸ“±', 'ðŸ’»', 'ðŸŽ§', 'ðŸ“¸', 'ðŸŽ¬', 'ðŸŽ¯'];
  
  additionalEmojis.forEach(emoji => {
    const emojiOption = document.createElement('div');
    emojiOption.className = 'emoji-option';
    emojiOption.setAttribute('data-emoji', emoji);
    emojiOption.textContent = emoji;
    
    // Add click handler
    emojiOption.addEventListener('click', () => {
      selectEmojiAvatar(emoji);
    });
    
    emojiSelector.appendChild(emojiOption);
  });
}

// Function to handle search for emojis
function initEmojiSearch() {
  const emojiSearchInput = document.getElementById('emojiSearch');
  if (!emojiSearchInput) return;
  
  emojiSearchInput.addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const emojiOptions = document.querySelectorAll('.emoji-option');
    
    emojiOptions.forEach(option => {
      const emoji = option.getAttribute('data-emoji');
      const emojiDescription = option.getAttribute('data-description') || '';
      
      if (emoji.includes(searchTerm) || emojiDescription.includes(searchTerm)) {
        option.style.display = 'flex';
      } else {
        option.style.display = 'none';
      }
    });
  });
}

// Initialize the emoji selector when the document is ready
document.addEventListener('DOMContentLoaded', () => {
  initEmojiAvatarSelector();
  
  // Optional: Add more emoji options
  // addMoreEmojiOptions();
  
  // Optional: Initialize emoji search if you have a search input
  // initEmojiSearch();
  
  // Load the current user's emoji avatar
  firebase.auth().onAuthStateChanged(user => {
    if (user) {
      loadUserEmojiAvatar();
    }
  });
});

// Helper function to show toast notifications
function showToast(message, type = 'success') {
  // Create toast container if it doesn't exist
  let toastContainer = document.querySelector('.toast-container');
  if (!toastContainer) {
    toastContainer = document.createElement('div');
    toastContainer.className = 'toast-container';
    document.body.appendChild(toastContainer);
  }
  
  // Create toast element
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `
    <div class="toast-content">
      <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
      <span>${message}</span>
    </div>
    <div class="toast-progress"></div>
  `;
  
  toastContainer.appendChild(toast);
  
  // Show and hide toast with animation
  setTimeout(() => toast.classList.add('visible'), 10);
  
  // Remove toast after animation
  setTimeout(() => {
    toast.classList.remove('visible');
    setTimeout(() => toastContainer.removeChild(toast), 300);
  }, 3000);
}


// Hamburger Menu & Sidebar Functionality
document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements - Main Navigation
    const hamburgerBtn = document.querySelector('.hamburger-menu');
    const sidebarMenu = document.getElementById('sidebarMenu');
    const closeSidebarBtn = document.getElementById('closeSidebarBtn');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    
    // DOM Elements - Sidebar Menu Items
    const logoutBtn = document.getElementById('logoutBtn');
    const themeCheckbox = document.getElementById('themeCheckbox');
    const termsBtn = document.getElementById('termsBtn');
    const privacyBtn = document.getElementById('privacyBtn');
    const profileMenuBtn = document.getElementById('profileMenuBtn');
    
    // DOM Elements - Modals
    const termsModal = document.getElementById('termsModal');
    const privacyModal = document.getElementById('privacyModal');
    const closeModalBtns = document.querySelectorAll('.close-privacy');
    
    // DOM Elements - User Info
    const sidebarUserAvatar = document.getElementById('sidebarUserAvatar');
    const sidebarUserName = document.getElementById('sidebarUserName');
    const sidebarUserEmail = document.getElementById('sidebarUserEmail');
    
    // Function to open sidebar
    function openSidebar() {
        sidebarMenu.classList.add('active');
        sidebarOverlay.classList.add('active');
        document.body.style.overflow = 'hidden'; // Prevent scrolling
        
        // If Firebase is available, log the event
        if (typeof firebase !== 'undefined' && firebase.analytics) {
            firebase.analytics().logEvent('sidebar_opened');
        }
    }
    
    // Function to close sidebar
    function closeSidebar() {
        sidebarMenu.classList.remove('active');
        sidebarOverlay.classList.remove('active');
        document.body.style.overflow = ''; // Re-enable scrolling
    }
    
    // Function to open modal
    function openModal(modal) {
        if (!modal) return;
        modal.classList.add('active');
        document.body.style.overflow = 'hidden'; // Prevent scrolling
    }
    
    // Function to close modal
    function closeModal(modal) {
        if (!modal) return;
        modal.classList.remove('active');
        document.body.style.overflow = ''; // Re-enable scrolling
    }
    
    // Function to toggle theme
    function toggleTheme(isDark) {
        if (isDark) {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
            
            // If Firebase is available, log the event
            if (typeof firebase !== 'undefined' && firebase.analytics) {
                firebase.analytics().logEvent('theme_changed', {
                    theme: 'dark'
                });
            }
        } else {
            document.documentElement.removeAttribute('data-theme');
            localStorage.setItem('theme', 'light');
            
            // If Firebase is available, log the event
            if (typeof firebase !== 'undefined' && firebase.analytics) {
                firebase.analytics().logEvent('theme_changed', {
                    theme: 'light'
                });
            }
        }
    }
    
    
    // Function to show toast notification
    function showToast(message, type = 'success') {
        // Check if toast container exists, if not create it
        let toastContainer = document.querySelector('.toast-container');
        if (!toastContainer) {
            toastContainer = document.createElement('div');
            toastContainer.className = 'toast-container';
            document.body.appendChild(toastContainer);
        }
        
        // Create toast element
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.textContent = message;
        
        // Add toast to container
        toastContainer.appendChild(toast);
        
        // Remove toast after 3 seconds
        setTimeout(() => {
            toast.classList.add('hide');
            setTimeout(() => {
                toast.remove();
            }, 300);
        }, 3000);
    }
    
    // Function to update user info in sidebar
    function updateUserInfo() {
        // If Firebase is available, get user info
        if (typeof firebase !== 'undefined' && firebase.auth) {
            const user = firebase.auth().currentUser;
            
            if (user) {
                // Set user email
                sidebarUserEmail.textContent = user.email;
                
                // Set user name (display name or email)
                sidebarUserName.textContent = user.displayName || user.email.split('@')[0];
                
                // If Firestore is available, get emoji avatar
                if (firebase.firestore) {
                    firebase.firestore().collection('users').doc(user.uid).get()
                        .then(doc => {
                            if (doc.exists && doc.data().emojiAvatar) {
                                sidebarUserAvatar.textContent = doc.data().emojiAvatar;
                            }
                        })
                        .catch(error => {
                            console.error('Error getting user data:', error);
                        });
                }
            }
        } else {
            // Fallback for when Firebase is not available
            // You can set default values or get from localStorage
            const savedName = localStorage.getItem('userName') || 'User Name';
            const savedEmail = localStorage.getItem('userEmail') || 'user@example.com';
            const savedEmoji = localStorage.getItem('userEmoji') || 'ðŸ¤–';
            
            sidebarUserName.textContent = savedName;
            sidebarUserEmail.textContent = savedEmail;
            sidebarUserAvatar.textContent = savedEmoji;
        }
    }
    
    // Initialize theme based on localStorage or system preference
    function initTheme() {
        const savedTheme = localStorage.getItem('theme');
        
        if (savedTheme === 'dark') {
            themeCheckbox.checked = true;
            toggleTheme(true);
        } else if (savedTheme === 'light') {
            themeCheckbox.checked = false;
            toggleTheme(false);
        } else {
            // If no saved preference, check system preference
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            themeCheckbox.checked = prefersDark;
            toggleTheme(prefersDark);
        }
    }
    
    // Add CSS for toast notifications
    function addToastStyles() {
        const styleExists = document.getElementById('toastStyles');
        if (styleExists) return;
        
        const toastStyles = document.createElement('style');
        toastStyles.id = 'toastStyles';
        toastStyles.textContent = `
            .toast-container {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 9999;
            }
            
            .toast {
                padding: 12px 20px;
                margin-bottom: 10px;
                border-radius: 8px;
                color: white;
                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
                transition: all 0.3s ease;
            }
            
            .toast.success {
                background-color: #2ecc71;
            }
            
            .toast.error {
                background-color: #e74c3c;
            }
            
            .toast.info {
                background-color: #3498db;
            }
            
            .toast.hide {
                opacity: 0;
                transform: translateY(20px);
            }
            
            @supports (padding: max(0px)) {
                .toast-container {
                    padding-bottom: max(20px, env(safe-area-inset-bottom));
                    padding-right: max(20px, env(safe-area-inset-right));
                }
            }
        `;
        document.head.appendChild(toastStyles);
    }
    
    // Event Listeners - Only add if elements exist
    if (hamburgerBtn) {
        hamburgerBtn.addEventListener('click', openSidebar);
    }
    
    if (closeSidebarBtn) {
        closeSidebarBtn.addEventListener('click', closeSidebar);
    }
    
    if (sidebarOverlay) {
        sidebarOverlay.addEventListener('click', closeSidebar);
    }
    
    if (logoutBtn) {
        logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            handleLogout();
        });
    }
    
    if (termsBtn) {
        termsBtn.addEventListener('click', function(e) {
            e.preventDefault();
            closeSidebar();
            openModal(termsModal);
            
            // If Firebase is available, log the event
            if (typeof firebase !== 'undefined' && firebase.analytics) {
                firebase.analytics().logEvent('terms_viewed');
            }
        });
    }
    
    if (privacyBtn) {
        privacyBtn.addEventListener('click', function(e) {
            e.preventDefault();
            closeSidebar();
            openModal(privacyModal);
            
            // If Firebase is available, log the event
            if (typeof firebase !== 'undefined' && firebase.analytics) {
                firebase.analytics().logEvent('privacy_viewed');
            }
        });
    }
    
    if (profileMenuBtn) {
        profileMenuBtn.addEventListener('click', function(e) {
            e.preventDefault();
            closeSidebar();
            
            // Open profile modal if it exists
            const profileModal = document.getElementById('profileModal');
            if (profileModal) {
                openModal(profileModal);
                
                // If Firebase is available, log the event
                if (typeof firebase !== 'undefined' && firebase.analytics) {
                    firebase.analytics().logEvent('profile_viewed');
                }
            }
        });
    }
    
    // Close modals with close button
    closeModalBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const modal = this.closest('.modal');
            closeModal(modal);
        });
    });
    
    // Close modals when clicking outside
    document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal(this);
            }
        });
    });
    
    // Theme toggle functionality
    if (themeCheckbox) {
        themeCheckbox.addEventListener('change', function() {
            toggleTheme(this.checked);
        });
    }
    
    // Initialize
    initTheme();
    updateUserInfo();
    addToastStyles();
    
    // Listen for Firebase auth state changes if available
    if (typeof firebase !== 'undefined' && firebase.auth) {
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                updateUserInfo();
                
                // If Firestore is available, update user data
                if (firebase.firestore) {
                    const userRef = firebase.firestore().collection('users').doc(user.uid);
                    userRef.get().then(doc => {
                        if (doc.exists) {
                            // Update last login time
                            userRef.update({
                                lastLogin: firebase.firestore.FieldValue.serverTimestamp()
                            });
                        } else {
                            // Create user document if it doesn't exist
                            userRef.set({
                                email: user.email,
                                displayName: user.displayName || '',
                                emojiAvatar: 'ðŸ¤–', // Default emoji
                                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                                lastLogin: firebase.firestore.FieldValue.serverTimestamp()
                            });
                        }
                    });
                }
            }
        });
    }
});

document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const wallet1Btn = document.querySelector('.wallet1-btn');
    const walletModal = document.getElementById('walletModal');
    const closeWalletBtn = document.getElementById('closeWalletBtn');
    const closeWalletDashboardBtn = document.getElementById('closeWalletDashboardBtn');
    
    // PIN Setup Elements
    const pinScreen = document.getElementById('pinScreen');
    const pinSetupSection = document.getElementById('pinSetupSection');
    const pinEntrySection = document.getElementById('pinEntrySection');
    const pinConfirmContainer = document.getElementById('pinConfirmContainer');
    const createPinBtn = document.getElementById('createPinBtn');
    const loginPinBtn = document.getElementById('loginPinBtn');
    const forgotPinBtn = document.getElementById('forgotPinBtn');
    
    // Wallet Dashboard Elements
    const walletDashboard = document.getElementById('walletDashboard');
    const talentCoinBalance = document.getElementById('talentCoinBalance');
    const pendingCoinBalance = document.getElementById('pendingCoinBalance');
    const nairaEquivalent = document.getElementById('nairaEquivalent');
    const commissionBalance = document.getElementById('commissionBalance');
    
    // PIN Input Elements
    const pinDigits = document.querySelectorAll('.pin-digit');
    const pinConfirmDigits = document.querySelectorAll('.pin-confirm-digit');
    const pinLoginDigits = document.querySelectorAll('.pin-login-digit');
    
    // Constants
    const TALENT_COIN_RATE = 15; // 1 Talent Coin = â‚¦100 (example rate)
    
    // Create backup email elements dynamically
    createBackupEmailSection();
    const backupEmailSection = document.getElementById('backupEmailSection');
    const backupEmailInput = document.getElementById('backupEmail');
    const backupPasswordInput = document.getElementById('backupPassword');
    const saveBackupBtn = document.getElementById('saveBackupBtn');
    
    // Initialize wallet functionality
    initWallet();
    
    // Event Listeners
    if (wallet1Btn) {
        wallet1Btn.addEventListener('click', openWallet);
    }
    
    if (closeWalletBtn) {
        closeWalletBtn.addEventListener('click', closeWallet);
    }
    
    if (closeWalletDashboardBtn) {
        closeWalletDashboardBtn.addEventListener('click', closeWallet);
    }
    
    if (createPinBtn) {
        createPinBtn.addEventListener('click', handlePinCreation);
    }
    
    if (loginPinBtn) {
        loginPinBtn.addEventListener('click', handlePinLogin);
    }
    
    if (forgotPinBtn) {
        forgotPinBtn.addEventListener('click', handleForgotPin);
    }
    
    if (pinConfirmContainer) {
        pinConfirmContainer.addEventListener('click', function() {
            pinConfirmContainer.classList.toggle('active');
        });
    }
    
    if (saveBackupBtn) {
        saveBackupBtn.addEventListener('click', saveBackupEmail);
    }
    
    // Setup PIN input fields
    setupPinInputs(pinDigits);
    setupPinInputs(pinConfirmDigits);
    setupPinInputs(pinLoginDigits);
    
    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
        if (event.target === walletModal) {
            closeWallet();
        }
    });
    
    // Create backup email section
    function createBackupEmailSection() {
        const backupSection = document.createElement('div');
        backupSection.id = 'backupEmailSection';
        backupSection.className = 'backup-email-section hidden';
        backupSection.innerHTML = `
            <div class="pin-icon">
                <i class="fas fa-envelope-open-text"></i>
            </div>
            <h3>Set Backup Email</h3>
            <p>Add a backup email to recover your wallet if you forget your PIN.</p>
            
            <div class="input-group">
                <label for="backupEmail">Backup Email</label>
                <input type="email" id="backupEmail" placeholder="Enter your backup email">
            </div>
            
            <div class="input-group">
                <label for="backupPassword">Recovery Password</label>
                <div class="password-input">
                    <input type="password" id="backupPassword" placeholder="Create a recovery password">
                    <button type="button" id="toggleBackupPassword">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <button class="wallet-btn primary-btn" id="saveBackupBtn">Save Backup</button>
            <button class="wallet-btn text-btn" id="skipBackupBtn">Skip for Now</button>
        `;
        
        // Append to PIN screen if it exists
        if (pinScreen) {
            pinScreen.appendChild(backupSection);
            
            // Add toggle password functionality
            const toggleBackupPassword = document.getElementById('toggleBackupPassword');
            const backupPassword = document.getElementById('backupPassword');
            
            if (toggleBackupPassword && backupPassword) {
                toggleBackupPassword.addEventListener('click', function() {
                    if (backupPassword.type === 'password') {
                        backupPassword.type = 'text';
                        toggleBackupPassword.innerHTML = '<i class="fas fa-eye-slash"></i>';
                    } else {
                        backupPassword.type = 'password';
                        toggleBackupPassword.innerHTML = '<i class="fas fa-eye"></i>';
                    }
                });
            }
            
            // Add skip backup functionality
            const skipBackupBtn = document.getElementById('skipBackupBtn');
            if (skipBackupBtn) {
                skipBackupBtn.addEventListener('click', function() {
                    backupEmailSection.classList.add('hidden');
                    loadWalletDashboard();
                });
            }
        }
    }
    
    // Initialize wallet
    function initWallet() {
        // Check if user is logged in
        if (!isUserLoggedIn()) {
            // Redirect to login or show login prompt
            showToast('Please log in to access your wallet', 'warning');
            return;
        }
        
        // Get user ID
        const userId = getUserId();
        
        if (!userId) {
            showToast('User authentication failed', 'error');
            return;
        }
        
        // Check if PIN is already set in Firebase
        firebase.firestore().collection('users').doc(userId).get()
            .then(doc => {
                if (doc.exists) {
                    const userData = doc.data();
                    
                    // Check if wallet PIN exists
                    if (userData.walletPinHash) {
                        // PIN exists, show login screen
                        if (pinSetupSection) pinSetupSection.classList.add('hidden');
                        if (pinEntrySection) pinEntrySection.classList.remove('hidden');
                        if (backupEmailSection) backupEmailSection.classList.add('hidden');
                    } else {
                        // No PIN, show setup screen
                        if (pinSetupSection) pinSetupSection.classList.remove('hidden');
                        if (pinEntrySection) pinEntrySection.classList.add('hidden');
                        if (backupEmailSection) backupEmailSection.classList.add('hidden');
                    }
                } else {
                    // User document doesn't exist, show setup screen
                    if (pinSetupSection) pinSetupSection.classList.remove('hidden');
                    if (pinEntrySection) pinEntrySection.classList.add('hidden');
                    if (backupEmailSection) backupEmailSection.classList.add('hidden');
                }
            })
            .catch(error => {
                console.error('Error checking PIN status:', error);
                showToast('Failed to check PIN status', 'error');
                
                // Default to setup screen
                if (pinSetupSection) pinSetupSection.classList.remove('hidden');
                if (pinEntrySection) pinEntrySection.classList.add('hidden');
                if (backupEmailSection) backupEmailSection.classList.add('hidden');
            });
    }
    
        // Modify the openWallet function to check for wallet tag after PIN verification
function openWallet() {
    
 // Check if user is logged in
 if (!isUserLoggedIn()) {
            showToast('Please log in to access your wallet', 'warning');
            return;
        }
        
        // Reset PIN inputs
        resetPinInputs();

        // Show wallet modal with overlay
        if (walletModal) {
            walletModal.style.display = 'flex';
            
            // Add overlay
            const overlay = document.querySelector('.modal-overlay');
            if (overlay) {
                overlay.classList.add('active');
            } else {
                const newOverlay = document.createElement('div');
                newOverlay.className = 'modal-overlay active';
                document.body.appendChild(newOverlay);
            }
            
            // Initialize wallet to check PIN status
            initWallet();
            
            // Focus on first PIN input after a short delay to ensure elements are visible
            setTimeout(() => {
                if (pinSetupSection && !pinSetupSection.classList.contains('hidden')) {
                    if (pinDigits && pinDigits.length > 0) pinDigits[0].focus();
                } else if (pinEntrySection && !pinEntrySection.classList.contains('hidden')) {
                    if (pinLoginDigits && pinLoginDigits.length > 0) pinLoginDigits[0].focus();
                }
            }, 300);
            
            // Add body class to prevent scrolling
            document.body.classList.add('modal-open');
        }
    }
    
    // Close wallet modal
    function closeWallet() {
        if (walletModal) {
            walletModal.style.display = 'none';
            
            // Remove overlay
            const overlay = document.querySelector('.modal-overlay');
            if (overlay) {
                overlay.classList.remove('active');
            }
            
            // Reset PIN inputs
            resetPinInputs();
            
            // Reset screens
            if (pinScreen) pinScreen.classList.remove('hidden');
            if (walletDashboard) walletDashboard.classList.add('hidden');
            if (backupEmailSection) backupEmailSection.classList.add('hidden');
            
            // Remove body class to allow scrolling
            document.body.classList.remove('modal-open');
            
            // Clean up any listeners
            cleanupWallet();
        }
    }
    
    // Setup PIN input fields
    function setupPinInputs(inputs) {
        if (!inputs || inputs.length === 0) return;
        
        inputs.forEach((input, index) => {
            // Handle input
            input.addEventListener('input', function(e) {
                // Allow only numbers
                this.value = this.value.replace(/[^0-9]/g, '');
                
                // Move to next input if value is entered
                if (this.value && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
                
                // Check if all digits are filled
                if (inputs === pinDigits) {
                    checkPinComplete(pinDigits);
                }
            });
            
            // Handle backspace
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && !this.value && index > 0) {
                    inputs[index - 1].focus();
                }
            });
            
            // Handle paste
            input.addEventListener('paste', function(e) {
                e.preventDefault();
                const pastedData = e.clipboardData.getData('text').replace(/[^0-9]/g, '').slice(0, inputs.length);
                
                if (pastedData) {
                    // Fill inputs with pasted data
                    for (let i = 0; i < pastedData.length; i++) {
                        if (index + i < inputs.length) {
                            inputs[index + i].value = pastedData[i];
                        }
                    }
                    
                    // Focus on next empty input or last input
                    const nextIndex = Math.min(index + pastedData.length, inputs.length - 1);
                    inputs[nextIndex].focus();
                    
                    // Check if all digits are filled
                    if (inputs === pinDigits) {
                        checkPinComplete(pinDigits);
                    }
                }
            });
        });
    }
    
    // Check if PIN is complete and show confirm section
    function checkPinComplete(inputs) {
        if (!inputs || inputs.length === 0 || !pinConfirmContainer) return;
        
        const isComplete = Array.from(inputs).every(input => input.value.length === 1);
        
        if (isComplete && !pinConfirmContainer.classList.contains('hidden')) {
            return;
        }
        
        if (isComplete) {
            pinConfirmContainer.classList.remove('hidden');
            if (pinConfirmDigits && pinConfirmDigits.length > 0) {
                pinConfirmDigits[0].focus();
            }
        }
    }
    
    // Reset PIN inputs
    function resetPinInputs() {
        // Reset PIN setup inputs
        if (pinDigits) {
            Array.from(pinDigits).forEach(input => input.value = '');
        }
        
        if (pinConfirmDigits) {
            Array.from(pinConfirmDigits).forEach(input => input.value = '');
        }
        
        if (pinLoginDigits) {
            Array.from(pinLoginDigits).forEach(input => input.value = '');
        }
        
        // Hide confirm container
        if (pinConfirmContainer) {
            pinConfirmContainer.classList.add('hidden');
        }
    }
    
    // Handle PIN creation
    function handlePinCreation() {
        if (!pinDigits || !pinConfirmDigits) return;
        
        // Get PIN values
        const pin = Array.from(pinDigits).map(input => input.value).join('');
        const confirmPin = Array.from(pinConfirmDigits).map(input => input.value).join('');
        
        // Validate PIN
        if (pin.length !== 4) {
            showToast('Please enter a 4-digit PIN', 'error');
            return;
        }
        
        // Check if confirm PIN is shown
        if (pinConfirmContainer && pinConfirmContainer.classList.contains('hidden')) {
            pinConfirmContainer.classList.remove('hidden');
            if (pinConfirmDigits && pinConfirmDigits.length > 0) {
                pinConfirmDigits[0].focus();
            }
            return;
        }
        
        // Validate confirm PIN
        if (confirmPin.length !== 4) {
            showToast('Please confirm your PIN', 'error');
            return;
        }
        
        // Check if PINs match
        if (pin !== confirmPin) {
            showToast('PINs do not match. Please try again.', 'error');
            resetPinInputs();
            if (pinDigits && pinDigits.length > 0) {
                pinDigits[0].focus();
            }
            return;
        }
        
        // Save PIN to Firebase
        const userId = getUserId();
        
        if (!userId) {
            showToast('User authentication failed', 'error');
            return;
        }
        
               // Show loading state
               if (createPinBtn) {
            createPinBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating...';
            createPinBtn.disabled = true;
        }
        
        // Hash the PIN before storing
        const pinHash = hashPin(pin);
        
        // Save PIN to Firebase
        firebase.firestore().collection('users').doc(userId).update({
            walletPinHash: pinHash,
            walletPinCreatedAt: firebase.firestore.FieldValue.serverTimestamp()
        })
        .then(() => {
            // Show success message
            showToast('PIN created successfully', 'success');
            
            // Reset button state
            if (createPinBtn) {
                createPinBtn.innerHTML = 'Create PIN';
                createPinBtn.disabled = false;
            }
            
            // Show backup email section
            if (pinSetupSection) pinSetupSection.classList.add('hidden');
            if (backupEmailSection) backupEmailSection.classList.remove('hidden');
        })
        .catch(error => {
            console.error('Error saving PIN:', error);
            showToast('Failed to create PIN. Please try again.', 'error');
            
            // Reset button state
            if (createPinBtn) {
                createPinBtn.innerHTML = 'Create PIN';
                createPinBtn.disabled = false;
            }
        });
    }
    
    // Save backup email
    function saveBackupEmail() {
        if (!backupEmailInput || !backupPasswordInput) return;
        
        const email = backupEmailInput.value.trim();
        const password = backupPasswordInput.value.trim();
        
        // Validate email
        if (!email) {
            showToast('Please enter a backup email', 'error');
            return;
        }
        
        // Simple email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            showToast('Please enter a valid email address', 'error');
            return;
        }
        
        // Validate password
        if (!password) {
            showToast('Please create a recovery password', 'error');
            return;
        }
        
        if (password.length < 6) {
            showToast('Password must be at least 6 characters', 'error');
            return;
        }
        
        // Get user ID
        const userId = getUserId();
        
        if (!userId) {
            showToast('User authentication failed', 'error');
            return;
        }
        
        // Show loading state
        if (saveBackupBtn) {
            saveBackupBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
            saveBackupBtn.disabled = true;
        }
        
        // Save to Firebase
        firebase.firestore().collection('users').doc(userId).update({
            backupEmail: email,
            backupPasswordHash: hashPassword(password),
            backupSetAt: firebase.firestore.FieldValue.serverTimestamp()
        })
        .then(() => {
            // Show success message
            showToast('Backup email saved successfully', 'success');
            
            // Reset button state
            if (saveBackupBtn) {
                saveBackupBtn.innerHTML = 'Save Backup';
                saveBackupBtn.disabled = false;
            }
            
            // Load wallet dashboard
            if (backupEmailSection) backupEmailSection.classList.add('hidden');
            loadWalletDashboard();
        })
        .catch(error => {
            console.error('Error saving backup email:', error);
            showToast('Failed to save backup email. Please try again.', 'error');
            
            // Reset button state
            if (saveBackupBtn) {
                saveBackupBtn.innerHTML = 'Save Backup';
                saveBackupBtn.disabled = false;
            }
        });
    }
    
    // Handle PIN login
    function handlePinLogin() {
        if (!pinLoginDigits) return;
        
        // Get entered PIN
        const enteredPin = Array.from(pinLoginDigits).map(input => input.value).join('');
        
        // Validate PIN
        if (enteredPin.length !== 4) {
            showToast('Please enter your 4-digit PIN', 'error');
            return;
        }
        
        // Get user ID
        const userId = getUserId();
        
        if (!userId) {
            showToast('User authentication failed', 'error');
            return;
        }
        
        // Show loading state
        if (loginPinBtn) {
            loginPinBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
            loginPinBtn.disabled = true;
        }
        
        // Get stored PIN from Firebase
        firebase.firestore().collection('users').doc(userId).get()
            .then(doc => {
                if (doc.exists) {
                    const userData = doc.data();
                    const storedPinHash = userData.walletPinHash;
                    
                    // Check if PIN is correct
                    if (storedPinHash !== hashPin(enteredPin)) {
                        showToast('Incorrect PIN. Please try again.', 'error');
                        resetPinInputs();
                        if (pinLoginDigits && pinLoginDigits.length > 0) {
                            pinLoginDigits[0].focus();
                        }
                        
                        // Reset button state
                        if (loginPinBtn) {
                            loginPinBtn.innerHTML = 'Login';
                            loginPinBtn.disabled = false;
                        }
                        return;
                    }
                    
                    // Reset button state
                    if (loginPinBtn) {
                        loginPinBtn.innerHTML = 'Login';
                        loginPinBtn.disabled = false;
                    }
                    
                    // Load wallet dashboard
                    loadWalletDashboard();
                } else {
                    showToast('User data not found. Please try again.', 'error');
                    
                    // Reset button state
                    if (loginPinBtn) {
                        loginPinBtn.innerHTML = 'Login';
                        loginPinBtn.disabled = false;
                    }
                }
            })
            .catch(error => {
                console.error('Error verifying PIN:', error);
                showToast('Failed to verify PIN. Please try again.', 'error');
                
                // Reset button state
                if (loginPinBtn) {
                    loginPinBtn.innerHTML = 'Login';
                    loginPinBtn.disabled = false;
                }
            });
    }
    
    // Handle forgot PIN
    function handleForgotPin() {
        // Get user ID
        const userId = getUserId();
        
        if (!userId) {
            showToast('User authentication failed', 'error');
            return;
        }
        
        // Check if backup email is set in Firebase
        firebase.firestore().collection('users').doc(userId).get()
            .then(doc => {
                if (doc.exists) {
                    const userData = doc.data();
                    const backupEmail = userData.backupEmail;
                    
                    if (!backupEmail) {
                        showToast('No backup email found. Please contact support.', 'error');
                        return;
                    }
                    
                    // Create reset PIN modal
                    createResetPinModal(backupEmail);
                } else {
                    showToast('User data not found. Please contact support.', 'error');
                }
            })
            .catch(error => {
                console.error('Error checking backup email:', error);
                showToast('Failed to check backup email. Please try again.', 'error');
            });
    }
    
    // Create reset PIN modal
    function createResetPinModal(email) {
        // Hide current screens
        if (pinScreen) pinScreen.classList.add('hidden');
        
        // Create reset PIN modal if it doesn't exist
        let resetPinModal = document.getElementById('resetPinModal');
        
        if (!resetPinModal) {
            resetPinModal = document.createElement('div');
            resetPinModal.id = 'resetPinModal';
            resetPinModal.className = 'wallet-screen';
            resetPinModal.innerHTML = `
                <div class="wallet-header">
                    <h2>Reset PIN</h2>
                    <button class="close-wallet" id="closeResetPinBtn">&times;</button>
                </div>
                
                <div class="reset-pin-content">
                    <div class="pin-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <h3>Reset Your Wallet PIN</h3>
                    <p>We'll send a reset link to your backup email: <strong>${maskEmail(email)}</strong></p>
                    
                    <div class="input-group">
                        <label for="recoveryPassword">Recovery Password</label>
                        <input type="password" id="recoveryPassword" placeholder="Enter your recovery password">
                    </div>
                    
                    <button class="wallet-btn primary-btn" id="sendResetLinkBtn">Send Reset Link</button>
                    <button class="wallet-btn text-btn" id="backToLoginBtn">Back to Login</button>
                </div>
            `;
            
            if (walletModal) {
                walletModal.querySelector('.wallet-container').appendChild(resetPinModal);
            }
            
            // Add event listeners
            const closeResetPinBtn = document.getElementById('closeResetPinBtn');
            const sendResetLinkBtn = document.getElementById('sendResetLinkBtn');
            const backToLoginBtn = document.getElementById('backToLoginBtn');
            
            if (closeResetPinBtn) {
                closeResetPinBtn.addEventListener('click', closeWallet);
            }
            
            if (sendResetLinkBtn) {
                sendResetLinkBtn.addEventListener('click', sendResetLink);
            }
            
            if (backToLoginBtn) {
                backToLoginBtn.addEventListener('click', function() {
                    resetPinModal.classList.add('hidden');
                    if (pinScreen) pinScreen.classList.remove('hidden');
                });
            }
        } else {
            resetPinModal.classList.remove('hidden');
        }
    }
    
    // Send reset link
    function sendResetLink() {
        const recoveryPassword = document.getElementById('recoveryPassword');
        
        if (!recoveryPassword) return;
        
        const password = recoveryPassword.value.trim();
        
        if (!password) {
            showToast('Please enter your recovery password', 'error');
            return;
        }
        
        // Get user ID
        const userId = getUserId();
        
        if (!userId) {
            showToast('User authentication failed', 'error');
            return;
        }
        
        // Show loading state
        const sendResetLinkBtn = document.getElementById('sendResetLinkBtn');
        if (sendResetLinkBtn) {
            sendResetLinkBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            sendResetLinkBtn.disabled = true;
        }
        
        // Verify recovery password against Firebase
        firebase.firestore().collection('users').doc(userId).get()
            .then(doc => {
                if (doc.exists) {
                    const userData = doc.data();
                    const storedPasswordHash = userData.backupPasswordHash;
                    
                    // Check if password is correct
                    if (storedPasswordHash !== hashPassword(password)) {
                        showToast('Incorrect recovery password', 'error');
                        
                        // Reset button state
                        if (sendResetLinkBtn) {
                            sendResetLinkBtn.innerHTML = 'Send Reset Link';
                            sendResetLinkBtn.disabled = false;
                        }
                        return;
                    }
                    
                    // In a real app, this would send an actual email
                    // For this demo, we'll simulate sending an email and reset the PIN directly
                    
                    // Remove PIN from Firebase
                    return firebase.firestore().collection('users').doc(userId).update({
                        walletPinHash: firebase.firestore.FieldValue.delete()
                    });
                } else {
                    throw new Error('User data not found');
                }
            })
            .then(() => {
                // Show success message
                showToast('Reset link sent to your email', 'success');
                
                // Close reset modal
                const resetPinModal = document.getElementById('resetPinModal');
                if (resetPinModal) {
                    resetPinModal.classList.add('hidden');
                }
                
                // Show PIN setup screen
                if (pinScreen) pinScreen.classList.remove('hidden');
                if (pinSetupSection) pinSetupSection.classList.remove('hidden');
                if (pinEntrySection) pinEntrySection.classList.add('hidden');
                
                // Reset PIN inputs
                resetPinInputs();
                
                // Focus on first PIN input
                if (pinDigits && pinDigits.length > 0) {
                    pinDigits[0].focus();
                }
                
                // Reset button state
                if (sendResetLinkBtn) {
                    sendResetLinkBtn.innerHTML = 'Send Reset Link';
                    sendResetLinkBtn.disabled = false;
                }
            })
            .catch(error => {
                console.error('Error resetting PIN:', error);
                showToast('Failed to reset PIN. Please try again.', 'error');
                
                // Reset button state
                if (sendResetLinkBtn) {
                    sendResetLinkBtn.innerHTML = 'Send Reset Link';
                    sendResetLinkBtn.disabled = false;
                }
            });
    }
    
    // Load wallet dashboard
    function loadWalletDashboard() {
        // Hide PIN screen and show dashboard
        if (pinScreen) pinScreen.classList.add('hidden');
        if (walletDashboard) walletDashboard.classList.remove('hidden');
        
        // Show loading state
        if (talentCoinBalance) talentCoinBalance.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
      if (pendingCoinBalance) pendingCoinBalance.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
        if (commissionBalance) commissionBalance.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
        
        // Get user ID
        const userId = getUserId();
        
        if (!userId) {
            showToast('User not authenticated', 'error');
            return;
        }
        
        // Get wallet data from Firebase
        firebase.firestore().collection('users').doc(userId).get()
            .then(doc => {
                if (doc.exists) {
                    const userData = doc.data();
                    
                   
                    // Get wallet balance
                    return firebase.firestore().collection('wallets').doc(userId).get();
                } else {
                    throw new Error('User data not found');
                }
            })
            .then(doc => {
                if (doc.exists) {
                    const walletData = doc.data();
                    
                    // Set balances
                    const talentCoins = walletData.talentCoins || 0;
                    const commission = walletData.commission || 0;
                    
                    // Update UI
                    if (talentCoinBalance) talentCoinBalance.textContent = formatNumber(talentCoins);
                    if (pendingCoinBalance) pendingCoinBalance.textContent = formatNumber(walletData.pendingCoins || 0);
                    if (commissionBalance) commissionBalance.textContent = formatNumber(commission);
                    
                    // Calculate Naira equivalent
                    const nairaValue = talentCoins * TALENT_COIN_RATE;
                    if (nairaEquivalent) nairaEquivalent.textContent = formatNumber(nairaValue);
                } else {
                    // Create wallet if it doesn't exist
                    return firebase.firestore().collection('wallets').doc(userId).set({
                        talentCoins: 0,
                        commission: 0,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    }).then(() => {
                        if (talentCoinBalance) talentCoinBalance.textContent = '0';
                        if (pendingCoinBalance) pendingCoinBalance.textContent = '0';
                        if (commissionBalance) commissionBalance.textContent = '0';
                        if (nairaEquivalent) nairaEquivalent.textContent = '0';
                    });
                }
            })
            .catch(error => {
                console.error('Error loading wallet data:', error);
                showToast('Failed to load wallet data', 'error');
                
                // Set default values
                if (talentCoinBalance) talentCoinBalance.textContent = '0';
                if (pendingCoinBalance) pendingCoinBalance.textContent = '0';
                if (commissionBalance) commissionBalance.textContent = '0';
                if (nairaEquivalent) nairaEquivalent.textContent = '0';
            });
            
        // Setup real-time updates
        setupRealTimeUpdates();
    }
    
            
            
    // Helper function to check if user is logged in
    function isUserLoggedIn() {
        return firebase.auth().currentUser !== null;
    }
    
    // Helper function to get user ID
    function getUserId() {
        const user = firebase.auth().currentUser;
        return user ? user.uid : null;
    }
    
    // Helper function to hash PIN (simple hash for demo)
    function hashPin(pin) {
        // In a real app, use a proper hashing algorithm
        // This is just a simple hash for demonstration
        let hash = 0;
        for (let i = 0; i < pin.length; i++) {
            const char = pin.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash = hash & hash; // Convert to 32bit integer
        }
        return hash.toString();
    }
    
    // Helper function to hash password
    function hashPassword(password) {
        // In a real app, use a proper hashing algorithm with salt
        // This is just a simple hash for demonstration
        let hash = 0;
        for (let i = 0; i < password.length; i++) {
            const char = password.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash = hash & hash; // Convert to 32bit integer
        }
        return hash.toString();
    }
    
    // Helper function to mask email
    function maskEmail(email) {
        if (!email) return '';
        
        const parts = email.split('@');
        if (parts.length !== 2) return email;
        
        const name = parts[0];
        const domain = parts[1];
        
        const maskedName = name.substring(0, 2) + '***' + name.substring(name.length - 2);
        
        return maskedName + '@' + domain;
    }
    
    // Helper function to format numbers with commas
    function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
    
    // Function to show toast message
    function showToast(message, type = 'info') {
        // Check if toast container exists, create if not
        let toastContainer = document.getElementById('toastContainer');
        if (!toastContainer) {
            toastContainer = document.createElement('div');
            toastContainer.id = 'toastContainer';
            document.body.appendChild(toastContainer);
            
            // Add styles
            const style = document.createElement('style');
            style.textContent = `
                #toastContainer {
                    position: fixed;
                    bottom: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    z-index: 9999;
                }
                .toast {
                    padding: 12px 20px;
                    margin-bottom: 10px;
                    border-radius: 8px;
                    display: flex;
                    align-items: center;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                    animation: slideUp 0.3s ease-out forwards;
                    max-width: 90vw;
                }
                .toast.success {
                    background-color: #4CAF50;
                    color: white;
                }
                .toast.error {
                    background-color: #F44336;
                    color: white;
                }
                .toast.info {
                    background-color: #2196F3;
                    color: white;
                }
                .toast.warning {
                    background-color: #FF9800;
                    color: white;
                }
                .toast i {
                    margin-right: 10px;
                    font-size: 18px;
                }
                @keyframes slideUp {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                @keyframes fadeOut {
                    from {
                        opacity: 1;
                    }
                    to {
                        opacity: 0;
                    }
                }
                
                /* Backup email section styles */
                .backup-email-section {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    text-align: center;
                    padding: 20px;
                }
                
                .password-input {
                    position: relative;
                    width: 100%;
                }
                
                .password-input input {
                    width: 100%;
                    padding-right: 40px;
                }
                
                .password-input button {
                    position: absolute;
                    right: 10px;
                    top: 50%;
                    transform: translateY(-50%);
                    background: none;
                    border: none;
                    color: var(--text-light);
                    cursor: pointer;
                }
                
                /* Reset PIN modal styles */
                .reset-pin-content {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    text-align: center;
                    padding: 20px;
                }
                
                /* Animation classes for balance changes */
                .increasing {
                    animation: increaseValue 1s ease;
                    color: var(--success-color);
                }
                
                .decreasing {
                    animation: decreaseValue 1s ease;
                    color: var(--danger-color);
                }
                
                @keyframes increaseValue {
                    0% { color: var(--success-color); transform: scale(1); }
                    50% { color: var(--success-color); transform: scale(1.1); }
                    100% { color: inherit; transform: scale(1); }
                }
                
                @keyframes decreaseValue {
                    0% { color: var(--danger-color); transform: scale(1); }
                    50% { color: var(--danger-color); transform: scale(1.1); }
                    100% { color: inherit; transform: scale(1); }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Create toast element
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        // Set icon based on type
        let icon;
        switch (type) {
            case 'success':
                icon = 'fas fa-check-circle';
                break;
            case 'error':
                icon = 'fas fa-times-circle';
                break;
            case 'warning':
                icon = 'fas fa-exclamation-triangle';
                break;
            default:
                icon = 'fas fa-info-circle';
        }
        
        // Set content
        toast.innerHTML = `<i class="${icon}"></i><span>${message}</span>`;
        
        // Add to container
        toastContainer.appendChild(toast);
        
        // Remove after 3 seconds
        setTimeout(() => {
            toast.style.animation = 'fadeOut 0.3s ease-out forwards';
            setTimeout(() => {
                toastContainer.removeChild(toast);
            }, 300);
        }, 3000);
    }
    
    // Add touch support for mobile devices
    function addTouchSupport() {
        // Add touch support for PIN inputs
        const addTouchToInputs = (inputs) => {
            inputs.forEach(input => {
                input.addEventListener('touchstart', function() {
                    this.focus();
                });
            });
        };
        
        addTouchToInputs(pinDigits);
        addTouchToInputs(pinConfirmDigits);
        addTouchToInputs(pinLoginDigits);
        
        // Fix iOS zoom on input focus
        const viewportMeta = document.querySelector('meta[name="viewport"]');
        if (viewportMeta) {
            viewportMeta.content = 'width=device-width, initial-scale=1, maximum-scale=1';
        } else {
            const meta = document.createElement('meta');
            meta.name = 'viewport';
            meta.content = 'width=device-width, initial-scale=1, maximum-scale=1';
            document.head.appendChild(meta);
        }
    }
    
    // Add mobile-specific enhancements
    function enhanceForMobile() {
        // Detect if device is mobile
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            // Add touch support
            addTouchSupport();
            
            // Add tap highlight color for better feedback
            const style = document.createElement('style');
            style.textContent = `
                .pin-digit, .pin-confirm-digit, .pin-login-digit, 
                .wallet-btn, .copy-btn, .close-wallet {
                    -webkit-tap-highlight-color: rgba(0,0,0,0.1);
                }
                
                /* Fix for iOS input styling */
                input[type="password"], input[type="text"], input[type="email"] {
                    -webkit-appearance: none;
                    border-radius: 4px;
                }
                
                /* Improve touch targets */
                .wallet-btn, .copy-btn, .close-wallet {
                    min-height: 44px;
                }
                
                /* Fix for iOS modal positioning */
                .wallet-modal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    -webkit-overflow-scrolling: touch;
                }
                
                /* Fix for iOS scrolling */
                .wallet-container {
                    max-height: 85vh;
                    overflow-y: auto;
                    -webkit-overflow-scrolling: touch;
                }
                
                /* Add active state for buttons */
                .wallet-btn.active, .copy-btn.active, .close-wallet.active {
                    opacity: 0.8;
                    transform: scale(0.98);
                }
            `;
            document.head.appendChild(style);
            
            // Add active state for buttons
            const buttons = document.querySelectorAll('.wallet-btn, .copy-btn, .close-wallet');
            buttons.forEach(button => {
                button.addEventListener('touchstart', function() {
                    this.classList.add('active');
                });
                
                button.addEventListener('touchend', function() {
                    this.classList.remove('active');
                });
                
                button.addEventListener('touchcancel', function() {
                    this.classList.remove('active');
                });
            });
            
            // Fix for iOS body scrolling when modal is open
            document.addEventListener('touchmove', function(e) {
                if (document.body.classList.contains('modal-open')) {
                    if (!e.target.closest('.wallet-container')) {
                        e.preventDefault();
                    }
                }
            }, { passive: false });
        }
    }
    
    // Call mobile enhancements
    enhanceForMobile();
    
    // Listen for auth state changes
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            // User is signed in, enable wallet button
            if (walletBtn) walletBtn.classList.remove('disabled');
        } else {
            // User is signed out, disable wallet button
            if (walletBtn) walletBtn.classList.add('disabled');
            
            // Close wallet if open
            if (walletModal && walletModal.style.display === 'flex') {
                closeWallet();
            }
        }
    });
    
    // Add swipe to close functionality for mobile
    let touchStartY = 0;
    let touchEndY = 0;
    
    if (walletModal) {
        walletModal.addEventListener('touchstart', function(e) {
            touchStartY = e.changedTouches[0].screenY;
        }, false);
        
        walletModal.addEventListener('touchend', function(e) {
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, false);
    }
    
    function handleSwipe() {
        const swipeDistance = touchEndY - touchStartY;
        
        // If swiped down more than 100px, close the modal
        if (swipeDistance > 100) {
            closeWallet();
        }
    }
    
    // Add real-time updates for wallet balance
    function setupRealTimeUpdates() {
        const userId = getUserId();
        
        if (!userId) return;
        
        // Listen for wallet changes
        const unsubscribe = firebase.firestore()
            .collection('wallets')
            .doc(userId)
            .onSnapshot(doc => {
                if (doc.exists && walletDashboard && !walletDashboard.classList.contains('hidden')) {
                    const walletData = doc.data();
                    
                    // Update balances
                    const talentCoins = walletData.talentCoins || 0;
                    const pendingcoins = walletData.pendingCoins || 0;
                    const commission = walletData.commission || 0;
                    
                    // Update UI with animation
                    if (talentCoinBalance) animateValueChange(talentCoinBalance, talentCoins);
                    if (pendingCoinBalance) animateValueChange(pendingCoinBalance, walletData.pendingCoins || 0);
                    if (commissionBalance) animateValueChange(commissionBalance, commission);
                    
                    // Calculate Naira equivalent
                    const nairaValue = talentCoins * TALENT_COIN_RATE;
                    if (nairaEquivalent) animateValueChange(nairaEquivalent, nairaValue);
                }
            }, error => {
                console.error("Error listening to wallet updates:", error);
            });
        
        // Store unsubscribe function to clean up when wallet is closed
        if (walletModal) {
            walletModal.setAttribute('data-unsubscribe', 'true');
            // Store the unsubscribe function in a global variable
            window.walletUnsubscribe = unsubscribe;
        }
    }
    
    // Animate value change
    function animateValueChange(element, newValue) {
        if (!element) return;
        
        // Get current value
        const currentValue = parseFloat(element.textContent.replace(/,/g, '')) || 0;
        
        // If values are the same, do nothing
        if (currentValue === newValue) return;
        
        // Determine if increasing or decreasing
        const isIncreasing = newValue > currentValue;
        
        // Add class for animation
        element.classList.add(isIncreasing ? 'increasing' : 'decreasing');
        
        // Set new value
        element.textContent = formatNumber(newValue);
        
        // Remove animation class after animation completes
        setTimeout(() => {
            element.classList.remove('increasing', 'decreasing');
        }, 1000);
    }
    
    // Clean up when wallet is closed
    function cleanupWallet() {
        // Unsubscribe from real-time updates
        if (window.walletUnsubscribe && typeof window.walletUnsubscribe === 'function') {
            window.walletUnsubscribe();
            window.walletUnsubscribe = null;
        }
    }
});

// Wallet Tag Functionality
document.addEventListener('DOMContentLoaded', function() {
  // Variables to track state
  let walletTagChecked = false;
  
  // Function to check if user has wallet tag after PIN verification
  function checkWalletTagAfterPinVerification() {
    const userId = firebase.auth().currentUser?.uid;
    if (!userId) return;
    
    // Only check once per session
    if (walletTagChecked) return;
    walletTagChecked = true;
    
    firebase.firestore().collection('users').doc(userId).get()
      .then(doc => {
        if (doc.exists) {
          const userData = doc.data();
          if (!userData.walletTag) {
            // User doesn't have a wallet tag, show the modal
            document.getElementById('walletTagModal').style.display = 'block';
            document.getElementById('modalOverlay').style.display = 'block';
          } else {
            // User has a wallet tag, display it
            const tagDisplay = document.getElementById('walletTagDisplay');
            document.getElementById('tagText').textContent = '@' + userData.walletTag;
            tagDisplay.style.display = 'flex';
          }
        }
      })
      .catch(error => {
        console.error('Error checking wallet tag:', error);
      });
  }
  
  // Set up event listeners for wallet tag modal
  const modal = document.getElementById('walletTagModal');
  const closeBtn = modal.querySelector('.close-modal');
  const walletTagInput = document.getElementById('walletTagInput');
  const createTagBtn = document.getElementById('createTagBtn');
  const tagStatus = document.getElementById('tagStatus');
  const copyTagBtn = document.getElementById('copyTagBtn');
  const modalOverlay = document.getElementById('modalOverlay');
  
  // Close modal when clicking X (but only if user already has a tag)
  if (closeBtn) {
    closeBtn.addEventListener('click', function() {
      // Check if user already has a tag before allowing close
      const userId = firebase.auth().currentUser?.uid;
      if (!userId) return;
      
      firebase.firestore().collection('users').doc(userId).get()
        .then(doc => {
          if (doc.exists && doc.data().walletTag) {
            // User already has a tag, allow closing
            modal.style.display = 'none';
            modalOverlay.style.display = 'none';
          } else {
            // User doesn't have a tag, show message
            showToast('Please create a wallet tag to continue', 'warning');
          }
        })
        .catch(error => {
          console.error('Error checking wallet tag:', error);
        });
    });
  }
  
  // Check tag availability when typing
  if (walletTagInput) {
    walletTagInput.addEventListener('input', function() {
      // Convert to lowercase and remove invalid characters (only allow a-z, 0-9)
      this.value = this.value.toLowerCase().replace(/[^a-z0-9]/g, '');
      
      const tag = this.value.trim();
      
      // Validate tag format (4-10 characters, must contain at least one letter)
      if (tag.length < 4 || tag.length > 10) {
        tagStatus.textContent = 'Tag must be 4-10 characters long';
        tagStatus.className = 'tag-status error';
        createTagBtn.disabled = true;
        return;
      }
      
      // Check if tag contains at least one letter
      if (!/[a-z]/.test(tag)) {
        tagStatus.textContent = 'Tag must contain at least one letter';
        tagStatus.className = 'tag-status error';
        createTagBtn.disabled = true;
        return;
      }
      
      // Check availability after typing stops
      clearTimeout(this.timer);
      tagStatus.textContent = 'Checking availability...';
      tagStatus.className = 'tag-status checking';
      
      this.timer = setTimeout(() => {
        // Make sure we have a valid tag before checking
        if (!tag || tag.length < 4) {
          tagStatus.textContent = 'Please enter a valid tag';
          tagStatus.className = 'tag-status error';
          createTagBtn.disabled = true;
          return;
        }
        
        try {
          // Check if the walletTags collection exists first
          firebase.firestore().collection('walletTags').limit(1).get()
            .then(() => {
              // Collection exists, now check for the specific tag
              return firebase.firestore().collection('walletTags').doc(tag).get();
            })
            .then(doc => {
              if (doc.exists) {
                // Tag already exists
                tagStatus.textContent = 'Tag is already taken';
                tagStatus.className = 'tag-status error';
                createTagBtn.disabled = true;
              } else {
                // Tag is available
                tagStatus.textContent = 'Tag is available!';
                tagStatus.className = 'tag-status available';
                createTagBtn.disabled = false;
              }
            })
            .catch(error => {
              console.error('Error checking tag:', error);
              tagStatus.textContent = 'Error checking availability. Please try again.';
              tagStatus.className = 'tag-status error';
              createTagBtn.disabled = true;
            });
        } catch (error) {
          console.error('Exception during tag check:', error);
          tagStatus.textContent = 'Error checking availability. Please try again.';
          tagStatus.className = 'tag-status error';
          createTagBtn.disabled = true;
        }
      }, 500);
    });
  }
  
  // Create wallet tag
  if (createTagBtn) {
    createTagBtn.addEventListener('click', function() {
      const tag = walletTagInput.value.trim();
      if (!tag) return;
      
      // Validate tag format again
      if (tag.length < 4 || tag.length > 10 || !/[a-z]/.test(tag)) {
        tagStatus.textContent = 'Invalid tag format';
        tagStatus.className = 'tag-status error';
        return;
      }
      
      // Disable button and show loading
      this.disabled = true;
      this.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
      
      const userId = firebase.auth().currentUser?.uid;
      if (!userId) {
        tagStatus.textContent = 'Authentication error';
        tagStatus.className = 'tag-status error';
        this.disabled = false;
        this.textContent = 'Create Tag';
        return;
      }
      
      // Get user data to store with the tag
      firebase.firestore().collection('users').doc(userId).get()
        .then(doc => {
          if (!doc.exists) throw new Error('User profile not found');
          
          const userData = doc.data();
          
          // Create tag in walletTags collection with user info
          return firebase.firestore().collection('walletTags').doc(tag).set({
            tag: tag,
            userId: userId,
            username: userData.name || userData.displayName || 'User',
            email: userData.email || '',
            talentCoinBalance: userData.talentCoinBalance || 0,
            pendingCoinBalance: userData.pendingCoinBalance || 0,
            commissionBalance: userData.commissionBalance || 0,
            avatar: userData.photoURL || userData.avatar || '',
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        })
        .then(() => {
          // Update user document with the wallet tag
          return firebase.firestore().collection('users').doc(userId).update({
            walletTag: tag
          });
        })
        .then(() => {
          // Hide modal and show tag display
          modal.style.display = 'none';
          modalOverlay.style.display = 'none';
          const tagDisplay = document.getElementById('walletTagDisplay');
          document.getElementById('tagText').textContent = '@' + tag;
          tagDisplay.style.display = 'flex';
          
          // Show success message
          showToast('Wallet tag created successfully!', 'success');
        })
        .catch(error => {
          console.error('Error creating tag:', error);
          tagStatus.textContent = 'Error creating tag: ' + error.message;
          tagStatus.className = 'tag-status error';
          this.disabled = false;
          this.textContent = 'Create Tag';
        });
    });
  }
  
  // Copy tag functionality
  if (copyTagBtn) {
    copyTagBtn.addEventListener('click', function() {
      const tagText = document.getElementById('tagText').textContent;
      navigator.clipboard.writeText(tagText)
        .then(() => {
          // Show copied notification
          const originalText = this.innerHTML;
          this.innerHTML = '<i class="fas fa-check"></i>';
          setTimeout(() => {
            this.innerHTML = originalText;
          }, 2000);
          
          showToast('Wallet tag copied to clipboard', 'success');
        })
        .catch(err => {
          console.error('Failed to copy:', err);
          showToast('Failed to copy wallet tag', 'error');
        });
    });
  }
  
  // Function to find user by wallet tag - basic version
  window.findUserByWalletTag = function(tag) {
    return new Promise((resolve, reject) => {
      if (!tag || typeof tag !== 'string') {
        reject(new Error('Invalid wallet tag format'));
        return;
      }
      
      // Remove @ symbol if present
      const cleanTag = tag.startsWith('@') ? tag.substring(1) : tag;
      
      // Check if tag exists directly by document ID
      firebase.firestore().collection('walletTags').doc(cleanTag).get()
        .then(doc => {
          if (!doc.exists) {
            reject(new Error('Wallet tag not found'));
            return;
          }
          
          // Get the tag data
          const tagData = doc.data();
          
          resolve({
            userId: tagData.userId,
            username: tagData.username || 'User',
            walletTag: tagData.tag
          });
        })
        .catch(error => {
          console.error('Error finding user by wallet tag:', error);
          reject(error);
        });
    });
  };
  
  // Hook into your existing PIN verification to check for wallet tag
  // This assumes you have a function that runs after successful PIN verification
  
  // Option 1: If you have a custom event for PIN verification
  document.addEventListener('pinVerified', function() {
    checkWalletTagAfterPinVerification();
  });
  
  // Option 2: Watch for wallet dashboard becoming visible
  const walletDashboardObserver = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.attributeName === 'style' || mutation.attributeName === 'class') {
        const walletDashboard = document.getElementById('walletDashboard');
        if (walletDashboard && 
            (walletDashboard.style.display === 'block' || 
             !walletDashboard.classList.contains('hidden'))) {
          checkWalletTagAfterPinVerification();
        }
      }
    });
  });
  
  const walletDashboard = document.getElementById('walletDashboard');
  if (walletDashboard) {
    walletDashboardObserver.observe(walletDashboard, { attributes: true });
  }
  
  // Helper function to show toast messages if not already defined
  if (typeof showToast !== 'function') {
    window.showToast = function(message, type = 'info') {
      console.log(`Toast (${type}): ${message}`);
      // You can implement a proper toast notification here
      // or use an existing one if available
    };
  }
});

// Custom Error Classes
class WalletError extends Error {
    constructor(message, code, recoverable = false, retryable = false) {
        super(message);
        this.name = 'WalletError';
        this.code = code;
        this.recoverable = recoverable;
        this.retryable = retryable;
        this.timestamp = new Date().toISOString();
    }
}

class NetworkError extends WalletError {
    constructor(message, originalError = null) {
        super(message, 'NETWORK_ERROR', true, true);
        this.name = 'NetworkError';
        this.originalError = originalError;
    }
}

class AuthenticationError extends WalletError {
    constructor(message) {
        super(message, 'AUTH_ERROR', true, false);
        this.name = 'AuthenticationError';
    }
}

class ValidationError extends WalletError {
    constructor(message, field = null) {
        super(message, 'VALIDATION_ERROR', true, false);
        this.name = 'ValidationError';
        this.field = field;
    }
}

// Retry Mechanism
class RetryManager {
    constructor() {
        this.defaultConfig = {
            maxRetries: 3,
            baseDelay: 1000, // 1 second
            maxDelay: 10000, // 10 seconds
            backoffMultiplier: 2,
            retryableErrors: ['NETWORK_ERROR', 'TIMEOUT_ERROR', 'SERVER_ERROR']
        };
    }

    async executeWithRetry(operation, config = {}) {
        const finalConfig = { ...this.defaultConfig, ...config };
        let lastError;
        
        for (let attempt = 0; attempt <= finalConfig.maxRetries; attempt++) {
            try {
                const result = await operation();
                
                // If we succeeded after retries, log the recovery
                if (attempt > 0) {
                    console.log(`Operation succeeded after ${attempt} retries`);
                    this.showRecoveryMessage(attempt);
                }
                
                return result;
            } catch (error) {
                lastError = error;
                
                // Check if error is retryable
                if (!this.isRetryableError(error, finalConfig.retryableErrors)) {
                    throw error;
                }
                
                // If this was the last attempt, throw the error
                if (attempt === finalConfig.maxRetries) {
                    throw new WalletError(
                        `Operation failed after ${finalConfig.maxRetries} retries: ${error.message}`,
                        'MAX_RETRIES_EXCEEDED',
                        false,
                        false
                    );
                }
                
                // Calculate delay with exponential backoff
                const delay = Math.min(
                    finalConfig.baseDelay * Math.pow(finalConfig.backoffMultiplier, attempt),
                    finalConfig.maxDelay
                );
                
                console.log(`Attempt ${attempt + 1} failed, retrying in ${delay}ms...`, error);
                this.showRetryMessage(attempt + 1, finalConfig.maxRetries, delay);
                
                await this.delay(delay);
            }
        }
        
        throw lastError;
    }

    isRetryableError(error, retryableErrors) {
        if (error instanceof WalletError) {
            return error.retryable && retryableErrors.includes(error.code);
        }
        
        // Check for common network errors
        if (error.code === 'unavailable' || 
            error.code === 'deadline-exceeded' ||
            error.message.includes('network') ||
            error.message.includes('timeout')) {
            return true;
        }
        
        return false;
    }

    delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    showRetryMessage(attempt, maxRetries, delay) {
        showToast(
            `Connection issue detected. Retrying... (${attempt}/${maxRetries})`,
            'warning',
            delay / 1000
        );
    }

    showRecoveryMessage(attempts) {
        showToast(
            `Connection restored after ${attempts} attempt${attempts > 1 ? 's' : ''}`,
            'success'
        );
    }
}

// Global retry manager instance
const retryManager = new RetryManager();

// Enhanced Error Handler
class ErrorHandler {
    constructor() {
        this.errorLog = [];
        this.maxLogSize = 100;
    }

    handle(error, context = '', showToUser = true) {
        // Log error
        this.logError(error, context);
        
        // Handle based on error type
        if (error instanceof ValidationError) {
            this.handleValidationError(error, showToUser);
        } else if (error instanceof AuthenticationError) {
            this.handleAuthError(error, showToUser);
        } else if (error instanceof NetworkError) {
            this.handleNetworkError(error, showToUser);
        } else if (error instanceof WalletError) {
            this.handleWalletError(error, showToUser);
        } else {
            this.handleUnknownError(error, context, showToUser);
        }
    }

    logError(error, context) {
        const errorEntry = {
            timestamp: new Date().toISOString(),
            error: {
                name: error.name,
                message: error.message,
                code: error.code || 'UNKNOWN',
                stack: error.stack
            },
            context,
            userAgent: navigator.userAgent,
            url: window.location.href
        };

        this.errorLog.push(errorEntry);
        
        // Keep log size manageable
        if (this.errorLog.length > this.maxLogSize) {
            this.errorLog.shift();
        }

        // Log to console in development
        if (window.location.hostname === 'localhost') {
            console.error('Wallet Error:', errorEntry);
        }
    }

    handleValidationError(error, showToUser) {
        if (showToUser) {
            showToast(error.message, 'error');
            
            // Focus on the problematic field if specified
            if (error.field) {
                const field = document.getElementById(error.field);
                if (field) {
                    field.focus();
                    field.classList.add('error');
                    setTimeout(() => field.classList.remove('error'), 3000);
                }
            }
        }
    }

    handleAuthError(error, showToUser) {
        if (showToUser) {
            showToast(error.message, 'error');
        }
        
        // Redirect to login if needed
        if (error.code === 'AUTH_REQUIRED') {
            setTimeout(() => {
                // Redirect to login page or show login modal
                window.location.href = '/login';
            }, 2000);
        }
    }

    handleNetworkError(error, showToUser) {
        if (showToUser) {
            showToast(
                'Network connection issue. Please check your internet connection.',
                'error',
                5
            );
        }
    }

    handleWalletError(error, showToUser) {
        if (showToUser) {
            if (error.recoverable) {
                showToast(error.message, 'warning');
                this.showRecoveryOptions(error);
            } else {
                showToast(error.message, 'error');
            }
        }
    }

    handleUnknownError(error, context, showToUser) {
        if (showToUser) {
            showToast(
                'An unexpected error occurred. Please try again.',
                'error'
            );
        }
        
        // Send error to monitoring service in production
        this.reportError(error, context);
    }

    showRecoveryOptions(error) {
        if (error.retryable) {
            // Show retry button
            const retryToast = this.createRetryToast(error);
            document.body.appendChild(retryToast);
        }
    }

    createRetryToast(error) {
        const toast = document.createElement('div');
        toast.className = 'toast retry-toast';
        toast.innerHTML = `
            <div class="toast-content">
                <i class="fas fa-exclamation-triangle"></i>
                <span>${error.message}</span>
                <button class="retry-btn" onclick="this.parentElement.parentElement.remove()">
                    <i class="fas fa-redo"></i> Retry
                </button>
            </div>
        `;
        
        return toast;
    }

    reportError(error, context) {
        // In production, send to error monitoring service
        // For now, just log to console
        console.error('Unhandled error:', { error, context });
    }

    getErrorLog() {
        return [...this.errorLog];
    }

    clearErrorLog() {
        this.errorLog = [];
    }
}

// Global error handler instance
const errorHandler = new ErrorHandler();


  

    
   document.addEventListener('DOMContentLoaded', function() {
    // Get the modal element
    const transactionHistoryModal = document.getElementById('transactionHistoryModal');
    
    // Get the buttons that open the modal
    const historyBtn = document.getElementById('historyBtn');
    const viewAllTransactionsBtn = document.getElementById('viewAllTransactionsBtn');
    
    // Get the close button
    const closeHistoryModal = document.getElementById('closeHistoryModal');
    
    // Function to open the modal
    function openTransactionModal() {
        transactionHistoryModal.style.display = 'block';
        document.body.style.overflow = 'hidden'; // Prevent scrolling of background
    }
    
    // Function to close the modal
    function closeTransactionModal() {
        transactionHistoryModal.style.display = 'none';
        document.body.style.overflow = ''; // Restore scrolling
    }
    
    // Event listeners for opening the modal
    historyBtn.addEventListener('click', openTransactionModal);
    viewAllTransactionsBtn.addEventListener('click', openTransactionModal);
    
    // Event listener for closing the modal
    closeHistoryModal.addEventListener('click', closeTransactionModal);
    
    // Close the modal when clicking outside of it
    window.addEventListener('click', function(event) {
        if (event.target === transactionHistoryModal) {
            closeTransactionModal();
        }
    });
    
    // Close modal with Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && transactionHistoryModal.style.display === 'block') {
            closeTransactionModal();
        }
    });
});

     

document.addEventListener('DOMContentLoaded', function() {
    // Get the modal and button elements
    const buyCoinsModal = document.getElementById('buyCoinsModal');
    const buyCoinsBtn = document.getElementById('buycoinsBtn');
    const closeModalBtn = document.querySelector('.close-modal');
    
    // Open modal when the buy coins button is clicked
    buyCoinsBtn.addEventListener('click', function() {
        buyCoinsModal.style.display = 'block';
    });
    
    // Close modal when the close button is clicked
    closeModalBtn.addEventListener('click', function() {
        buyCoinsModal.style.display = 'none';
    });
    
    // Close modal when clicking outside the modal content
    window.addEventListener('click', function(event) {
        if (event.target === buyCoinsModal) {
            buyCoinsModal.style.display = 'none';
        }
    });
});

 // Mobile Modal Scroll Fix - Scrolling and Closing Only
function openBuyCoinsModal() {
  const modal = document.getElementById('buyCoinsModal');
  modal.style.display = 'block';
  
  // Scroll to top of modal
  modal.scrollTop = 0;
  
  // For mobile devices, prevent body scroll
  if (window.innerWidth <= 768) {
    document.body.style.overflow = 'hidden';
    document.body.style.position = 'fixed';
    document.body.style.width = '100%';
    document.body.style.top = `-${window.scrollY}px`;
  }
}

function closeBuyCoinsModal() {
  const modal = document.getElementById('buyCoinsModal');
  modal.style.display = 'none';
  
  // Restore body scroll on mobile
  if (window.innerWidth <= 768) {
    const scrollY = document.body.style.top;
    document.body.style.overflow = '';
    document.body.style.position = '';
    document.body.style.width = '';
    document.body.style.top = '';
    window.scrollTo(0, parseInt(scrollY || '0') * -1);
  }
}

document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById('buyCoinsModal');
  const modalContent = document.querySelector('.buyCoins-modal-content');
  
  if (modal && modalContent) {
    // Prevent modal from closing when touching content
    modalContent.addEventListener('touchstart', function(e) {
      e.stopPropagation();
    });
    
    modalContent.addEventListener('touchmove', function(e) {
      e.stopPropagation();
    });
    
    // Close modal when touching backdrop
    modal.addEventListener('touchstart', function(e) {
      if (e.target === modal) {
        closeBuyCoinsModal();
      }
    });
    
    // Close modal when clicking backdrop
    modal.addEventListener('click', function(e) {
      if (e.target === modal) {
        closeBuyCoinsModal();
      }
    });
    
    // Resize handler for orientation changes
    window.addEventListener('orientationchange', function() {
      setTimeout(function() {
        if (modal.style.display === 'block') {
          modal.scrollTop = 0;
        }
      }, 100);
    });
  }
  
  // Close button event listeners
  const closeButtons = document.querySelectorAll('.close-buycoins, #closeModalBtn');
  closeButtons.forEach(function(btn) {
    btn.addEventListener('click', closeBuyCoinsModal);
  });
});

// Handle escape key for closing
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const modal = document.getElementById('buyCoinsModal');
    if (modal && modal.style.display === 'block') {
      closeBuyCoinsModal();
    }
  }
});

// Export functions for global use
window.openBuyCoinsModal = openBuyCoinsModal;
window.closeBuyCoinsModal = closeBuyCoinsModal;


document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const withdrawBtn = document.getElementById('withdrawBtn');
    const withdrawModal = document.getElementById('withdrawModal');
    const closeModalBtns = document.querySelectorAll('.close-modal');
    const pinDigits = document.querySelectorAll('.pin-digit');
    const verifyPinBtn = document.getElementById('verifyPinBtn');
    const pinError = document.getElementById('pinError');
    const pinVerificationScreen = document.getElementById('pinVerificationScreen');
    const withdrawFormScreen = document.getElementById('withdrawFormScreen');
    
    // Check if elements exist to prevent errors
    if (!withdrawBtn || !withdrawModal) {
        console.error('Withdraw button or modal not found in the DOM');
        return;
    }

    // Open modal when withdraw button is clicked
    withdrawBtn.addEventListener('click', function() {
        withdrawModal.style.display = 'flex';
        // Reset PIN inputs
        pinDigits.forEach(digit => digit.value = '');
        // Focus on first PIN input
        if (pinDigits.length > 0) {
            pinDigits[0].focus();
        }
    });
    
    // Close modal when close button is clicked
    closeModalBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            withdrawModal.style.display = 'flex';
        });
    });
    
    // Close modal when clicking outside the modal content
    window.addEventListener('click', function(event) {
        if (event.target === withdrawModal) {
            withdrawModal.style.display = 'none';
        }
    });
    
    // PIN input handling - auto-focus next input
    pinDigits.forEach((digit, index) => {
        digit.addEventListener('input', function() {
            if (this.value.length === 1) {
                if (index < pinDigits.length - 1) {
                    pinDigits[index + 1].focus();
                }
            }
        });
        
        // Allow backspace to go to previous input
        digit.addEventListener('keydown', function(e) {
            if (e.key === 'Backspace' && this.value.length === 0 && index > 0) {
                pinDigits[index - 1].focus();
            }
        });
    });
    
    // Verify PIN
    verifyPinBtn.addEventListener('click', function() {
        const enteredPin = Array.from(pinDigits).map(input => input.value).join('');
        
        // Get the user's wallet PIN from Firebase
        const userId = firebase.auth().currentUser.uid;
        
        firebase.firestore().collection('users').doc(userId).get()
            .then(doc => {
                if (doc.exists) {
                    const userData = doc.data();
                    const storedPinHash = userData.walletPinHash;
                    
                    // Hash the entered PIN using the same method as in wallet dashboard
                    const enteredPinHash = hashPin(enteredPin);
                    
                    // Compare the hashed PINs
                    if (enteredPinHash === storedPinHash) {
                        // PIN is correct, show withdrawal form
                        pinVerificationScreen.style.display = 'none';
                        withdrawFormScreen.style.display = 'block';
                        pinError.textContent = '';
                    } else {
                        // PIN is incorrect
                        pinError.textContent = 'Invalid PIN. Please try again.';
                        pinDigits.forEach(digit => digit.value = '');
                        pinDigits[0].focus();
                    }
                } else {
                    pinError.textContent = 'User data not found. Please try again.';
                }
            })
            .catch(error => {
                console.error('Error verifying PIN:', error);
                pinError.textContent = 'Error verifying PIN. Please try again.';
            });
    });
    
    // Helper function to hash PIN (same as in wallet dashboard)
    function hashPin(pin) {
        // Simple hash for demonstration
        let hash = 0;
        for (let i = 0; i < pin.length; i++) {
            const char = pin.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash = hash & hash; // Convert to 32bit integer
        }
        return hash.toString();
    }
});

// Mobile Modal Scroll Fix - Scrolling and Closing Only
function openWithdrawModal() {
  const modal = document.getElementById('withdrawModal');
  modal.style.display = 'block';
  
  // Scroll to top of modal
  modal.scrollTop = 0;
  
  // For mobile devices, prevent body scroll
  if (window.innerWidth <= 768) {
    document.body.style.overflow = 'hidden';
    document.body.style.position = 'fixed';
    document.body.style.width = '100%';
    document.body.style.top = `-${window.scrollY}px`;
  }
}

function closeWithdrawModal() {
  const modal = document.getElementById('withdrawModal');
  modal.style.display = 'none';
  
  // Restore body scroll on mobile
  if (window.innerWidth <= 768) {
    const scrollY = document.body.style.top;
    document.body.style.overflow = '';
    document.body.style.position = '';
    document.body.style.width = '';
    document.body.style.top = '';
    window.scrollTo(0, parseInt(scrollY || '0') * -1);
  }
}

document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById('withdrawModal');
  const modalContent = document.querySelector('.withdraw-modal-content');
  
  if (modal && modalContent) {
    // Prevent modal from closing when touching content
    modalContent.addEventListener('touchstart', function(e) {
      e.stopPropagation();
    });
    
    modalContent.addEventListener('touchmove', function(e) {
      e.stopPropagation();
    });
    
    // Close modal when touching backdrop
    modal.addEventListener('touchstart', function(e) {
      if (e.target === modal) {
        closeWithdrawModal();
      }
    });
    
    // Close modal when clicking backdrop
    modal.addEventListener('click', function(e) {
      if (e.target === modal) {
        closeWithdrawModal();
      }
    });
    
    // Resize handler for orientation changes
    window.addEventListener('orientationchange', function() {
      setTimeout(function() {
        if (modal.style.display === 'block') {
          modal.scrollTop = 0;
        }
      }, 100);
    });
  }
  
  // Close button event listeners
  const closeButtons = document.querySelectorAll('.close-withdraw-modal, .close-modal, #closewithdrawmodal, #closewithdrawformscreen');
  closeButtons.forEach(function(btn) {
    btn.addEventListener('click', closeWithdrawModal);
  });
});

// Handle escape key for closing
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const modal = document.getElementById('withdrawModal');
    if (modal && modal.style.display === 'block') {
      closeWithdrawModal();
    }
  }
});

// Export functions for global use
window.openWithdrawModal = openWithdrawModal;
window.closeWithdrawModal = closeWithdrawModal;


// Mobile Modal Scroll Fix - Scrolling and Closing Only
function openTransactionHistoryModal() {
  const modal = document.getElementById('transactionHistoryModal');
  modal.style.display = 'block';
  
  // Scroll to top of modal
  modal.scrollTop = 0;
  
  // For mobile devices, prevent body scroll
  if (window.innerWidth <= 768) {
    document.body.style.overflow = 'hidden';
    document.body.style.position = 'fixed';
    document.body.style.width = '100%';
    document.body.style.top = `-${window.scrollY}px`;
  }
}

function closeTransactionHistoryModal() {
  const modal = document.getElementById('transactionHistoryModal');
  modal.style.display = 'none';
  
  // Restore body scroll on mobile
  if (window.innerWidth <= 768) {
    const scrollY = document.body.style.top;
    document.body.style.overflow = '';
    document.body.style.position = '';
    document.body.style.width = '';
    document.body.style.top = '';
    window.scrollTo(0, parseInt(scrollY || '0') * -1);
  }
}

function openTransactionDetailsModal() {
  const modal = document.getElementById('transactionDetailsModal');
  modal.style.display = 'block';
  
  // Scroll to top of modal
  modal.scrollTop = 0;
  
  // For mobile devices, prevent body scroll
  if (window.innerWidth <= 768) {
    document.body.style.overflow = 'hidden';
    document.body.style.position = 'fixed';
    document.body.style.width = '100%';
    document.body.style.top = `-${window.scrollY}px`;
  }
}

function closeTransactionDetailsModal() {
  const modal = document.getElementById('transactionDetailsModal');
  modal.style.display = 'none';
  
  // Restore body scroll on mobile
  if (window.innerWidth <= 768) {
    const scrollY = document.body.style.top;
    document.body.style.overflow = '';
    document.body.style.position = '';
    document.body.style.width = '';
    document.body.style.top = '';
    window.scrollTo(0, parseInt(scrollY || '0') * -1);
  }
}

document.addEventListener('DOMContentLoaded', function() {
  const historyModal = document.getElementById('transactionHistoryModal');
  const historyModalContent = document.querySelector('.Historymodal-content');
  const detailsModal = document.getElementById('transactionDetailsModal');
  const detailsModalContent = document.querySelectorAll('.Historymodal-content')[1];
  
  // Transaction History Modal Event Handlers
  if (historyModal && historyModalContent) {
    // Prevent modal from closing when touching content
    historyModalContent.addEventListener('touchstart', function(e) {
      e.stopPropagation();
    });
    
    historyModalContent.addEventListener('touchmove', function(e) {
      e.stopPropagation();
    });
    
    // Close modal when touching backdrop
    historyModal.addEventListener('touchstart', function(e) {
      if (e.target === historyModal) {
        closeTransactionHistoryModal();
      }
    });
    
    // Close modal when clicking backdrop
    historyModal.addEventListener('click', function(e) {
      if (e.target === historyModal) {
        closeTransactionHistoryModal();
      }
    });
    
    // Resize handler for orientation changes
    window.addEventListener('orientationchange', function() {
      setTimeout(function() {
        if (historyModal.style.display === 'block') {
          historyModal.scrollTop = 0;
        }
      }, 100);
    });
  }
  
  // Transaction Details Modal Event Handlers
  if (detailsModal && detailsModalContent) {
    // Prevent modal from closing when touching content
    detailsModalContent.addEventListener('touchstart', function(e) {
      e.stopPropagation();
    });
    
    detailsModalContent.addEventListener('touchmove', function(e) {
      e.stopPropagation();
    });
    
    // Close modal when touching backdrop
    detailsModal.addEventListener('touchstart', function(e) {
      if (e.target === detailsModal) {
        closeTransactionDetailsModal();
      }
    });
    
    // Close modal when clicking backdrop
    detailsModal.addEventListener('click', function(e) {
      if (e.target === detailsModal) {
        closeTransactionDetailsModal();
      }
    });
    
    // Resize handler for orientation changes
    window.addEventListener('orientationchange', function() {
      setTimeout(function() {
        if (detailsModal.style.display === 'block') {
          detailsModal.scrollTop = 0;
        }
      }, 100);
    });
  }
  
  // Close button event listeners for Transaction History Modal
  const historyCloseButtons = document.querySelectorAll('.close-History, #closetransactionhistorymodal');
  historyCloseButtons.forEach(function(btn) {
    btn.addEventListener('click', closeTransactionHistoryModal);
  });
  
  // Close button event listeners for Transaction Details Modal
  const detailsCloseButtons = document.querySelectorAll('#closetransactiondetailsmodal, #closeDetailsBtn');
  detailsCloseButtons.forEach(function(btn) {
    btn.addEventListener('click', closeTransactionDetailsModal);
  });
});

// Handle escape key for closing
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const historyModal = document.getElementById('transactionHistoryModal');
    const detailsModal = document.getElementById('transactionDetailsModal');
    
    if (historyModal && historyModal.style.display === 'block') {
      closeTransactionHistoryModal();
    }
    
    if (detailsModal && detailsModal.style.display === 'block') {
      closeTransactionDetailsModal();
    }
  }
});

// Export functions for global use
window.openTransactionHistoryModal = openTransactionHistoryModal;
window.closeTransactionHistoryModal = closeTransactionHistoryModal;
window.openTransactionDetailsModal = openTransactionDetailsModal;
window.closeTransactionDetailsModal = closeTransactionDetailsModal;


// JavaScript to fix the Font Awesome icon and handle the game portal
document.addEventListener('DOMContentLoaded', function() {
    // Fix for Font Awesome icon
    const gameIcon = document.querySelector('.action-icon.game-icon');
    
    // Clear the icon container and add a fresh icon
    if (gameIcon) {
        gameIcon.innerHTML = '<i class="fas fa-gamepad"></i>';
    }
    
    // Game portal functionality
    const gameButton = document.querySelector('.action-btn.Game-btn');
    const gamePortal = document.querySelector('.game-portal-container');
    const closePortalBtn = document.querySelector('.close-portal-btn');
    
    // Add click event listener to the game button
    gameButton.addEventListener('click', function() {
        // Show the game portal
        gamePortal.style.display = 'block';
        
        // Prevent scrolling on the body when portal is open
        document.body.style.overflow = 'hidden';
    });
    
    // Add click event listener to the close button
    closePortalBtn.addEventListener('click', function() {
        // Hide the game portal
        gamePortal.style.display = 'none';
        
        // Re-enable scrolling on the body
        document.body.style.overflow = 'auto';
    });
});

document.addEventListener('DOMContentLoaded', function() {
    // Get the rewarder button and modal
    const rewarderBtn = document.querySelector('.action-btn.rewarder-btn');
    const rewarderModal = document.getElementById('rewarderModal');
    const closeRewarderModal = document.querySelector('.close-rewarder-modal');
    
    // Open modal when rewarder button is clicked
    rewarderBtn.addEventListener('click', function() {
        rewarderModal.classList.remove('hidden');
        rewarderModal.classList.add('active');
        document.body.style.overflow = 'hidden'; // Prevent scrolling
    });
    
    // Close modal when close button is clicked
    if (closeRewarderModal) {
        closeRewarderModal.addEventListener('click', function() {
            rewarderModal.classList.remove('active');
            setTimeout(() => {
                rewarderModal.classList.add('hidden');
                document.body.style.overflow = ''; // Re-enable scrolling
            }, 300);
        });
    }
    
    // Close modal when clicking outside the modal content
    rewarderModal.addEventListener('click', function(event) {
        if (event.target === rewarderModal) {
            rewarderModal.classList.remove('active');
            setTimeout(() => {
                rewarderModal.classList.add('hidden');
                document.body.style.overflow = ''; // Re-enable scrolling
            }, 300);
        }
    });
});


document.addEventListener('DOMContentLoaded', function() {
    // Get the creator button and the creator modal
    const creatorBtn = document.querySelector('.creator-btn');
    const creatorModal = document.querySelector('#creatorModal');
    
    // Hide the creator modal initially
    if (creatorModal) {
        creatorModal.style.display = 'none';
    }
    
    // Add click event listener to the creator button
    if (creatorBtn && creatorModal) {
        creatorBtn.addEventListener('click', function() {
            // Toggle the display of the creator modal
            if (creatorModal.style.display === 'none' || creatorModal.style.display === '') {
                // Show the creator modal
                creatorModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                // Optional: Add a class for additional styling
                creatorModal.classList.add('creator-modal-open');
            } else {
                // Hide the creator modal
                creatorModal.style.display = 'none';
                document.body.style.overflow = 'auto';
                // Optional: Remove the class
                creatorModal.classList.remove('creator-modal-open');
            }
        });
    }
    
    // Close button functionality
    const creatorCloseBtn = document.querySelector('.creator-modal-close-btn');
    if (creatorCloseBtn && creatorModal) {
        creatorCloseBtn.addEventListener('click', function() {
            creatorModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            creatorModal.classList.remove('creator-modal-open');
        });
    }
    
    // Close when clicking outside the creator modal
    document.addEventListener('click', function(event) {
        // Check if the click is outside the creator modal and not on the trigger button
        if (creatorModal && 
            creatorModal.style.display === 'flex' && 
            !creatorModal.querySelector('.creator-modal-container').contains(event.target) && 
            !creatorBtn.contains(event.target)) {
            
            creatorModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            creatorModal.classList.remove('creator-modal-open');
        }
    });
});

// Placeholder functions for card buttons (you'll tell me what these should do later)
function openEntertainmentEvent() {
    console.log('Entertainment Event clicked');
    // You'll tell me what happens here
}

function openSportEvent() {
    console.log('Sport Event clicked');
    // You'll tell me what happens here
}

function openAwardCeremony() {
    console.log('Award Ceremony clicked');
    // You'll tell me what happens here
}

document.addEventListener('DOMContentLoaded', function() {
    // Get the entertainment event page
    const entertainmentEventPage = document.querySelector('#entertainmentEventPage');
    
    // Hide the entertainment event page initially
    if (entertainmentEventPage) {
        entertainmentEventPage.style.display = 'none';
    }
    
    // Close button functionality
    const closeEntertainmentEventPageBtn = document.querySelector('.close-entertainment-event-page-btn');
    if (closeEntertainmentEventPageBtn && entertainmentEventPage) {
        closeEntertainmentEventPageBtn.addEventListener('click', function() {
            entertainmentEventPage.style.display = 'none';
            document.body.style.overflow = 'auto';
        });
    }
});

// Open Entertainment Event Page (called from creator modal)
function openEntertainmentEvent() {
    const entertainmentEventPage = document.querySelector('#entertainmentEventPage');
    const creatorModal = document.querySelector('#creatorModal');
    
    if (entertainmentEventPage) {
        // Hide creator modal first
        if (creatorModal) {
            creatorModal.style.display = 'none';
        }
        
        // Show entertainment event page
        entertainmentEventPage.style.display = 'block';
        document.body.style.overflow = 'auto'; // Allow scrolling on the page
    }
}

// Switch Entertainment Tabs
function switchEntertainmentTab(tabName) {
    // Remove active class from all tabs and content
    document.querySelectorAll('.entertainment-tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelectorAll('.entertainment-tab-pane').forEach(content => {
        content.classList.remove('active');
    });
    
    // Add active class to clicked tab and corresponding content
    document.querySelector(`#${tabName}EntertainmentEvent`).classList.add('active');
    document.getElementById(`entertainment-${tabName}-tab`).classList.add('active');
}

document.addEventListener('DOMContentLoaded', function() {
    // Get the host entertainment popup
    const hostEntertainmentPopup = document.querySelector('#hostEntertainmentPopup');
    
    // Hide the popup initially
    if (hostEntertainmentPopup) {
        hostEntertainmentPopup.style.display = 'none';
    }
    
    // Close button functionality
    const closeHostEntertainmentPopupBtn = document.querySelector('#closeHostEntertainmentPopupBtn');
    if (closeHostEntertainmentPopupBtn && hostEntertainmentPopup) {
        closeHostEntertainmentPopupBtn.addEventListener('click', function() {
            hostEntertainmentPopup.style.display = 'none';
            document.body.style.overflow = 'auto';
        });
    }
    
    // Close when clicking outside
    hostEntertainmentPopup.addEventListener('click', function(event) {
        if (event.target === hostEntertainmentPopup) {
            hostEntertainmentPopup.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    });
    
    // Initialize fee calculations
    setupFeeCalculations();
    
    // Initialize word counter
    setupWordCounter();
    
    // Initialize form validation
    setupFormValidation();
});


// Add this to the existing entertainment-event-page.js file

document.addEventListener('DOMContentLoaded', function() {
    // Existing code...
    
    // Host Entertainment Event button functionality
    const hostEntertainmentEventBtn = document.querySelector('#hostEntertainmentEvent');
    if (hostEntertainmentEventBtn) {
        hostEntertainmentEventBtn.addEventListener('click', function() {
            openHostEntertainmentPopup();
        });
    }
});

// Event type data configuration
const eventTypeData = {
    medium: {
        categories: ['singing', 'dancing', 'comedy', 'poetry', 'storytelling', 'music performance'],
        durations: ['3 days', '7 days', '14 days', '30 days'],
        participantRange: { min: 10, max: 50 },
        entryFeeDefault: 30,
        votingFeeDefault: 20,
        creationFee: { full: 40, discounted: 25 }
    },
    tactical: {
        categories: ['talent showcase', 'skill competition', 'creative challenge', 'performance battle'],
        durations: ['3 days', '7 days', '14 days', '30 days', '45 days', '60 days'],
        participantRange: { min: 10, max: 30 },
        entryFeeDefault: 40,
        votingFeeDefault: 35,
        creationFee: { full: 75, discounted: 43 }
    },
    bigRush: {
        categories: ['amazing inventions', 'pitch deck'],
        durations: ['3 days', '7 days', '14 days', '30 days', '45 days'],
        participantRange: { min: 10, max: 30 },
        entryFeeDefault: 70,
        votingFeeDefault: 50,
        creationFee: { full: 90, discounted: 60 }
    }
};

// Valid promo codes
const validPromoCodes = ['Bisask19', 'nig2025', 'Ismartdc'];

// Custom categories storage
let customCategories = {
    medium: [],
    tactical: [],
    bigRush: []
};

// Tags and rules storage
let hashtags = [];
let startags = [];
let eventRules = [];

// Current user's TC balance
let currentUserBalance = 0;

// Update the openHostEntertainmentPopup function to ensure events are loaded
function openHostEntertainmentPopup() {
    const hostEntertainmentPopup = document.querySelector('#hostEntertainmentPopup');
    if (hostEntertainmentPopup) {
        hostEntertainmentPopup.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        // Load user's TC balance
        loadUserBalance();
        
        // Also refresh events in the background
        loadExistingEvents();
    }
}


// Close popup
document.addEventListener('DOMContentLoaded', function() {
    const closeBtn = document.getElementById('closeHostEntertainmentPopupBtn');
    if (closeBtn) {
        closeBtn.addEventListener('click', function() {
            document.getElementById('hostEntertainmentPopup').style.display = 'none';
            document.body.style.overflow = 'auto';
        });
    }
    
    // Initialize form validation and other features
    setupFormValidation();
    setupWordCounter();
    setupFeeCalculations();
});

// Load user's TC balance
async function loadUserBalance() {
    try {
        const user = auth.currentUser;
        if (user) {
            const walletDoc = await db.collection('wallets').doc(user.uid).get();
            if (walletDoc.exists) {
                currentUserBalance = walletDoc.data().balance || 0;
                console.log('User TC Balance:', currentUserBalance);
            }
        }
    } catch (error) {
        console.error('Error loading user balance:', error);
        currentUserBalance = 0;
    }
}

// Toggle payment method
function togglePaymentMethod(method) {
    const promoCodeSection = document.getElementById('promoCodeSection');
    const tcBalanceRadio = document.getElementById('tcBalancePayment');
    const promoCodeRadio = document.getElementById('promoCodePayment');
    
    if (method === 'promoCode') {
        promoCodeSection.style.display = 'block';
        promoCodeRadio.checked = true;
        tcBalanceRadio.checked = false;
    } else {
        promoCodeSection.style.display = 'none';
        tcBalanceRadio.checked = true;
        promoCodeRadio.checked = false;
        document.getElementById('promoCodeInput').value = '';
    }
    
    updatePaymentSummary();
}

// Update event type options
function updateEventTypeOptions() {
    const eventType = document.getElementById('eventType').value;
    const categoryGroup = document.getElementById('categoryGroup');
    const durationGroup = document.getElementById('durationGroup');
    const participantsGroup = document.getElementById('participantsGroup');
    const entryFeeGroup = document.getElementById('entryFeeGroup');
    const votingFeeGroup = document.getElementById('votingFeeGroup');
    const eventNameGroup = document.getElementById('eventNameGroup');
    const descriptionGroup = document.getElementById('descriptionGroup');
    const backgroundGroup = document.getElementById('backgroundGroup');
    const tagsGroup = document.getElementById('tagsGroup');
    const rulesGroup = document.getElementById('rulesGroup');
    const paymentGroup = document.getElementById('paymentGroup');
    const submitGroup = document.getElementById('submitGroup');
    
    if (eventType) {
        const data = eventTypeData[eventType];
        
        // Show all form groups
        categoryGroup.style.display = 'block';
        durationGroup.style.display = 'block';
        participantsGroup.style.display = 'block';
        entryFeeGroup.style.display = 'block';
        votingFeeGroup.style.display = 'block';
        eventNameGroup.style.display = 'block';
        descriptionGroup.style.display = 'block';
        backgroundGroup.style.display = 'block';
        tagsGroup.style.display = 'block';
        rulesGroup.style.display = 'block';
        paymentGroup.style.display = 'block';
        submitGroup.style.display = 'block';
        
        // Update categories
        updateCategories(eventType, data.categories);
        
        // Update durations
        updateDurations(data.durations);
        
        // Update participant limits
        updateParticipantLimits(data.participantRange);
        
        // Update fee defaults
        updateFeeDefaults(data.entryFeeDefault, data.votingFeeDefault);
        
        // Update payment summary
        updatePaymentSummary(eventType);
        
    } else {
        // Hide all form groups
        categoryGroup.style.display = 'none';
        durationGroup.style.display = 'none';
        participantsGroup.style.display = 'none';
        entryFeeGroup.style.display = 'none';
        votingFeeGroup.style.display = 'none';
        eventNameGroup.style.display = 'none';
        descriptionGroup.style.display = 'none';
        backgroundGroup.style.display = 'none';
        tagsGroup.style.display = 'none';
        rulesGroup.style.display = 'none';
        paymentGroup.style.display = 'none';
        submitGroup.style.display = 'none';
    }
}

// Update categories dropdown
function updateCategories(eventType, categories) {
    const categorySelect = document.getElementById('eventCategory');
    categorySelect.innerHTML = '<option value="">Select Category</option>';
    
    // Add default categories
    categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category.charAt(0).toUpperCase() + category.slice(1);
        categorySelect.appendChild(option);
    });
    
    // Add custom categories
    if (customCategories[eventType] && customCategories[eventType].length > 0) {
        customCategories[eventType].forEach(category => {
            const option = document.createElement('option');
            option.value = category;
            option.textContent = category;
            categorySelect.appendChild(option);
        });
    }
}

// Update durations dropdown
function updateDurations(durations) {
    const durationSelect = document.getElementById('eventDuration');
    durationSelect.innerHTML = '<option value="">Select Duration</option>';
    
    durations.forEach(duration => {
        const option = document.createElement('option');
        option.value = duration;
        option.textContent = duration;
        durationSelect.appendChild(option);
    });
}

// Update participant limits
function updateParticipantLimits(range) {
    const participantsInput = document.getElementById('maxParticipants');
    const participantsHelp = document.getElementById('participantsHelp');
    
    participantsInput.min = range.min;
    participantsInput.max = range.max;
    participantsInput.placeholder = range.min.toString();
    participantsHelp.textContent = `Minimum: ${range.min}, Maximum: ${range.max}`;
}

// Update fee defaults
function updateFeeDefaults(entryDefault, votingDefault) {
    const entryFeeInput = document.getElementById('entryFee');
    const votingFeeInput = document.getElementById('votingFee');
    const entryFeeNaira = document.getElementById('entryFeeNaira');
    const votingFeeNaira = document.getElementById('votingFeeNaira');
    
    entryFeeInput.placeholder = entryDefault.toString();
    votingFeeInput.placeholder = votingDefault.toString();
    
    entryFeeNaira.textContent = `â‰ˆ â‚¦${entryDefault * 15}`;
    votingFeeNaira.textContent = `â‰ˆ â‚¦${votingDefault * 15}`;
}

// Toggle custom category input
function toggleCustomCategory() {
    const customInput = document.querySelector('.custom-category-input');
    const toggleBtn = document.querySelector('.custom-category-toggle');
    
    if (customInput.style.display === 'none' || !customInput.style.display) {
        customInput.style.display = 'flex';
        toggleBtn.textContent = 'Cancel';
    } else {
        customInput.style.display = 'none';
        toggleBtn.textContent = 'Add Custom Category';
        document.getElementById('customCategory').value = '';
    }
}

// Add custom category
function addCustomCategory() {
    const eventType = document.getElementById('eventType').value;
    const customCategoryInput = document.getElementById('customCategory');
    const categoryValue = customCategoryInput.value.trim();
    
    if (categoryValue && eventType) {
        if (!customCategories[eventType]) {
            customCategories[eventType] = [];
        }
        
        if (!customCategories[eventType].includes(categoryValue)) {
            customCategories[eventType].push(categoryValue);
            
            const data = eventTypeData[eventType];
            updateCategories(eventType, data.categories);
            
            document.getElementById('eventCategory').value = categoryValue;
            
            customCategoryInput.value = '';
            toggleCustomCategory();
        }
    }
}

// Toggle entry fee
function toggleEntryFee() {
    const entryFeeInput = document.getElementById('entryFee');
    const noEntryFeeBtn = document.getElementById('noEntryFeeBtn');
    
    if (noEntryFeeBtn.classList.contains('active')) {
        noEntryFeeBtn.classList.remove('active');
        entryFeeInput.disabled = false;
        noEntryFeeBtn.textContent = 'No Entry Fee';
    } else {
        noEntryFeeBtn.classList.add('active');
        entryFeeInput.disabled = true;
        entryFeeInput.value = '';
        noEntryFeeBtn.textContent = 'Enable Entry Fee';
    }
    
    updatePaymentSummary();
}

// Toggle voting fee
function toggleVotingFee() {
    const votingFeeInput = document.getElementById('votingFee');
    const noVotingFeeBtn = document.getElementById('noVotingFeeBtn');
    
    if (noVotingFeeBtn.classList.contains('active')) {
        noVotingFeeBtn.classList.remove('active');
        votingFeeInput.disabled = false;
        noVotingFeeBtn.textContent = 'No Voting Fee';
    } else {
        noVotingFeeBtn.classList.add('active');
        votingFeeInput.disabled = true;
        votingFeeInput.value = '';
        noVotingFeeBtn.textContent = 'Enable Voting Fee';
    }
    
    updatePaymentSummary();
}

// Setup fee calculations
function setupFeeCalculations() {
    const entryFeeInput = document.getElementById('entryFee');
    const votingFeeInput = document.getElementById('votingFee');
    
    if (entryFeeInput) {
        entryFeeInput.addEventListener('input', function() {
            const value = parseInt(this.value) || 0;
            const nairaValue = value * 15;
            document.getElementById('entryFeeNaira').textContent = `â‰ˆ â‚¦${nairaValue}`;
            updatePaymentSummary();
        });
    }
    
    if (votingFeeInput) {
        votingFeeInput.addEventListener('input', function() {
            const value = parseInt(this.value) || 0;
            const nairaValue = value * 15;
            document.getElementById('votingFeeNaira').textContent = `â‰ˆ â‚¦${nairaValue}`;
            updatePaymentSummary();
        });
    }
}

// Update payment summary
function updatePaymentSummary(eventType = null) {
    if (!eventType) {
        eventType = document.getElementById('eventType').value;
    }
    
    if (!eventType) return;
    
    const data = eventTypeData[eventType];
    const noEntryFee = document.getElementById('noEntryFeeBtn').classList.contains('active');
    const noVotingFee = document.getElementById('noVotingFeeBtn').classList.contains('active');
    
    const selectedEventTypeSpan = document.getElementById('selectedEventType');
    const creationFeeSpan = document.getElementById('creationFee');
    const feeDiscountItem = document.getElementById('feeDiscountItem');
    const discountAmountSpan = document.getElementById('discountAmount');
    const totalCreationFeeSpan = document.getElementById('totalCreationFee');
    const totalCreationFeeNairaSpan = document.getElementById('totalCreationFeeNaira');
    
    // Update event type display
    const eventTypeNames = {
        medium: 'Medium Event',
        tactical: 'Tactical Event',
        bigRush: 'Big Rush'
    };
    selectedEventTypeSpan.textContent = eventTypeNames[eventType];
    
    // Calculate creation fee
    let creationFee = data.creationFee.full;
    let discount = 0;
    
    if (noEntryFee && noVotingFee) {
        creationFee = data.creationFee.discounted;
        discount = data.creationFee.full - data.creationFee.discounted;
        feeDiscountItem.style.display = 'flex';
        discountAmountSpan.textContent = `-${discount} TC`;
    } else {
        feeDiscountItem.style.display = 'none';
    }
    
    creationFeeSpan.textContent = `${data.creationFee.full} TC`;
    totalCreationFeeSpan.textContent = `${creationFee} TC`;
    totalCreationFeeNairaSpan.textContent = (creationFee * 15).toString();
}

// Switch background tab
function switchBackgroundTab(tabType) {
    document.querySelectorAll('.bg-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.bg-content').forEach(content => {
        content.classList.remove('active');
    });
    
    document.querySelector(`[onclick="switchBackgroundTab('${tabType}')"]`).classList.add('active');
    document.getElementById(tabType === 'image' ? 'imageContent' : 'colorContent').classList.add('active');
}

// Select color
function selectColor(color) {
    document.querySelectorAll('.color-option').forEach(option => {
        option.classList.remove('selected');
    });
    
    const colorOption = document.querySelector(`[style*="${color}"]`);
    if (colorOption) {
        colorOption.classList.add('selected');
    }
    
    document.getElementById('customColor').value = color;
}

// Add hashtag
function addHashtag() {
    const hashtagInput = document.getElementById('hashtagInput');
    const hashtag = hashtagInput.value.trim().replace('#', '');
    
    if (hashtag && hashtags.length < 10 && !hashtags.includes(hashtag)) {
        hashtags.push(hashtag);
        updateHashtagsDisplay();
        hashtagInput.value = '';
    }
}

// Update hashtags display
function updateHashtagsDisplay() {
    const hashtagsDisplay = document.getElementById('hashtagsDisplay');
    hashtagsDisplay.innerHTML = '';
    
    hashtags.forEach((hashtag, index) => {
        const tagElement = document.createElement('div');
        tagElement.className = 'tag-item hashtag-item';
        tagElement.innerHTML = `
            #${hashtag}
            <button type="button" class="tag-remove" onclick="removeHashtag(${index})">Ã—</button>
        `;
        hashtagsDisplay.appendChild(tagElement);
    });
}

// Add star tag
function addStartag() {
    const startagInput = document.getElementById('startagInput');
    const startag = startagInput.value.trim().replace('*', '');
    
    if (startag && startags.length < 10 && !startags.includes(startag)) {
        startags.push(startag);
        updateStartagsDisplay();
        startagInput.value = '';
    }
}

// Update star tags display
function updateStartagsDisplay() {
    const startagsDisplay = document.getElementById('startagsDisplay');
    startagsDisplay.innerHTML = '';
    
    startags.forEach((startag, index) => {
        const tagElement = document.createElement('div');
        tagElement.className = 'tag-item startag-item';
        tagElement.innerHTML = `
            *${startag}
            <button type="button" class="tag-remove" onclick="removeStartag(${index})">Ã—</button>
        `;
        startagsDisplay.appendChild(tagElement);
    });
}

// Remove hashtag
function removeHashtag(index) {
    hashtags.splice(index, 1);
    updateHashtagsDisplay();
}

// Remove star tag
function removeStartag(index) {
    startags.splice(index, 1);
    updateStartagsDisplay();
}

// Add rule
function addRule() {
    const ruleInput = document.getElementById('ruleInput');
    const rule = ruleInput.value.trim();
    
    if (rule && eventRules.length < 15) {
        eventRules.push(rule);
        updateRulesDisplay();
        ruleInput.value = '';
        updateRulesCount();
    }
}

// Update rules display
function updateRulesDisplay() {
    const rulesList = document.getElementById('rulesList');
    rulesList.innerHTML = '';
    
    eventRules.forEach((rule, index) => {
        const ruleElement = document.createElement('div');
        ruleElement.className = 'rule-item';
        ruleElement.innerHTML = `
            <div class="rule-number">${index + 1}</div>
            <div class="rule-text">${rule}</div>
            <button type="button" class="rule-remove" onclick="removeRule(${index})">Ã—</button>
        `;
        rulesList.appendChild(ruleElement);
    });
}

// Remove rule
function removeRule(index) {
    eventRules.splice(index, 1);
    updateRulesDisplay();
    updateRulesCount();
}

// Update rules count
function updateRulesCount() {
    const rulesCount = document.getElementById('rulesCount');
    rulesCount.textContent = eventRules.length;
}

// Setup word counter
function setupWordCounter() {
    const descriptionTextarea = document.getElementById('eventDescription');
    
    if (descriptionTextarea) {
        descriptionTextarea.addEventListener('input', function() {
            const words = this.value.trim().split(/\s+/).filter(word => word.length > 0);
            const wordCount = this.value.trim() === '' ? 0 : words.length;
            document.getElementById('wordCount').textContent = wordCount;
            
            validateForm();
        });
    }
}

// Setup form validation
function setupFormValidation() {
    const form = document.getElementById('hostEntertainmentForm');
    
    if (form) {
        const inputs = form.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('input', validateForm);
            input.addEventListener('change', validateForm);
        });
        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            if (validateForm()) {
                submitForm();
            }
        });
    }
}

// Validate form
function validateForm() {
    const eventType = document.getElementById('eventType').value;
    const eventCategory = document.getElementById('eventCategory').value;
    const eventDuration = document.getElementById('eventDuration').value;
    const maxParticipants = document.getElementById('maxParticipants').value;
    const eventName = document.getElementById('eventName').value.trim();
    const eventDescription = document.getElementById('eventDescription').value.trim();
    const submitBtn = document.getElementById('createEventBtn');
    
    const words = eventDescription.split(/\s+/).filter(word => word.length > 0);
    const wordCount = eventDescription === '' ? 0 : words.length;
    
    const isValid = eventType && 
                   eventCategory && 
                   eventDuration && 
                   maxParticipants && 
                   eventName && 
                   wordCount >= 20 && 
                   wordCount <= 100 && 
                   eventRules.length >= 1;
    
    if (submitBtn) {
        submitBtn.disabled = !isValid;
    }
    
    return isValid;
}

// Validate promo code
function validatePromoCode(code) {
    return validPromoCodes.includes(code);
}

// Check if user has sufficient TC balance
function checkSufficientBalance(requiredAmount) {
    return currentUserBalance >= requiredAmount;
}

       
async function submitForm() {
    const submitBtn = document.getElementById('createEventBtn');
    const originalText = submitBtn.innerHTML;
    
    // Prevent multiple submissions
    if (submitBtn.disabled) {
        console.log('Form already being submitted');
        return;
    }
    
    try {
        // Show loading state
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Event...';
        submitBtn.disabled = true;
        
        // Get payment method
        const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
        const eventType = document.getElementById('eventType').value;
        const creationFee = calculateCreationFee(eventType);
        
        // Validate payment
        if (paymentMethod === 'tcBalance') {
            if (!checkSufficientBalance(creationFee)) {
                throw new Error(`Insufficient TC Balance. You need ${creationFee} TC but have ${currentUserBalance} TC.`);
            }
        } else if (paymentMethod === 'promoCode') {
            const promoCode = document.getElementById('promoCodeInput').value.trim();
            if (!validatePromoCode(promoCode)) {
                throw new Error('Invalid promo code. Valid codes are: Bisask19, nig2025, Ismartdc');
            }
        }
        
        // Collect form data
        const eventData = await collectFormData(paymentMethod, creationFee);
        
        // Process payment and create event
        await processPaymentAndCreateEvent(eventData, paymentMethod, creationFee);
        
        // Create and display entertainment card (only once)
        createEntertainmentCard(eventData);
        
        // Show success message
        showSuccessMessage(eventData.eventName);
        
        // Reset and close form
        resetForm();
        document.getElementById('hostEntertainmentPopup').style.display = 'none';
        document.body.style.overflow = 'auto';
        
    } catch (error) {
        console.error('Error creating event:', error);
        alert(error.message || 'Error creating event. Please try again.');
    } finally {
        // Reset button
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    }
}

     

// Calculate creation fee
function calculateCreationFee(eventType) {
    const data = eventTypeData[eventType];
    const noEntryFee = document.getElementById('noEntryFeeBtn').classList.contains('active');
    const noVotingFee = document.getElementById('noVotingFeeBtn').classList.contains('active');
    
    return (noEntryFee && noVotingFee) ? data.creationFee.discounted : data.creationFee.full;
}

// Update the collectFormData function to ensure createdAt is set properly
async function collectFormData(paymentMethod, creationFee) {
    const eventType = document.getElementById('eventType').value;
    const eventCategory = document.getElementById('eventCategory').value;
    const eventDuration = document.getElementById('eventDuration').value;
    const maxParticipants = parseInt(document.getElementById('maxParticipants').value);
    const eventName = document.getElementById('eventName').value.trim();
    const eventDescription = document.getElementById('eventDescription').value.trim();
    
    // Fee data
    const noEntryFee = document.getElementById('noEntryFeeBtn').classList.contains('active');
    const noVotingFee = document.getElementById('noVotingFeeBtn').classList.contains('active');
    const entryFee = noEntryFee ? 0 : (parseInt(document.getElementById('entryFee').value) || eventTypeData[eventType].entryFeeDefault);
    const votingFee = noVotingFee ? 0 : (parseInt(document.getElementById('votingFee').value) || eventTypeData[eventType].votingFeeDefault);
    
    // Background data
    const backgroundImage = document.getElementById('backgroundImage').files[0];
    const backgroundColor = document.getElementById('customColor').value;
    
    // Upload background image if provided
    let backgroundImageUrl = null;
    if (backgroundImage) {
        backgroundImageUrl = await new Promise((resolve) => {
            const reader = new FileReader();
            reader.onload = (e) => resolve(e.target.result);
            reader.readAsDataURL(backgroundImage);
        });
    }
    
    // Get promo code if used
    const promoCodeUsed = paymentMethod === 'promoCode' ? document.getElementById('promoCodeInput').value.trim() : null;
    
    return {
        eventId: generateEventId(),
        creatorId: auth.currentUser.uid,
        eventType,
        eventCategory,
        eventDuration,
        maxParticipants,
        currentParticipants: 0,
        eventName,
        eventDescription,
        entryFee,
        votingFee,
        backgroundImageUrl,
        backgroundColor,
        hashtags: [...hashtags],
        startags: [...startags],
        eventRules: [...eventRules],
        creationFee,
        paymentMethod,
        promoCodeUsed,
        status: 'active',
        createdAt: firebase.firestore.Timestamp.now(), // Use Timestamp.now() instead of FieldValue.serverTimestamp()
        participants: []
    };
}


// Generate unique event ID
function generateEventId() {
    return 'event_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
}

// Process payment and create event
async function processPaymentAndCreateEvent(eventData, paymentMethod, creationFee) {
    const user = auth.currentUser;
    
    if (paymentMethod === 'tcBalance') {
        // Deduct TC from user's wallet
        const newBalance = currentUserBalance - creationFee;
        await db.collection('wallets').doc(user.uid).update({
            balance: newBalance
        });
        
        // Update local balance
        currentUserBalance = newBalance;
    }
    
    // Save event to EVENT DATABASE
    await db.collection('events').doc(eventData.eventId).set(eventData);
}


function createEntertainmentCard(eventData) {
    const newEventsContainer = document.getElementById('newEventsContainer');
    const emptyState = newEventsContainer.querySelector('.entertainment-empty-state');
    
    // Check if card already exists to prevent duplicates
    const existingCard = document.getElementById(`card-${eventData.eventId}`);
    if (existingCard) {
        console.log('Card already exists for event:', eventData.eventId);
        return; // Don't create duplicate
    }
    
    // Hide empty state
    if (emptyState) {
        emptyState.style.display = 'none';
    }
    
    // Create card element
    const cardElement = document.createElement('div');
    cardElement.className = 'entertainment-card';
    cardElement.id = `card-${eventData.eventId}`;
    
    // Set background
    const backgroundStyle = eventData.backgroundImageUrl 
        ? `background-image: url(${eventData.backgroundImageUrl}); background-size: cover; background-position: center;` 
        : `background: linear-gradient(135deg, ${eventData.backgroundColor || '#4ECDC4'}, ${adjustBrightness(eventData.backgroundColor || '#4ECDC4', -20)});`;
    
    cardElement.innerHTML = `
        <div class="entertainment-card-inner" style="${backgroundStyle}">
            <!-- Card Overlay for better text visibility -->
            <div class="card-overlay"></div>
            
            <!-- Event Name (Top Left) -->
            <div class="event-name-overlay">
                <h3>${eventData.eventName}</h3>
            </div>
            
            <!-- Action Buttons (Top Right) -->
            <div class="card-action-buttons">
                <button class="card-btn edit-btn" onclick="editEventName('${eventData.eventId}')" title="Edit Event Name">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="card-btn delete-btn" onclick="deleteEvent('${eventData.eventId}')" title="Delete Event">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            
            <!-- Participants Counter (Top Right, below action buttons) -->
            <div class="participants-counter">
                <i class="fas fa-users"></i>
                <span>${eventData.currentParticipants}/${eventData.maxParticipants}</span>
            </div>
            
            <!-- Event Info (Middle) -->
            <div class="event-info-middle">
                <!-- Duration -->
                <div class="event-duration">
                    <i class="fas fa-clock"></i>
                    <span>${eventData.eventDuration}</span>
                </div>
                
                <!-- Event Type -->
                <div class="event-type">
                    <i class="fas fa-tag"></i>
                    <span>${eventData.eventType}</span>
                </div>
                
                <!-- Entry Fee (if applicable) -->
                ${eventData.entryFee > 0 ? `
                <div class="event-fee">
                    <i class="fas fa-coins"></i>
                    <span>${eventData.entryFee} TC</span>
                </div>
                ` : ''}
            </div>
            
            <!-- Action Buttons (Bottom) -->
            <div class="card-bottom-actions">
                <button class="open-btn" onclick="openEntertainmentCard('${eventData.eventId}')">
                    <i class="fas fa-eye"></i>
                    <span>View Details</span>
                </button>
                <button class="launch-btn" onclick="launchEvent('${eventData.eventId}')">
                    <i class="fas fa-rocket"></i>
                    <span>Launch</span>
                </button>
            </div>
        </div>
    `;
    
    // Add card to container (at the beginning, not before empty state)
    if (emptyState) {
        newEventsContainer.insertBefore(cardElement, emptyState);
    } else {
        newEventsContainer.appendChild(cardElement);
    }
    
    console.log('Created card for event:', eventData.eventId);
}

// Helper function to adjust color brightness
function adjustBrightness(hex, percent) {
    // Remove # if present
    hex = hex.replace('#', '');
    
    // Parse r, g, b values
    const num = parseInt(hex, 16);
    const amt = Math.round(2.55 * percent);
    const R = (num >> 16) + amt;
    const G = (num >> 8 & 0x00FF) + amt;
    const B = (num & 0x0000FF) + amt;
    
    return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
        (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
        (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
}



// Show success message
function showSuccessMessage(eventName) {
    // Create success message overlay
    const successOverlay = document.createElement('div');
    successOverlay.className = 'success-message-overlay';
    successOverlay.innerHTML = `
        <div class="success-message-container">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3>Event Created Successfully!</h3>
            <p>You have created an event <strong>${eventName}</strong></p>
            <button class="success-ok-btn" onclick="closeSuccessMessage()">OK</button>
        </div>
    `;
    
    document.body.appendChild(successOverlay);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        closeSuccessMessage();
    }, 5000);
}

// Close success message
function closeSuccessMessage() {
    const successOverlay = document.querySelector('.success-message-overlay');
    if (successOverlay) {
        successOverlay.remove();
    }
}

// Reset form
function resetForm() {
    // Reset form fields
    document.getElementById('hostEntertainmentForm').reset();
    
    // Reset arrays
    hashtags = [];
    startags = [];
    eventRules = [];
    
    // Reset displays
    updateHashtagsDisplay();
    updateStartagsDisplay();
    updateRulesDisplay();
    updateRulesCount();
    
    // Reset payment method
    document.getElementById('tcBalancePayment').checked = true;
    document.getElementById('promoCodeSection').style.display = 'none';
    
    // Reset fee buttons
    document.getElementById('noEntryFeeBtn').classList.remove('active');
    document.getElementById('noVotingFeeBtn').classList.remove('active');
    document.getElementById('noEntryFeeBtn').textContent = 'No Entry Fee';
    document.getElementById('noVotingFeeBtn').textContent = 'No Voting Fee';
    
    // Hide all form groups except event type
    const formGroups = [
        'categoryGroup', 'durationGroup', 'participantsGroup', 'entryFeeGroup',
        'votingFeeGroup', 'eventNameGroup', 'descriptionGroup', 'backgroundGroup',
        'tagsGroup', 'rulesGroup', 'paymentGroup', 'submitGroup'
    ];
    
    formGroups.forEach(groupId => {
        document.getElementById(groupId).style.display = 'none';
    });
    
    // Reset word count
    document.getElementById('wordCount').textContent = '0';
    
    // Reset background selection
    document.querySelectorAll('.bg-tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.bg-content').forEach(content => content.classList.remove('active'));
    document.querySelector('[onclick="switchBackgroundTab(\'image\')"]').classList.add('active');
    document.getElementById('imageContent').classList.add('active');
    
    // Reset color selection
    document.querySelectorAll('.color-option').forEach(option => option.classList.remove('selected'));
}

// Edit event name
async function editEventName(eventId) {
    try {
        const eventDoc = await db.collection('events').doc(eventId).get();
        if (!eventDoc.exists) {
            alert('Event not found');
            return;
        }
        
        const eventData = eventDoc.data();
        const newName = prompt('Enter new event name:', eventData.eventName);
        
        if (newName && newName.trim() !== '' && newName.trim() !== eventData.eventName) {
            // Update in database
            await db.collection('events').doc(eventId).update({
                eventName: newName.trim()
            });
            
            // Update card display
            const card = document.getElementById(`card-${eventId}`);
            const nameOverlay = card.querySelector('.event-name-overlay h3');
            nameOverlay.textContent = newName.trim();
            
            alert('Event name updated successfully!');
        }
    } catch (error) {
        console.error('Error updating event name:', error);
        alert('Error updating event name. Please try again.');
    }
}

// Delete event
async function deleteEvent(eventId) {
    if (confirm('Are you sure you want to delete this event? This action cannot be undone.')) {
        try {
            // Delete from database
            await db.collection('events').doc(eventId).delete();
            
            // Remove card from display
            const card = document.getElementById(`card-${eventId}`);
            if (card) {
                card.remove();
            }
            
            // Show empty state if no cards left
            const newEventsContainer = document.getElementById('newEventsContainer');
            const remainingCards = newEventsContainer.querySelectorAll('.entertainment-card');
            const emptyState = newEventsContainer.querySelector('.entertainment-empty-state');
            
            if (remainingCards.length === 0 && emptyState) {
                emptyState.style.display = 'block';
            }
            
            alert('Event deleted successfully!');
        } catch (error) {
            console.error('Error deleting event:', error);
            alert('Error deleting event. Please try again.');
        }
    }
}

// Open entertainment card
function openEntertainmentCard(eventId) {
    console.log('Opening entertainment card:', eventId);
    // TODO: Implement card opening functionality
    // This could open a detailed view of the event
    alert(`Opening entertainment card: ${eventId}`);
}

// Launch event
function launchEvent(eventId) {
    console.log('Launching event:', eventId);
    // TODO: Implement event launch functionality
    // This could start the event, make it live, etc.
    alert(`Launching event: ${eventId}`);
}


async function loadExistingEvents() {
    try {
        const user = auth.currentUser;
        if (!user) {
            console.log('No authenticated user found');
            return;
        }
        
        console.log('Loading existing events for user:', user.uid);
        
        // Try the query without orderBy first to test basic access
        let eventsQuery;
        try {
            eventsQuery = await db.collection('events')
                .where('creatorId', '==', user.uid)
                .where('status', '==', 'active')
                .orderBy('createdAt', 'desc')
                .get();
        } catch (orderByError) {
            console.warn('OrderBy failed, trying without orderBy:', orderByError);
            eventsQuery = await db.collection('events')
                .where('creatorId', '==', user.uid)
                .where('status', '==', 'active')
                .get();
        }
        
        const newEventsContainer = document.getElementById('newEventsContainer');
        const emptyState = newEventsContainer.querySelector('.entertainment-empty-state');
        
        if (!newEventsContainer) {
            console.error('newEventsContainer not found');
            return;
        }
        
        // Clear existing cards first (prevent duplicates) - but keep empty state
        const existingCards = newEventsContainer.querySelectorAll('.entertainment-card');
        existingCards.forEach(card => {
            console.log('Removing existing card:', card.id);
            card.remove();
        });
        
        if (!eventsQuery.empty) {
            console.log('Found', eventsQuery.size, 'events');
            
            if (emptyState) {
                emptyState.style.display = 'none';
            }
            
            // Convert to array and sort manually if orderBy failed
            const events = [];
            eventsQuery.forEach(doc => {
                const eventData = { ...doc.data(), eventId: doc.id };
                events.push(eventData);
            });
            
            // Sort by createdAt if it exists
            events.sort((a, b) => {
                if (a.createdAt && b.createdAt) {
                    return b.createdAt.toMillis() - a.createdAt.toMillis();
                }
                return 0;
            });
            
            // Create cards for each event
            events.forEach(eventData => {
                createEntertainmentCard(eventData);
            });
        } else {
            console.log('No events found');
            if (emptyState) {
                emptyState.style.display = 'block';
            }
        }
    } catch (error) {
        console.error('Error loading existing events:', error);
        
        if (error.code === 'permission-denied') {
            console.error('Permission denied. Please check if you are logged in.');
        }
    }
}


// Add a function to initialize the entertainment section
function initializeEntertainmentSection() {
    console.log('Initializing entertainment section...');
    
    // Check if user is authenticated
    const user = auth.currentUser;
    if (user) {
        loadExistingEvents();
        loadUserBalance();
    } else {
        // Wait for auth state to be determined
        const unsubscribe = auth.onAuthStateChanged(function(user) {
            if (user) {
                loadExistingEvents();
                loadUserBalance();
            }
            unsubscribe(); // Remove listener after first call
        });
    }
}

// Call this function when the entertainment section becomes visible
function onEntertainmentSectionVisible() {
    console.log('Entertainment section is now visible');
    initializeEntertainmentSection();
}

// Update the auth state change listener
auth.onAuthStateChanged(function(user) {
    console.log('Auth state changed:', user ? user.uid : 'No user');
    if (user) {
        // Only load if the entertainment section is currently visible
        const entertainmentSection = document.getElementById('newEventsContainer');
        if (entertainmentSection && isElementVisible(entertainmentSection)) {
            loadExistingEvents();
            loadUserBalance();
        }
    }
});

// Helper function to check if element is visible
function isElementVisible(element) {
    if (!element) return false;
    
    const rect = element.getBoundingClientRect();
    const style = window.getComputedStyle(element);
    
    return (
        rect.width > 0 &&
        rect.height > 0 &&
        style.display !== 'none' &&
        style.visibility !== 'hidden' &&
        style.opacity !== '0'
    );
}

// Add event listeners for when the page becomes visible
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM Content Loaded');
    
    // Initialize immediately if entertainment section exists
    const entertainmentSection = document.getElementById('newEventsContainer');
    if (entertainmentSection) {
        initializeEntertainmentSection();
    }
    
    // Listen for page visibility changes
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
            console.log('Page became visible');
            // Reload events when page becomes visible again
            setTimeout(() => {
                initializeEntertainmentSection();
            }, 500); // Small delay to ensure everything is loaded
        }
    });
    
    // Listen for focus events (when user returns to tab/app)
    window.addEventListener('focus', function() {
        console.log('Window gained focus');
        setTimeout(() => {
            initializeEntertainmentSection();
        }, 500);
    });
});

// If you're using a single-page application with navigation
// Add this function to be called when navigating to entertainment section
function navigateToEntertainmentSection() {
    console.log('Navigating to entertainment section');
    
    // Show the entertainment section
    const entertainmentSection = document.getElementById('entertainmentSection');
    if (entertainmentSection) {
        entertainmentSection.style.display = 'block';
    }
    
    // Load events after a short delay to ensure DOM is ready
    setTimeout(() => {
        initializeEntertainmentSection();
    }, 100);
}

// Add this to your navigation system if you have one
// For example, if you have buttons that show/hide sections:
function showEntertainmentSection() {
    // Hide other sections
    document.querySelectorAll('.main-section').forEach(section => {
        section.style.display = 'none';
    });
    
    // Show entertainment section
    const entertainmentSection = document.getElementById('entertainmentSection');
    if (entertainmentSection) {
        entertainmentSection.style.display = 'block';
        
        // Load events
        setTimeout(() => {
            initializeEntertainmentSection();
        }, 100);
    }
}

// Add a manual refresh function that users can call
function refreshEntertainmentEvents() {
    console.log('Manually refreshing entertainment events...');
    loadExistingEvents();
}

 


// Add event listeners for tag inputs
document.addEventListener('DOMContentLoaded', function() {
    const hashtagInput = document.getElementById('hashtagInput');
    const startagInput = document.getElementById('startagInput');
    const ruleInput = document.getElementById('ruleInput');
    
    if (hashtagInput) {
        hashtagInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                addHashtag();
            }
        });
    }
    
    if (startagInput) {
        startagInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                addStartag();
            }
        });
    }
    
    if (ruleInput) {
        ruleInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                e.preventDefault();
                addRule();
            }
        });
    }
});



       document.addEventListener('DOMContentLoaded', function() {
    // Get the button and the live events page
    const liveeventBtn = document.querySelector('.Liveevents-btn');
    const liveeventPage = document.querySelector('.liveevent-page');
    
    // Hide the live events page initially
    if (liveeventPage) {
        liveeventPage.style.display = 'none';
    }
    
    // Add click event listener to the button
    if (liveeventBtn && liveeventPage) {
        liveeventBtn.addEventListener('click', function() {
            // Toggle the display of the live events page
            if (liveeventPage.style.display === 'none' || liveeventPage.style.display === '') {
                // Show the live events page
                liveeventPage.style.display = 'block';
                // Optional: Add a class for additional styling
                liveeventPage.classList.add('liveevent-page-open');
            } else {
                // Hide the live events page
                liveeventPage.style.display = 'none';
                // Optional: Remove the class
                liveeventPage.classList.remove('liveevent-page-open');
            }
        });
    }
    
    // Optional: Add a close button functionality (if you want to close from within the page)
    // You can add this HTML inside your liveevent-page: <button class="liveevent-close-btn"><i class="fas fa-times"></i></button>
    const liveeventCloseBtn = document.querySelector('.liveevent-close-btn');
    if (liveeventCloseBtn && liveeventPage) {
        liveeventCloseBtn.addEventListener('click', function() {
            liveeventPage.style.display = 'none';
            liveeventPage.classList.remove('liveevent-page-open');
        });
    }
    
    // Optional: Close when clicking outside the live events page
    document.addEventListener('click', function(event) {
        // Check if the click is outside the live events page and not on the trigger button
        if (liveeventPage && 
            liveeventPage.style.display === 'block' && 
            !liveeventPage.contains(event.target) && 
            !liveeventBtn.contains(event.target)) {
            
            liveeventPage.style.display = 'none';
            liveeventPage.classList.remove('liveevent-page-open');
        }
    });
});
 
    
   // Tab switching functionality
        document.addEventListener('DOMContentLoaded', function() {
            const liveeventTabBtns = document.querySelectorAll('.liveevent-tab-btn');
            const liveeventTabContents = document.querySelectorAll('.liveevent-tab-content');

            liveeventTabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const liveeventTabId = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    liveeventTabBtns.forEach(b => b.classList.remove('liveevent-active'));
                    liveeventTabContents.forEach(c => c.classList.remove('liveevent-active'));
                    
                    // Add active class to clicked tab and corresponding content
                    this.classList.add('liveevent-active');
                    document.getElementById(`liveevent-${liveeventTabId}-tab`).classList.add('liveevent-active');
                });
            });

            // Sport icon selection
            const liveeventSportIcons = document.querySelectorAll('.liveevent-sport-icon');
            liveeventSportIcons.forEach(icon => {
                icon.addEventListener('click', function() {
                    liveeventSportIcons.forEach(i => i.classList.remove('liveevent-active'));
                    this.classList.add('liveevent-active');
                });
            });

            // Talent icon selection
            const liveeventTalentIcons = document.querySelectorAll('.liveevent-talent-icon');
            liveeventTalentIcons.forEach(icon => {
                icon.addEventListener('click', function() {
                    liveeventTalentIcons.forEach(i => i.classList.remove('liveevent-active'));
                    this.classList.add('liveevent-active');
                });
            });

            // Filter button selection
            const liveeventFilterBtns = document.querySelectorAll('.liveevent-filter-btn');
            liveeventFilterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    liveeventFilterBtns.forEach(b => b.classList.remove('liveevent-active'));
                    this.classList.add('liveevent-active');
                });
            });

            // Search filter button selection
            const liveeventSearchFilterBtns = document.querySelectorAll('.liveevent-search-filter-btn');
            liveeventSearchFilterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const liveeventParentContainer = this.closest('.liveevent-search-filters');
                    const liveeventSiblingBtns = liveeventParentContainer.querySelectorAll('.liveevent-search-filter-btn');
                    liveeventSiblingBtns.forEach(b => b.classList.remove('liveevent-active'));
                    this.classList.add('liveevent-active');
                });
            });

            // Search input functionality
            const liveeventSearchInputs = document.querySelectorAll('.liveevent-search-input');
            liveeventSearchInputs.forEach(input => {
                input.addEventListener('input', function() {
                    const liveeventSearchTerm = this.value.toLowerCase();
                    console.log('Searching for:', liveeventSearchTerm);
                    // Add your search logic here
                });
            });

            // Simulate loading content after 2 seconds
            setTimeout(() => {
                const liveeventLoadingMessages = document.querySelectorAll('.liveevent-loading-message');
                liveeventLoadingMessages.forEach(message => {
                    message.innerHTML = `
                        <div class="liveevent-no-results">
                            <i class="fas fa-calendar-times"></i>
                            <h3>No Live Events</h3>
                            <p>There are currently no live events available. Please check back later.</p>
                        </div>
                    `;
                });
            }, 2000);
        });


  


  document.addEventListener('DOMContentLoaded', function() {
    const newEventsBtn = document.querySelector('.newevents-btn');
    const newEventsPage = document.querySelector('.newevent-page');
    const closeBtn = document.querySelector('.newevent-close-btn');
    
    // Initially hide the page
    if (newEventsPage) {
        newEventsPage.style.display = 'none';
    }
    
    // Function to open the page
    function openNewEventsPage() {
        if (newEventsPage) {
            newEventsPage.style.display = 'block';
            newEventsBtn.classList.add('active');
        }
    }
    
    // Function to close the page
    function closeNewEventsPage() {
        if (newEventsPage) {
            newEventsPage.style.display = 'none';
            newEventsBtn.classList.remove('active');
        }
    }
    
    // Open button click event
    if (newEventsBtn) {
        newEventsBtn.addEventListener('click', function() {
            if (newEventsPage.style.display === 'none' || newEventsPage.style.display === '') {
                openNewEventsPage();
            } else {
                closeNewEventsPage();
            }
        });
    }
    
    // Close button click event
    if (closeBtn) {
        closeBtn.addEventListener('click', function() {
            closeNewEventsPage();
        });
    }
    
    // Close on outside click
    document.addEventListener('click', function(event) {
        if (newEventsPage && 
            newEventsPage.style.display === 'block' && 
            !newEventsPage.contains(event.target) && 
            !newEventsBtn.contains(event.target)) {
            closeNewEventsPage();
        }
    });
    
    // Close on Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && newEventsPage && newEventsPage.style.display === 'block') {
            closeNewEventsPage();
        }
    });
});


  // Improved Spin Wheel Functionality with isolated class names
document.addEventListener('DOMContentLoaded', function() {
    // Modal Elements
    const spinWheelBtn = document.querySelector('.action-btn.spin-btn'); // Your existing button
    const spinWheelModal = document.getElementById('spinWheelModal');
    const closeModalBtn = document.querySelector('.sg-spin-wheel-modal .sg-close-modal');
    const resultModal = document.getElementById('spinResultModal');
    const claimPrizeBtn = document.getElementById('claimPrizeBtn');
    const spinAgainBtn = document.getElementById('spinAgainBtn');
    const resultTitle = document.getElementById('resultTitle');
    const resultMessage = document.getElementById('resultMessage');
    
    // Tab Elements
    const tabBtns = document.querySelectorAll('.sg-spin-wheel-modal .sg-tab-btn');
    const tabContents = document.querySelectorAll('.sg-spin-wheel-modal .sg-tab-content');
    
    // Spin Buttons
    const basicSpinBtn = document.getElementById('sg-basic-spin-btn');
    const standardSpinBtn = document.getElementById('sg-standard-spin-btn');
    const premiumSpinBtn = document.getElementById('sg-premium-spin-btn');
    
    // Wheels
    const basicWheel = document.getElementById('sg-basic-wheel');
    const standardWheel = document.getElementById('sg-standard-wheel');
    const premiumWheel = document.getElementById('sg-premium-wheel');
    
    // Free Spins Display
    const basicFreeSpins = document.getElementById('sg-basic-free-spins');
    const standardFreeSpins = document.getElementById('sg-standard-free-spins');
    const premiumFreeSpins = document.getElementById('sg-premium-free-spins');
    
    // Spin History
    const basicSpinHistory = document.getElementById('sg-basic-spin-history');
    const standardSpinHistory = document.getElementById('sg-standard-spin-history');
    const premiumSpinHistory = document.getElementById('sg-premium-spin-history');
    
    // User data (would come from your backend)
    let userData = {
        talentCoins: 500,
        freeSpins: {
            basic: 1,
            standard: 0,
            premium: 0
        }
    };
    
    // Update free spins display
    function updateFreeSpinsDisplay() {
        basicFreeSpins.textContent = `Free Spins: ${userData.freeSpins.basic}`;
        standardFreeSpins.textContent = `Free Spins: ${userData.freeSpins.standard}`;
        premiumFreeSpins.textContent = `Free Spins: ${userData.freeSpins.premium}`;
    }
    
    // Open modal when clicking the existing spin button
    if (spinWheelBtn) {
        spinWheelBtn.addEventListener('click', function() {
            spinWheelModal.style.display = 'block';
            updateFreeSpinsDisplay();
            updateSpinButtonStates();
        });
    }
    
    // Close modal
    if (closeModalBtn) {
        closeModalBtn.addEventListener('click', function() {
            spinWheelModal.style.display = 'none';
        });
    }
    
    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
        if (event.target === spinWheelModal) {
            spinWheelModal.style.display = 'none';
        }
        if (event.target === resultModal) {
            resultModal.style.display = 'none';
        }
    });
    
    // Tab functionality
    tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            
            // Remove active class from all tabs
            tabBtns.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            // Add active class to current tab
            this.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        });
    });
    
    // Enhanced spin wheel function
    function spinWheel(wheel, button, cost, prizes, spinType) {
        // Check if user has enough coins or free spins
        if (userData.freeSpins[spinType] > 0) {
            userData.freeSpins[spinType]--;
        } else if (userData.talentCoins >= cost) {
            userData.talentCoins -= cost;
        } else {
            // Show insufficient funds message
            resultTitle.textContent = "Insufficient Talent Coins";
            resultMessage.textContent = `You need ${cost} TC to spin this wheel. Purchase more coins to continue.`;
            resultModal.style.display = 'block';
            return;
        }
        
        // Update displays
        updateFreeSpinsDisplay();
        updateSpinButtonStates();
        
        // Disable button during spin
        button.disabled = true;
        button.classList.add('spinning');
        
        // Generate random result (0-7 for 8 sections)
        const randomIndex = Math.floor(Math.random() * 8);
        const prize = prizes[randomIndex];
        
        // Calculate rotation (multiple full rotations + position to land on the prize)
        // We need to adjust the rotation to account for the wheel's starting position
        // Each section is 45 degrees, so we need to rotate to (360 - (randomIndex * 45)) + multiple full rotations
        const rotationAngle = 1440 + (360 - (randomIndex * 45));
        
        // Set the custom property for the animation
        wheel.style.setProperty('--spin-rotation', `${rotationAngle}deg`);
        
        // Add spinning class to trigger animation
        wheel.classList.add('spinning');
        
        // After animation completes, show result
        setTimeout(() => {
            // Remove spinning class
            wheel.classList.remove('spinning');
            
            // Re-enable button
            button.disabled = false;
            button.classList.remove('spinning');
            
            // Process result
            const isWin = prize > 0;
            
            // Add to user's coins if they won
            if (isWin) {
                userData.talentCoins += prize;
                updateSpinButtonStates();
                
                // Create confetti effect for wins
                createConfetti();
            }
            
            // Add to spin history
            addToSpinHistory(spinType, prize, isWin);
            
            // Show result modal
            if (isWin) {
                resultTitle.textContent = "Congratulations!";
                resultMessage.textContent = `You won ${prize} Talent Coins!`;
                
                // Change icon for win
                document.querySelector('.sg-result-icon i').className = 'fas fa-trophy';
                document.querySelector('.sg-result-icon').style.color = '#f1c40f';
            } else {
                resultTitle.textContent = "Try Again!";
                resultMessage.textContent = "Better luck next time!";
                
                // Change icon for loss
                document.querySelector('.sg-result-icon i').className = 'fas fa-sync-alt';
                document.querySelector('.sg-result-icon').style.color = '#95a5a6';
            }
            
            resultModal.style.display = 'block';
        }, 5000); // Match this to the CSS animation duration
    }
    
    // Add to spin history
    function addToSpinHistory(spinType, prize, isWin) {
        // Get the appropriate history container
        let historyContainer;
        switch(spinType) {
            case 'basic':
                historyContainer = basicSpinHistory;
                break;
            case 'standard':
                historyContainer = standardSpinHistory;
                break;
            case 'premium':
                historyContainer = premiumSpinHistory;
                break;
        }
        
        // Remove empty history message if present
        const emptyHistory = historyContainer.querySelector('.sg-empty-history');
        if (emptyHistory) {
            emptyHistory.remove();
        }
        
        // Create new history item
        const historyItem = document.createElement('div');
        historyItem.className = isWin ? 'sg-spin-result sg-win-result' : 'sg-spin-result sg-lose-result';
        
        // Create content
        if (isWin) {
            historyItem.innerHTML = `<i class="fas fa-coins"></i> ${prize} TC`;
        } else {
            historyItem.innerHTML = `<i class="fas fa-times"></i> Try Again`;
        }
        
        // Add to history container (at the beginning)
        historyContainer.insertBefore(historyItem, historyContainer.firstChild);
        
        // Limit history items to 10
        const historyItems = historyContainer.querySelectorAll('.sg-spin-result');
        if (historyItems.length > 10) {
            historyContainer.removeChild(historyItems[historyItems.length - 1]);
        }
    }
    
    // Function to check if user can afford to spin
    function canAffordSpin(cost, spinType) {
        return userData.freeSpins[spinType] > 0 || userData.talentCoins >= cost;
    }
    
    // Update spin button states
    function updateSpinButtonStates() {
        basicSpinBtn.disabled = !canAffordSpin(2, 'basic');
        standardSpinBtn.disabled = !canAffordSpin(10, 'standard');
        premiumSpinBtn.disabled = !canAffordSpin(50, 'premium');
        
        // Update button appearance based on disabled state
        [basicSpinBtn, standardSpinBtn, premiumSpinBtn].forEach(btn => {
            if (btn.disabled) {
                btn.classList.add('disabled');
            } else {
                btn.classList.remove('disabled');
            }
        });
    }
    
    // Create confetti effect
    function createConfetti() {
        const colors = ['#f39c12', '#e74c3c', '#3498db', '#2ecc71', '#9b59b6'];
        
        for (let i = 0; i < 100; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'sg-confetti';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDelay = Math.random() * 3 + 's';
            
            document.body.appendChild(confetti);
            
            // Remove confetti after animation
            setTimeout(() => {
                confetti.remove();
            }, 3000);
        }
    }
    
    // Handle result modal buttons
    claimPrizeBtn.addEventListener('click', function() {
        resultModal.style.display = 'none';
    });
    
    spinAgainBtn.addEventListener('click', function() {
        resultModal.style.display = 'none';
        
        // Find which tab is active and click its spin button
        const activeTab = document.querySelector('.sg-tab-content.active');
        if (activeTab) {
            const tabId = activeTab.id;
            let spinBtn;
            
            switch(tabId) {
                case 'sg-basic-spin':
                    spinBtn = basicSpinBtn;
                    break;
                case 'sg-standard-spin':
                    spinBtn = standardSpinBtn;
                    break;
                case 'sg-premium-spin':
                    spinBtn = premiumSpinBtn;
                    break;
            }
            
            if (spinBtn && !spinBtn.disabled) {
                spinBtn.click();
            }
        }
    });
    
    // Spin wheel event listeners
    basicSpinBtn.addEventListener('click', function() {
        const basicPrizes = [1, 5, 0, 25, 10, 0, 100, 0];
        spinWheel(basicWheel, basicSpinBtn, 2, basicPrizes, 'basic');
    });
    
    standardSpinBtn.addEventListener('click', function() {
        const standardPrizes = [3, 30, 0, 120, 50, 0, 700, 0];
        spinWheel(standardWheel, standardSpinBtn, 10, standardPrizes, 'standard');
    });
    
    premiumSpinBtn.addEventListener('click', function() {
        const premiumPrizes = [7, 50, 0, 145, 75, 0, 1000, 0];
        spinWheel(premiumWheel, premiumSpinBtn, 50, premiumPrizes, 'premium');
    });
    
    // Initialize
    updateFreeSpinsDisplay();
    updateSpinButtonStates();
    
    // For testing - add free spins
    window.addFreeSpin = function(type) {
        userData.freeSpins[type]++;
        updateFreeSpinsDisplay();
        updateSpinButtonStates();
    };
    
    // For testing - add coins
    window.addCoins = function(amount) {
        userData.talentCoins += amount;
        updateSpinButtonStates();
    };
});

      </script>
</body>
</html>
